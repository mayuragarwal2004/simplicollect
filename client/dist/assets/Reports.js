const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web2.js","assets/index.js","assets/index.css","assets/Breadcrumb.js","assets/chevron-right.js","assets/select.js","assets/index10.js","assets/index4.js","assets/index11.js","assets/index9.js","assets/index5.js","assets/index7.js","assets/index8.js","assets/index12.js","assets/chevron-down.js","assets/table.js","assets/index14.js","assets/usePagination.js","assets/react-icons.esm.js","assets/badge.js","assets/tooltip.js","assets/index6.js","assets/alert.js","assets/skeleton.js","assets/MemberLedgerReportcolumn.js","assets/format.js","assets/ChooseMemberPopoverCommand.js","assets/popover.js","assets/command.js","assets/index3.js","assets/dialog.js","assets/search.js","assets/chevrons-up-down.js","assets/checkbox.js","assets/jspdf.plugin.autotable.js","assets/label.js","assets/input.js","assets/calendar2.js","assets/chevron-left.js","assets/calendar.js","assets/switch.js","assets/web3.js"])))=>i.map(i=>d[i]);
import{j as e,B as te,u as et,a as Be,r as x,l as Me,c as oe,W as ht,_ as ut,n as bt,Q as he,F as Ce,d as rt,C as De,g as ze,k as We,h as nt,t as it,Y as vt}from"./index.js";import{B as St}from"./Breadcrumb.js";import{S as we,a as je,b as be,c as ve,d as Se,e as Pe,f as Ie}from"./select.js";import{T as Fe,a as Le,b as ne,c as G,d as Ae,e as S}from"./table.js";import{u as mt,a as pt,f as $e}from"./index14.js";import{u as ft,c as xt}from"./usePagination.js";import{D as gt,C as yt,a as wt,b as jt}from"./react-icons.esm.js";import{B as Oe}from"./badge.js";import{I as ot,T as Nt,a as _t,b as Ct,c as Rt}from"./tooltip.js";import{A as Et,b as kt,a as Tt}from"./alert.js";import{S as Te}from"./skeleton.js";import{M as Pt,a as It}from"./MemberLedgerReportcolumn.js";import{C as Ft,f as Lt}from"./ChooseMemberPopoverCommand.js";import{C as At}from"./checkbox.js";import"./jspdf.plugin.autotable.js";import{D as Mt,f as Ot,a as Dt,b as $t,c as Ut,d as Bt}from"./dialog.js";import{L as Ve}from"./label.js";import{I as Ke}from"./input.js";import{P as Ge,a as Qe,b as Ye}from"./popover.js";import{C as Je}from"./calendar2.js";import{C as Xe}from"./calendar.js";import{f as me}from"./format.js";import{S as Ht}from"./switch.js";function zt({table:a,totalRecord:w}){return e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 px-2 lg:flex-row lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:flex-row sm:space-x-6 sm:space-y-0",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.getFilteredRowModel().rows.length," row(s)."]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(we,{value:`${a.getState().pagination.pageSize}`,onValueChange:c=>{a.setPageSize(Number(c))},children:[e.jsx(je,{className:"h-8 w-[70px]",children:e.jsx(be,{placeholder:a.getState().pagination.pageSize})}),e.jsx(ve,{side:"top",children:[5,10,20,30,40,50].map(c=>e.jsx(Se,{value:`${c}`,children:c},c))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Record: ",w]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",a.getState().pagination.pageIndex+1," of ",a.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanPreviousPage(),onClick:()=>a.setPageIndex(0),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(gt,{className:"h-4 w-4"})]}),e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanPreviousPage(),onClick:a.previousPage,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(yt,{className:"h-4 w-4"})]}),e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanNextPage(),onClick:a.nextPage,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(wt,{className:"h-4 w-4"})]}),e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanNextPage(),onClick:()=>a.setPageIndex(a.getPageCount()-1),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(jt,{className:"h-4 w-4"})]})]})]})]})}function Wt({columns:a,data:w,searchInputField:c,filterField:o,filterFieldName:f,filterCategoriesList:h,totalRecord:r,children:N}){var I;const j=et(),{rows:i,onPaginationChange:u,page:M,pagination:b}=ft(),g=Be(),K=()=>{const m=new URLSearchParams(g.search),R=xt({rows:i,page:M},m);j(`?${R}`,{replace:!0})};x.useEffect(()=>{K()},[i,M]);const E=mt({data:w,columns:a,getCoreRowModel:pt(),manualPagination:!0,onPaginationChange:u,state:{pagination:b},rowCount:r}),p=x.Children.map(N,m=>x.isValidElement(m)?x.cloneElement(m,{table:E,searchInputField:c,filterField:o,filterFieldName:f,filterCategoriesList:h}):m);return e.jsxs("div",{className:"space-y-4",children:[p,e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(Fe,{children:[e.jsx(Le,{children:E.getHeaderGroups().map(m=>e.jsx(ne,{children:m.headers.map(R=>e.jsx(G,{className:"px-4 py-2 bg-newprimaryColor text-white font-raleway",colSpan:R.colSpan,children:R.isPlaceholder?null:$e(R.column.columnDef.header,R.getContext())},R.id))},m.id))}),e.jsx(Ae,{className:"bg-adminBreadCrumbsBg font-raleway",children:(I=E.getRowModel().rows)!=null&&I.length?E.getRowModel().rows.map(m=>e.jsx(ne,{"data-state":m.getIsSelected()&&"selected",children:m.getVisibleCells().map(R=>e.jsx(S,{className:"px-4 py-2",children:$e(R.column.columnDef.cell,R.getContext())},R.id))},m.id)):e.jsx(ne,{children:e.jsx(S,{colSpan:a.length,className:"h-24 text-center bg-adminBreadCrumbsBg font-raleway",children:"No results."})})})]})}),e.jsx(zt,{table:E,totalRecord:r})]})}const lt=[{id:"srno",header:()=>e.jsx("p",{className:"font-semibold",children:"Sr. No."}),cell:a=>e.jsx("p",{className:"text-muted-foreground",children:a.row.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"firstName",header:()=>e.jsx("div",{className:"font-semibold",children:"Member Name"}),cell:({row:a})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"font-medium",children:[a.original.firstName," ",a.original.lastName]}),a.original.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a.original.email})]}),enableSorting:!1,enableHiding:!1}],Kt=()=>{const a=Be(),[w,c]=x.useState([]),{chapterData:o}=Me(),[f,h]=x.useState(null),r=new URLSearchParams(a.search),[N,j]=x.useState([]),[i,u]=x.useState([]),[M,b]=x.useState([]),[g,K]=x.useState(""),[E,p]=x.useState(""),I=r.get("rows")||10,m=r.get("page")||0,R=lt.map(({accessorKey:t,header:s})=>({label:s().props.children,key:t})),[ce,Y]=x.useState(R.map(({label:t})=>t)),se=t=>{switch(t==null?void 0:t.toLowerCase()){case"approved":return e.jsx(Oe,{className:"bg-green-500 text-white",children:t});case"rejected":return e.jsx(Oe,{className:"bg-red-500 text-white",children:t});case"pending":return e.jsx(Oe,{className:"bg-yellow-500 text-white",children:"Pending Approval"});default:return e.jsx(Oe,{className:"bg-gray-500 text-white",children:"N/A"})}},D=()=>{o!=null&&o.chapterId&&(!g||!E||oe.get(`/api/report/${o.chapterId}/package-summary?rows=${I}&page=${m}`,{params:{chapterId:o.chapterId,rows:I,page:m,...g&&{termId:g}}}).then(t=>{var l;const s=(t.data.data||[]).map(v=>({...v,packageData:(v.packageData||[]).filter(B=>B.packageParent===E)}));c(s);const n=((l=s[0])==null?void 0:l.packageData)||[],d=[];for(let v=0;v<n.length;v++)d.push({accessorKey:`packageData_${v}`,header:()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:n[v].packageName}),e.jsx(Nt,{children:e.jsxs(_t,{children:[e.jsx(Ct,{children:e.jsx(ot,{className:"w-4 h-4 text-muted-foreground"})}),e.jsxs(Rt,{children:[e.jsxs("p",{children:["Package: ",n[v].packageName]}),e.jsx("p",{children:"Status indicates approval state"})]})]})})]}),cell:({row:B})=>{var ie,P,z;const O=B.original.packageData[v];return e.jsx("div",{className:"flex flex-col gap-1",children:O!=null&&O.status?se(O.status):(ie=O==null?void 0:O.calculatedResult)!=null&&ie.totalAmount?e.jsxs("span",{className:"font-medium",children:["₹",O.calculatedResult.totalAmount]}):((P=O==null?void 0:O.calculatedResult)==null?void 0:P.message)==="Package has overlapping payments"?e.jsx("span",{className:"text-green-500",children:"✔️"}):e.jsx("span",{className:"text-muted-foreground",children:((z=O==null?void 0:O.calculatedResult)==null?void 0:z.message)||"N/A"})})},enableSorting:!1,enableHiding:!1});j([...lt,...d]),h(t.data.totalRecords)}).catch(t=>{console.error(t)}))};return x.useEffect(()=>{o!=null&&o.chapterId&&oe.get(`/api/term/chapter/${o.chapterId}`).then(t=>u(t.data)).catch(()=>u([]))},[o]),x.useEffect(()=>{if(!(o!=null&&o.chapterId)||!g){b([]),p("");return}oe.get(`/api/packages/parents/${o.chapterId}?termId=${g}`).then(t=>b(t.data)).catch(()=>b([]))},[o,g]),x.useEffect(()=>{D()},[o,I,m,a.search,g,E]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Member Due Summary Report"})}),e.jsxs(Et,{variant:"info",className:"mb-6",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx(kt,{children:"Report Information"}),e.jsx(Tt,{children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"This report shows member package statuses. Approved packages are marked in green, rejected in red, and pending approvals in yellow."}),e.jsx("li",{children:"The package data includes the package name, status, and total amount if applicable."}),e.jsx("li",{children:"The amount shows the total for each package if available if the respective user chooses to pay for the package."}),e.jsx("li",{children:"N/A indicates no data available for that package as the user need not pay for the package."})]})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(we,{value:g,onValueChange:K,children:[e.jsx(je,{className:"w-[180px]",children:e.jsx(be,{placeholder:"Select Term"})}),e.jsx(ve,{children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:"Term"}),i.map(t=>e.jsx(Se,{value:t.termId||t.id,children:t.termName||t.name||t.termId},t.termId||t.id))]})})]}),e.jsxs(we,{value:E,onValueChange:p,children:[e.jsx(je,{className:"w-[180px]",children:e.jsx(be,{placeholder:"Select Package Parent"})}),e.jsx(ve,{children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:"Package Parent"}),M.map(t=>e.jsx(Se,{value:t,children:t},t))]})})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",onClick:async()=>{if(!(!(o!=null&&o.chapterId)||!g))try{const t=await oe.get(`/api/report/${o.chapterId}/all-members-excel?termId=${g}`,{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=s,n.setAttribute("download","all-members-report.xlsx"),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n),window.URL.revokeObjectURL(s)}catch(t){console.error("Failed to download Excel file:",t)}},disabled:!g,children:"Export to Excel"})]}),N&&e.jsx("div",{className:"rounded-md border",children:e.jsx(Wt,{data:w,columns:N,searchInputField:"firstName",totalRecord:f,pagination:{pageSize:I,pageIndex:m},state:{pagination:{pageSize:I,pageIndex:m}}})})]})};function qt(a){a.CapacitorUtils.Synapse=new Proxy({},{get(w,c){return new Proxy({},{get(o,f){return(h,r,N)=>{const j=a.Capacitor.Plugins[c];if(j===void 0){N(new Error(`Capacitor plugin ${c} not found`));return}if(typeof j[f]!="function"){N(new Error(`Method ${f} not found in Capacitor plugin ${c}`));return}(async()=>{try{const i=await j[f](h);r(i)}catch(i){N(i)}})()}}})}})}function Vt(a){a.CapacitorUtils.Synapse=new Proxy({},{get(w,c){return a.cordova.plugins[c]}})}function Gt(a=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!a?qt(window):window.cordova!==void 0&&Vt(window))}var Ue;(function(a){a.Documents="DOCUMENTS",a.Data="DATA",a.Library="LIBRARY",a.Cache="CACHE",a.External="EXTERNAL",a.ExternalStorage="EXTERNAL_STORAGE",a.ExternalCache="EXTERNAL_CACHE",a.LibraryNoCloud="LIBRARY_NO_CLOUD",a.Temporary="TEMPORARY"})(Ue||(Ue={}));var Ze;(function(a){a.UTF8="utf8",a.ASCII="ascii",a.UTF16="utf16"})(Ze||(Ze={}));const Qt=ht("Filesystem",{web:()=>ut(()=>import("./web2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40])).then(a=>new a.FilesystemWeb)});Gt();const qe=ht("Share",{web:()=>ut(()=>import("./web3.js"),__vite__mapDeps([41,1,2])).then(a=>new a.ShareWeb)});class ke{static async downloadFile(w,c,o="",f={}){const{showSuccessToast:h=!0,allowShare:r=!0,directory:N=Ue.Documents}=f;try{return bt.isNativePlatform()?await this.downloadNative(w,c,o,{showSuccessToast:h,allowShare:r,directory:N}):await this.downloadWeb(w,c,h)}catch(j){throw console.error("Download failed:",j),he.error(`Failed to download ${c}: ${j.message}`),j}}static async downloadWeb(w,c,o=!0){try{const f=window.URL.createObjectURL(w),h=document.createElement("a");return h.href=f,h.setAttribute("download",c),h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(f),o&&he.success(`File downloaded: ${c}`),{success:!0,path:c}}catch(f){throw new Error(`Web download failed: ${f.message}`)}}static async downloadNative(w,c,o,f={}){const{showSuccessToast:h=!0,allowShare:r=!0,directory:N=Ue.Documents}=f;try{const j=await this.blobToBase64(w),i=j.split(",")[1]||j,u=await Qt.writeFile({path:c,data:i,directory:N,encoding:Ze.UTF8});return h&&he.success(`File saved: ${c}`),r&&await this.canShare()&&await this.promptForShare(c)&&await this.shareFile(u.uri,c,o),{success:!0,path:u.uri}}catch(j){if(r&&await this.canShare())try{const i=await this.blobToBase64(w);return await qe.share({title:"Download File",text:`Download ${c}`,url:i,dialogTitle:"Save or Share File"}),h&&he.success(`File shared: ${c}`),{success:!0,path:"shared",method:"share"}}catch{throw new Error(`Native download and share failed: ${j.message}`)}else throw new Error(`Native download failed: ${j.message}`)}}static blobToBase64(w){return new Promise((c,o)=>{const f=new FileReader;f.onload=()=>c(f.result),f.onerror=o,f.readAsDataURL(w)})}static async canShare(){try{return(await qe.canShare()).value}catch{return!1}}static async shareFile(w,c,o){await qe.share({title:"Share File",text:`Share ${c}`,url:w,dialogTitle:"Share or Save File"})}static async promptForShare(w){return new Promise(c=>{const o=window.confirm(`File saved successfully! Would you like to share "${w}" or save it to another location?`);c(o)})}static async downloadExcel(w,c,o={}){const f=c.endsWith(".xlsx")?c:`${c}.xlsx`;return await this.downloadFile(w,f,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",o)}static async downloadPDF(w,c,o={}){const f=c.endsWith(".pdf")?c:`${c}.pdf`;return await this.downloadFile(w,f,"application/pdf",o)}static async downloadCSV(w,c,o={}){const f=c.endsWith(".csv")?c:`${c}.csv`;return await this.downloadFile(w,f,"text/csv",o)}static async downloadFromResponse(w,c,o={}){if(w.status!==200)throw new Error(`Server returned status ${w.status}`);const f=w.headers["content-type"]||"",h=new Blob([w.data],{type:f});return await this.downloadFile(h,c,f,o)}}const tt=()=>({downloadFile:async(h,r,N,j)=>await ke.downloadFile(h,r,N,j),downloadExcel:async(h,r,N)=>await ke.downloadExcel(h,r,N),downloadPDF:async(h,r,N)=>await ke.downloadPDF(h,r,N),downloadCSV:async(h,r,N)=>await ke.downloadCSV(h,r,N),downloadFromResponse:async(h,r,N)=>await ke.downloadFromResponse(h,r,N)}),Yt=()=>{const{chapterData:a}=Me(),{downloadFromResponse:w}=tt(),[c,o]=x.useState([]),[f,h]=x.useState([]),[r,N]=x.useState(null),[j,i]=x.useState(!1),[u,M]=x.useState(""),[b,g]=x.useState([]),[K,E]=x.useState(!1),[p,I]=x.useState(!1),m=async()=>{try{const Y=await oe.get("/api/member/all",{params:{chapterId:a==null?void 0:a.chapterId}});o(Y.data),h(Y.data)}catch{he.error("Error fetching members")}};x.useEffect(()=>{a!=null&&a.chapterId&&m()},[a]),x.useEffect(()=>{r&&ce()},[r]);const R=async()=>{if(!r){he.error("Please select a member");return}I(!0);try{const Y=await oe.get(`/api/report/${a==null?void 0:a.chapterId}/member-ledger`,{params:{memberId:r.value},responseType:"blob"}),se=`${r.label} - ${new Date().toLocaleString()} - Member Ledger.xlsx`;await w(Y,se,{showSuccessToast:!0,allowShare:!0})}catch(Y){console.error("Error exporting data:",Y)}finally{I(!1)}},ce=async()=>{if(r){E(!0),g([]);try{const Y=await oe.get(`/api/report/${a==null?void 0:a.chapterId}/member-ledger-json`,{params:{memberId:r.value}});g(Y.data),E(!1)}catch{he.error("Error fetching ledger data"),E(!1)}}};return!a||!(a!=null&&a.chapterId)?null:e.jsxs("div",{className:"flex flex-col gap-4 mt-5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ft,{members:c,selectedMember:r,setSelectedMember:N}),e.jsx(te,{onClick:R,disabled:p||!r,children:p?"Exporting...":"Export Data"})]}),K?e.jsx(Te,{className:"h-10 w-full mb-4"}):r?e.jsx(Pt,{data:b,columns:It,searchInputField:"firstName",totalRecord:0,pagination:{pageSize:10,pageIndex:0},state:{pagination:{pageSize:10,pageIndex:0}}}):null]})};function Jt({table:a,totalRecord:w}){return e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 px-2 lg:flex-row lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:flex-row sm:space-x-6 sm:space-y-0",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.getFilteredRowModel().rows.length," row(s)."]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(we,{value:`${a.getState().pagination.pageSize}`,onValueChange:c=>{a.setPageSize(Number(c))},children:[e.jsx(je,{className:"h-8 w-[70px]",children:e.jsx(be,{placeholder:a.getState().pagination.pageSize})}),e.jsx(ve,{side:"top",children:[5,10,20,30,40,50].map(c=>e.jsx(Se,{value:`${c}`,children:c},c))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Record: ",w]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",a.getState().pagination.pageIndex+1," of ",a.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanPreviousPage(),onClick:()=>a.setPageIndex(0),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(gt,{className:"h-4 w-4"})]}),e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanPreviousPage(),onClick:a.previousPage,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(yt,{className:"h-4 w-4"})]}),e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanNextPage(),onClick:a.nextPage,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(wt,{className:"h-4 w-4"})]}),e.jsxs(te,{variant:"outline",className:"h-8 w-8 p-0",disabled:!a.getCanNextPage(),onClick:()=>a.setPageIndex(a.getPageCount()-1),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(jt,{className:"h-4 w-4"})]})]})]})]})}function Xt({columns:a,data:w,searchInputField:c,filterField:o,filterFieldName:f,filterCategoriesList:h,totalRecord:r,children:N}){var I;const j=et(),{rows:i,onPaginationChange:u,page:M,pagination:b}=ft(),g=Be(),K=()=>{const m=new URLSearchParams(g.search),R=xt({rows:i,page:M},m);j(`?${R}`,{replace:!0})};x.useEffect(()=>{K()},[i,M]);const E=mt({data:w,columns:a,getCoreRowModel:pt(),manualPagination:!0,onPaginationChange:u,state:{pagination:b},rowCount:r}),p=x.Children.map(N,m=>x.isValidElement(m)?x.cloneElement(m,{table:E,searchInputField:c,filterField:o,filterFieldName:f,filterCategoriesList:h}):m);return e.jsxs("div",{className:"space-y-4",children:[p,e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(Fe,{children:[e.jsx(Le,{children:E.getHeaderGroups().map(m=>e.jsx(ne,{children:m.headers.map(R=>e.jsx(G,{className:"px-4 py-2 bg-newprimaryColor text-white font-raleway",colSpan:R.colSpan,children:R.isPlaceholder?null:$e(R.column.columnDef.header,R.getContext())},R.id))},m.id))}),e.jsx(Ae,{className:"bg-adminBreadCrumbsBg font-raleway",children:(I=E.getRowModel().rows)!=null&&I.length?E.getRowModel().rows.map(m=>e.jsx(ne,{"data-state":m.getIsSelected()&&"selected",children:m.getVisibleCells().map(R=>e.jsx(S,{className:"px-4 py-2",children:$e(R.column.columnDef.cell,R.getContext())},R.id))},m.id)):e.jsx(ne,{children:e.jsx(S,{colSpan:a.length,className:"h-24 text-center bg-adminBreadCrumbsBg font-raleway",children:"No results."})})})]})}),e.jsx(Jt,{table:E,totalRecord:r})]})}const ct=[{id:"srno",header:()=>e.jsx("p",{className:!0,children:"Sr. No."}),cell:a=>e.jsx("p",{children:a.row.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:()=>e.jsx("div",{className:!0,children:"Member Name"}),cell:({row:a})=>e.jsxs("p",{className:"text-sm font-medium",children:[a.original.firstName," ",a.original.lastName]}),enableSorting:!1,enableHiding:!1},{accessorKey:"paidAmount",header:()=>e.jsx("div",{className:!0,children:"Amount Paid"}),cell:({row:a})=>e.jsx("p",{className:"text-sm font-medium",children:a.original.paidAmount}),enableSorting:!1,enableHiding:!1},{accessorKey:"balanceAmount",header:()=>e.jsx("div",{className:!0,children:"Balance"}),cell:({row:a})=>e.jsx("p",{className:"text-sm font-medium",children:a.original.balanceAmount}),enableSorting:!1,enableHiding:!1},{accessorKey:"packageName",header:()=>e.jsx("div",{className:!0,children:"Package Name"}),cell:({row:a})=>e.jsx("p",{className:"text-sm font-medium",children:a.original.packageName}),enableSorting:!1,enableHiding:!1},{accessorKey:"paymentType",header:()=>e.jsx("div",{className:!0,children:"Payment Type"}),cell:({row:a})=>e.jsx("p",{className:"text-sm font-medium",children:a.original.paymentType}),enableSorting:!1,enableHiding:!1},{accessorKey:"paymentReceivedByName",header:()=>e.jsx("div",{className:!0,children:"Collected By"}),cell:({row:a})=>e.jsx("p",{className:"text-sm font-medium",children:a.original.paymentReceivedByName}),enableSorting:!1,enableHiding:!1},{accessorKey:"approvedByName",header:()=>e.jsx("div",{className:!0,children:"Approved By"}),cell:({row:a})=>e.jsx("p",{className:"text-sm font-medium",children:a.original.approvedByName}),enableSorting:!1,enableHiding:!1},{accessorKey:"transactionDate",header:()=>e.jsx("div",{className:!0,children:"Date"}),cell:({row:a})=>{const w=new Date(a.original.transactionDate);return e.jsx("p",{className:"text-sm font-medium",children:Lt(w)})},enableSorting:!1,enableHiding:!1},{accessorKey:"approvalStatus",header:()=>e.jsx("div",{className:!0,children:"Approval Status"}),cell:({row:a})=>e.jsx("p",{className:"text-sm font-medium",children:a.original.approvalStatus})}];var Zt={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(a,w){((c,o)=>{a.exports=o()})(Ce,function c(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},f,h=!o.document&&!!o.postMessage,r=o.IS_PAPA_WORKER||!1,N={},j=0,i={};function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var n=Y(s);n.chunkSize=parseInt(n.chunkSize),s.step||s.chunk||(n.chunkSize=null),this._handle=new E(n),(this._handle.streamer=this)._config=n}).call(this,t),this.parseChunk=function(s,n){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let v=this._config.newline;v||(l=this._config.quoteChar||'"',v=this._handle.guessLineEndings(s,l)),s=[...s.split(v).slice(d)].join(v)}this.isFirstChunk&&D(this._config.beforeFirstChunk)&&(l=this._config.beforeFirstChunk(s))!==void 0&&(s=l),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+s,l=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=l.meta.cursor,d=(this._finished||(this._partialLine=d.substring(s-this._baseIndex),this._baseIndex=s),l&&l.data&&(this._rowCount+=l.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)o.postMessage({results:l,workerId:i.WORKER_ID,finished:d});else if(D(this._config.chunk)&&!n){if(this._config.chunk(l,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=l=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(l.data),this._completeResults.errors=this._completeResults.errors.concat(l.errors),this._completeResults.meta=l.meta),this._completed||!d||!D(this._config.complete)||l&&l.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||l&&l.meta.paused||this._nextChunk(),l}this._halted=!0},this._sendError=function(s){D(this._config.error)?this._config.error(s):r&&this._config.error&&o.postMessage({workerId:i.WORKER_ID,error:s,finished:!1})}}function M(t){var s;(t=t||{}).chunkSize||(t.chunkSize=i.RemoteChunkSize),u.call(this,t),this._nextChunk=h?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),h||(s.onload=se(this._chunkLoaded,this),s.onerror=se(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!h),this._config.downloadRequestHeaders){var n,d=this._config.downloadRequestHeaders;for(n in d)s.setRequestHeader(n,d[n])}var l;this._config.chunkSize&&(l=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+l));try{s.send(this._config.downloadRequestBody)}catch(v){this._chunkError(v.message)}h&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(n=>(n=n.getResponseHeader("Content-Range"))!==null?parseInt(n.substring(n.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(n){n=s.statusText||n,this._sendError(new Error(n))}}function b(t){(t=t||{}).chunkSize||(t.chunkSize=i.LocalChunkSize),u.call(this,t);var s,n,d=typeof FileReader<"u";this.stream=function(l){this._input=l,n=l.slice||l.webkitSlice||l.mozSlice,d?((s=new FileReader).onload=se(this._chunkLoaded,this),s.onerror=se(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var l=this._input,v=(this._config.chunkSize&&(v=Math.min(this._start+this._config.chunkSize,this._input.size),l=n.call(l,this._start,v)),s.readAsText(l,this._config.encoding));d||this._chunkLoaded({target:{result:v}})},this._chunkLoaded=function(l){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(l.target.result)},this._chunkError=function(){this._sendError(s.error)}}function g(t){var s;u.call(this,t=t||{}),this.stream=function(n){return s=n,this._nextChunk()},this._nextChunk=function(){var n,d;if(!this._finished)return n=this._config.chunkSize,s=n?(d=s.substring(0,n),s.substring(n)):(d=s,""),this._finished=!s,this.parseChunk(d)}}function K(t){u.call(this,t=t||{});var s=[],n=!0,d=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(l){this._input=l,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):n=!0},this._streamData=se(function(l){try{s.push(typeof l=="string"?l:l.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(v){this._streamError(v)}},this),this._streamError=se(function(l){this._streamCleanUp(),this._sendError(l)},this),this._streamEnd=se(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(t){var s,n,d,l,v=Math.pow(2,53),B=-v,O=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,P=this,z=0,_=0,ae=!1,k=!1,F=[],y={data:[],errors:[],meta:{}};function J(L){return t.skipEmptyLines==="greedy"?L.join("").trim()==="":L.length===1&&L[0].length===0}function Q(){if(y&&d&&(de("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),d=!1),t.skipEmptyLines&&(y.data=y.data.filter(function(C){return!J(C)})),ee()){let C=function(V,X){D(t.transformHeader)&&(V=t.transformHeader(V,X)),F.push(V)};if(y)if(Array.isArray(y.data[0])){for(var L=0;ee()&&L<y.data.length;L++)y.data[L].forEach(C);y.data.splice(0,1)}else y.data.forEach(C)}function $(C,V){for(var X=t.header?{}:[],U=0;U<C.length;U++){var H=U,A=C[U],A=((ue,T)=>(W=>(t.dynamicTypingFunction&&t.dynamicTyping[W]===void 0&&(t.dynamicTyping[W]=t.dynamicTypingFunction(W)),(t.dynamicTyping[W]||t.dynamicTyping)===!0))(ue)?T==="true"||T==="TRUE"||T!=="false"&&T!=="FALSE"&&((W=>{if(O.test(W)&&(W=parseFloat(W),B<W&&W<v))return 1})(T)?parseFloat(T):ie.test(T)?new Date(T):T===""?null:T):T)(H=t.header?U>=F.length?"__parsed_extra":F[U]:H,A=t.transform?t.transform(A,H):A);H==="__parsed_extra"?(X[H]=X[H]||[],X[H].push(A)):X[H]=A}return t.header&&(U>F.length?de("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+U,_+V):U<F.length&&de("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+U,_+V)),X}var q;y&&(t.header||t.dynamicTyping||t.transform)&&(q=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map($),q=y.data.length):y.data=$(y.data,0),t.header&&y.meta&&(y.meta.fields=F),_+=q)}function ee(){return t.header&&F.length===0}function de(L,$,q,C){L={type:L,code:$,message:q},C!==void 0&&(L.row=C),y.errors.push(L)}D(t.step)&&(l=t.step,t.step=function(L){y=L,ee()?Q():(Q(),y.data.length!==0&&(z+=L.data.length,t.preview&&z>t.preview?n.abort():(y.data=y.data[0],l(y,P))))}),this.parse=function(L,$,q){var C=t.quoteChar||'"',C=(t.newline||(t.newline=this.guessLineEndings(L,C)),d=!1,t.delimiter?D(t.delimiter)&&(t.delimiter=t.delimiter(L),y.meta.delimiter=t.delimiter):((C=((V,X,U,H,A)=>{var ue,T,W,ye;A=A||[",","	","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var Ne=0;Ne<A.length;Ne++){for(var pe,Re=A[Ne],re=0,fe=0,Z=0,le=(W=void 0,new I({comments:H,delimiter:Re,newline:X,preview:10}).parse(V)),ge=0;ge<le.data.length;ge++)U&&J(le.data[ge])?Z++:(pe=le.data[ge].length,fe+=pe,W===void 0?W=pe:0<pe&&(re+=Math.abs(pe-W),W=pe));0<le.data.length&&(fe/=le.data.length-Z),(T===void 0||re<=T)&&(ye===void 0||ye<fe)&&1.99<fe&&(T=re,ue=Re,ye=fe)}return{successful:!!(t.delimiter=ue),bestDelimiter:ue}})(L,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=C.bestDelimiter:(d=!0,t.delimiter=i.DefaultDelimiter),y.meta.delimiter=t.delimiter),Y(t));return t.preview&&t.header&&C.preview++,s=L,n=new I(C),y=n.parse(s,$,q),Q(),ae?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return ae},this.pause=function(){ae=!0,n.abort(),s=D(t.chunk)?"":s.substring(n.getCharIndex())},this.resume=function(){P.streamer._halted?(ae=!1,P.streamer.parseChunk(s,!0)):setTimeout(P.resume,3)},this.aborted=function(){return k},this.abort=function(){k=!0,n.abort(),y.meta.aborted=!0,D(t.complete)&&t.complete(y),s=""},this.guessLineEndings=function(V,C){V=V.substring(0,1048576);var C=new RegExp(p(C)+"([^]*?)"+p(C),"gm"),q=(V=V.replace(C,"")).split("\r"),C=V.split(`
`),V=1<C.length&&C[0].length<q[0].length;if(q.length===1||V)return`
`;for(var X=0,U=0;U<q.length;U++)q[U][0]===`
`&&X++;return X>=q.length/2?`\r
`:"\r"}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I(t){var s=(t=t||{}).delimiter,n=t.newline,d=t.comments,l=t.step,v=t.preview,B=t.fastMode,O=null,ie=!1,P=t.quoteChar==null?'"':t.quoteChar,z=P;if(t.escapeChar!==void 0&&(z=t.escapeChar),(typeof s!="string"||-1<i.BAD_DELIMITERS.indexOf(s))&&(s=","),d===s)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<i.BAD_DELIMITERS.indexOf(d))&&(d=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var _=0,ae=!1;this.parse=function(k,F,y){if(typeof k!="string")throw new Error("Input must be a string");var J=k.length,Q=s.length,ee=n.length,de=d.length,L=D(l),$=[],q=[],C=[],V=_=0;if(!k)return re();if(B||B!==!1&&k.indexOf(P)===-1){for(var X=k.split(n),U=0;U<X.length;U++){if(C=X[U],_+=C.length,U!==X.length-1)_+=n.length;else if(y)return re();if(!d||C.substring(0,de)!==d){if(L){if($=[],ye(C.split(s)),fe(),ae)return re()}else ye(C.split(s));if(v&&v<=U)return $=$.slice(0,v),re(!0)}}return re()}for(var H=k.indexOf(s,_),A=k.indexOf(n,_),ue=new RegExp(p(z)+p(P),"g"),T=k.indexOf(P,_);;)if(k[_]===P)for(T=_,_++;;){if((T=k.indexOf(P,T+1))===-1)return y||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:$.length,index:_}),pe();if(T===J-1)return pe(k.substring(_,T).replace(ue,P));if(P===z&&k[T+1]===z)T++;else if(P===z||T===0||k[T-1]!==z){H!==-1&&H<T+1&&(H=k.indexOf(s,T+1));var W=Ne((A=A!==-1&&A<T+1?k.indexOf(n,T+1):A)===-1?H:Math.min(H,A));if(k.substr(T+1+W,Q)===s){C.push(k.substring(_,T).replace(ue,P)),k[_=T+1+W+Q]!==P&&(T=k.indexOf(P,_)),H=k.indexOf(s,_),A=k.indexOf(n,_);break}if(W=Ne(A),k.substring(T+1+W,T+1+W+ee)===n){if(C.push(k.substring(_,T).replace(ue,P)),Re(T+1+W+ee),H=k.indexOf(s,_),T=k.indexOf(P,_),L&&(fe(),ae))return re();if(v&&$.length>=v)return re(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:$.length,index:_}),T++}}else if(d&&C.length===0&&k.substring(_,_+de)===d){if(A===-1)return re();_=A+ee,A=k.indexOf(n,_),H=k.indexOf(s,_)}else if(H!==-1&&(H<A||A===-1))C.push(k.substring(_,H)),_=H+Q,H=k.indexOf(s,_);else{if(A===-1)break;if(C.push(k.substring(_,A)),Re(A+ee),L&&(fe(),ae))return re();if(v&&$.length>=v)return re(!0)}return pe();function ye(Z){$.push(Z),V=_}function Ne(Z){var le=0;return le=Z!==-1&&(Z=k.substring(T+1,Z))&&Z.trim()===""?Z.length:le}function pe(Z){return y||(Z===void 0&&(Z=k.substring(_)),C.push(Z),_=J,ye(C),L&&fe()),re()}function Re(Z){_=Z,ye(C),C=[],A=k.indexOf(n,_)}function re(Z){if(t.header&&!F&&$.length&&!ie){var le=$[0],ge=Object.create(null),He=new Set(le);let st=!1;for(let _e=0;_e<le.length;_e++){let xe=le[_e];if(ge[xe=D(t.transformHeader)?t.transformHeader(xe,_e):xe]){let Ee,at=ge[xe];for(;Ee=xe+"_"+at,at++,He.has(Ee););He.add(Ee),le[_e]=Ee,ge[xe]++,st=!0,(O=O===null?{}:O)[Ee]=xe}else ge[xe]=1,le[_e]=xe;He.add(xe)}st&&console.warn("Duplicate headers found and renamed."),ie=!0}return{data:$,errors:q,meta:{delimiter:s,linebreak:n,aborted:ae,truncated:!!Z,cursor:V+(F||0),renamedHeaders:O}}}function fe(){l(re()),$=[],q=[]}},this.abort=function(){ae=!0},this.getCharIndex=function(){return _}}function m(t){var s=t.data,n=N[s.workerId],d=!1;if(s.error)n.userError(s.error,s.file);else if(s.results&&s.results.data){var l={abort:function(){d=!0,R(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(D(n.userStep)){for(var v=0;v<s.results.data.length&&(n.userStep({data:s.results.data[v],errors:s.results.errors,meta:s.results.meta},l),!d);v++);delete s.results}else D(n.userChunk)&&(n.userChunk(s.results,l,s.file),delete s.results)}s.finished&&!d&&R(s.workerId,s.results)}function R(t,s){var n=N[t];D(n.userComplete)&&n.userComplete(s),n.terminate(),delete N[t]}function ce(){throw new Error("Not implemented.")}function Y(t){if(typeof t!="object"||t===null)return t;var s,n=Array.isArray(t)?[]:{};for(s in t)n[s]=Y(t[s]);return n}function se(t,s){return function(){t.apply(s,arguments)}}function D(t){return typeof t=="function"}return i.parse=function(t,s){var n=(s=s||{}).dynamicTyping||!1;if(D(n)&&(s.dynamicTypingFunction=n,n={}),s.dynamicTyping=n,s.transform=!!D(s.transform)&&s.transform,!s.worker||!i.WORKERS_SUPPORTED)return n=null,i.NODE_STREAM_INPUT,typeof t=="string"?(t=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(t),n=new(s.download?M:g)(s)):t.readable===!0&&D(t.read)&&D(t.on)?n=new K(s):(o.File&&t instanceof File||t instanceof Object)&&(n=new b(s)),n.stream(t);(n=(()=>{var d;return!!i.WORKERS_SUPPORTED&&(d=(()=>{var l=o.URL||o.webkitURL||null,v=c.toString();return i.BLOB_URL||(i.BLOB_URL=l.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",v,")();"],{type:"text/javascript"})))})(),(d=new o.Worker(d)).onmessage=m,d.id=j++,N[d.id]=d)})()).userStep=s.step,n.userChunk=s.chunk,n.userComplete=s.complete,n.userError=s.error,s.step=D(s.step),s.chunk=D(s.chunk),s.complete=D(s.complete),s.error=D(s.error),delete s.worker,n.postMessage({input:t,config:s,workerId:n.id})},i.unparse=function(t,s){var n=!1,d=!0,l=",",v=`\r
`,B='"',O=B+B,ie=!1,P=null,z=!1,_=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||i.BAD_DELIMITERS.filter(function(F){return s.delimiter.indexOf(F)!==-1}).length||(l=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(n=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(ie=s.skipEmptyLines),typeof s.newline=="string"&&(v=s.newline),typeof s.quoteChar=="string"&&(B=s.quoteChar),typeof s.header=="boolean"&&(d=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");P=s.columns}s.escapeChar!==void 0&&(O=s.escapeChar+B),s.escapeFormulae instanceof RegExp?z=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(z=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(B),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return ae(null,t,ie);if(typeof t[0]=="object")return ae(P||Object.keys(t[0]),t,ie)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||P),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),ae(t.fields||[],t.data||[],ie);throw new Error("Unable to serialize unrecognized input");function ae(F,y,J){var Q="",ee=(typeof F=="string"&&(F=JSON.parse(F)),typeof y=="string"&&(y=JSON.parse(y)),Array.isArray(F)&&0<F.length),de=!Array.isArray(y[0]);if(ee&&d){for(var L=0;L<F.length;L++)0<L&&(Q+=l),Q+=k(F[L],L);0<y.length&&(Q+=v)}for(var $=0;$<y.length;$++){var q=(ee?F:y[$]).length,C=!1,V=ee?Object.keys(y[$]).length===0:y[$].length===0;if(J&&!ee&&(C=J==="greedy"?y[$].join("").trim()==="":y[$].length===1&&y[$][0].length===0),J==="greedy"&&ee){for(var X=[],U=0;U<q;U++){var H=de?F[U]:U;X.push(y[$][H])}C=X.join("").trim()===""}if(!C){for(var A=0;A<q;A++){0<A&&!V&&(Q+=l);var ue=ee&&de?F[A]:A;Q+=k(y[$][ue],A)}$<y.length-1&&(!J||0<q&&!V)&&(Q+=v)}}return Q}function k(F,y){var J,Q;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(Q=!1,z&&typeof F=="string"&&z.test(F)&&(F="'"+F,Q=!0),J=F.toString().replace(_,O),(Q=Q||n===!0||typeof n=="function"&&n(F,y)||Array.isArray(n)&&n[y]||((ee,de)=>{for(var L=0;L<de.length;L++)if(-1<ee.indexOf(de[L]))return!0;return!1})(J,i.BAD_DELIMITERS)||-1<J.indexOf(l)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?B+J+B:J)}},i.RECORD_SEP="",i.UNIT_SEP="",i.BYTE_ORDER_MARK="\uFEFF",i.BAD_DELIMITERS=["\r",`
`,'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!h&&!!o.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=I,i.ParserHandle=E,i.NetworkStreamer=M,i.FileStreamer=b,i.StringStreamer=g,i.ReadableStreamStreamer=K,o.jQuery&&((f=o.jQuery).fn.parse=function(t){var s=t.config||{},n=[];return this.each(function(v){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)n.push({file:this.files[B],inputElem:this,instanceConfig:f.extend({},s)})}),d(),this;function d(){if(n.length===0)D(t.complete)&&t.complete();else{var v,B,O,ie,P=n[0];if(D(t.before)){var z=t.before(P.file,P.inputElem);if(typeof z=="object"){if(z.action==="abort")return v="AbortError",B=P.file,O=P.inputElem,ie=z.reason,void(D(t.error)&&t.error({name:v},B,O,ie));if(z.action==="skip")return void l();typeof z.config=="object"&&(P.instanceConfig=f.extend(P.instanceConfig,z.config))}else if(z==="skip")return void l()}var _=P.instanceConfig.complete;P.instanceConfig.complete=function(ae){D(_)&&_(ae,P.file,P.inputElem),l()},i.parse(P.file,P.instanceConfig)}}function l(){n.splice(0,1),d()}}),r&&(o.onmessage=function(t){t=t.data,i.WORKER_ID===void 0&&t&&(i.WORKER_ID=t.workerId),typeof t.input=="string"?o.postMessage({workerId:i.WORKER_ID,results:i.parse(t.input,t.config),finished:!0}):(o.File&&t.input instanceof File||t.input instanceof Object)&&(t=i.parse(t.input,t.config))&&o.postMessage({workerId:i.WORKER_ID,results:t,finished:!0})}),(M.prototype=Object.create(u.prototype)).constructor=M,(b.prototype=Object.create(u.prototype)).constructor=b,(g.prototype=Object.create(g.prototype)).constructor=g,(K.prototype=Object.create(u.prototype)).constructor=K,i})})(Zt);const es=()=>{const a=Be(),[w,c]=x.useState([]),[o,f]=x.useState(!0),{chapterData:h}=Me(),r=new URLSearchParams(a.search),[N,j]=x.useState(null),i=r.get("rows")||5,u=r.get("page")||1,[M,b]=x.useState(!1),[g,K]=x.useState(null),[E,p]=x.useState(null),I=ct.map(({accessorKey:t,header:s})=>({label:s().props.children,key:t})),[m,R]=x.useState(I.map(({label:t})=>t));x.useEffect(()=>{console.log("helo"),h&&ce()},[h,i,u,a.search]);const ce=()=>{h.chapterId&&(console.log("helo 2"),oe.get(`/api/report/${h.chapterId}/member-transactions-report?rows=${i}&page=${u}  `,{params:{chapterId:h.chapterId,rows:i,page:u}}).then(t=>{c(t.data.data),j(t.data.totalRecords),f(!1)}).catch(t=>{console.error("Error fetching reports:",t),f(!1)}))},Y=t=>{R(s=>s.includes(t)?s.filter(n=>n!==t):[...s,t])},se=async()=>{const t=I.filter(({label:s})=>m.includes(s)).map(({key:s})=>s);try{const s=await oe.post(`/api/report/${h.chapterId}/member-transactions-report/export`,{startDate:g,endDate:E,type:"excel",selectedColumns:t,chapterId:h.chapterId},{responseType:"blob"}),n=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(n),l=document.createElement("a");l.href=d,l.setAttribute("download",`Member Transactions Report ${me(new Date(g),"dd/MM/yyyy")} - ${me(new Date(E),"dd/MM/yyyy")}.xlsx`),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(d),he.success("Excel file downloaded successfully.")}catch(s){console.error("Error exporting Excel:",s),he.error("Failed to export Excel. Please try again later.")}},D=async()=>{var n,d;b(!1);const t=I.filter(({label:l})=>m.includes(l)).map(({key:l})=>l),s={startDate:g,endDate:E,type:"pdf",selectedColumns:t,chapterId:h.chapterId};try{const l=await oe.post(`/api/report/${h.chapterId}/member-transactions-report/export`,s,{responseType:"blob"}),v=new Blob([l.data],{type:"application/pdf"}),B=window.URL.createObjectURL(v),O=document.createElement("a");O.href=B,O.setAttribute("download",`Member Transactions Report ${me(new Date(g),"dd/MM/yyyy")} - ${me(new Date(E),"dd/MM/yyyy")}.pdf`),document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(B),he.success("PDF file downloaded successfully.")}catch(l){console.error("Error exporting PDF:",l),he.error(((d=(n=l.response)==null?void 0:n.data)==null?void 0:d.error)||"Failed to export PDF")}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Member Transactions Report"}),e.jsxs("div",{className:"mb-4 p-4 border rounded-md bg-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select Columns to Export"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:I.map(({label:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{checked:m.includes(t),onCheckedChange:()=>Y(t)}),e.jsx("label",{className:"text-sm",children:t})]},t))})]}),e.jsx("div",{className:"flex gap-4 mb-4",children:e.jsxs(Mt,{open:M,onOpenChange:b,children:[e.jsx(Ot,{asChild:!0,children:e.jsx(te,{className:"bg-blue-600 text-white",children:"Export"})}),e.jsxs(Dt,{children:[e.jsx($t,{children:e.jsx(Ut,{children:"Export Options"})}),e.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"fromDate",children:"From Date"}),e.jsxs(Ge,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(te,{variant:"outline",className:rt("w-full justify-start text-left font-normal",!g&&"text-muted-foreground"),children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),g?me(new Date(g),"PPP"):"Pick a date"]})}),e.jsx(Ye,{className:"w-auto p-0",children:e.jsx(Je,{mode:"single",selected:g,onSelect:K,initialFocus:!0,disabled:t=>t>new Date})})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"toDate",children:"To Date"}),e.jsxs(Ge,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(te,{variant:"outline",className:rt("w-full justify-start text-left font-normal",!E&&"text-muted-foreground"),children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),E?me(new Date(E),"PPP"):"Pick a date"]})}),e.jsx(Ye,{className:"w-auto p-0",children:e.jsx(Je,{mode:"single",selected:E,onSelect:p,initialFocus:!0,disabled:t=>t>new Date})})]})]})]}),e.jsxs(Bt,{className:"flex justify-between gap-2",children:[e.jsx(te,{onClick:D,className:"bg-red-500 text-white",disabled:!g||!E,children:"Export PDF"}),e.jsx(te,{onClick:()=>{b(!1),se()},className:"bg-green-700 text-white",disabled:!g||!E,children:"Export Excel"})]})]})]})}),o?e.jsx("p",{className:"text-gray-600",children:"Loading..."}):w.length===0?e.jsx("p",{className:"text-gray-600",children:"No reports available."}):e.jsx(Xt,{data:w,columns:ct,searchInputField:"firstName",totalRecord:N,pagination:{pageSize:i,pageIndex:u},state:{pagination:{pageSize:i,pageIndex:u}}})]})},ts=()=>{const{chapterData:a}=Me(),{downloadFromResponse:w}=tt(),[c,o]=x.useState(new Date),[f,h]=x.useState(!1),[r,N]=x.useState(null),[j,i]=x.useState(!1),[u,M]=x.useState(null),[b,g]=x.useState(!1),K=async()=>{try{i(!0),M(null);const p=me(c,"yyyy-MM-dd"),I=await oe.get(`/api/report/${a==null?void 0:a.chapterId}/receiver-daywise-json-report`,{params:{date:p}});N(I.data)}catch(p){M(p.message||"An unknown error occurred"),he.error("Error fetching data")}finally{i(!1)}},E=async()=>{g(!0);try{const p=me(c,"yyyy-MM-dd"),I=await oe.get(`/api/report/${a==null?void 0:a.chapterId}/receiver-daywise-report`,{params:{date:p},responseType:"blob"}),m=`ReceiverDaywiseReport-${p}.xlsx`;await w(I,m,{showSuccessToast:!0,allowShare:!0})}catch(p){console.error("Error exporting data:",p)}finally{g(!1)}};return x.useEffect(()=>{a!=null&&a.chapterId&&K()},[c,a]),e.jsxs("div",{className:"flex flex-col gap-4 mt-5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Ge,{open:f,onOpenChange:h,children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(te,{variant:"outline",className:"w-[200px] justify-start text-left font-normal",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),c?me(c,"PPP"):e.jsx("span",{children:"Select date"})]})}),e.jsx(Ye,{className:"w-auto p-0",children:e.jsx(Je,{mode:"single",selected:c,onSelect:p=>{o(p||new Date),h(!1)},disabled:p=>p>new Date})})]}),e.jsx(te,{onClick:E,disabled:b||(r==null?void 0:r.data.transactions.length)===0,children:b?"Exporting...":"Export Data"})]}),j&&e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((p,I)=>e.jsxs(De,{children:[e.jsx(ze,{children:e.jsx(Te,{className:"h-6 w-[200px]"})}),e.jsx(We,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Te,{className:"h-4 w-full"}),e.jsx(Te,{className:"h-4 w-full"}),e.jsx(Te,{className:"h-4 w-full"})]})})]},I))}),u&&e.jsxs("div",{className:"text-red-500",children:["Error: ",u]}),r&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Transaction Report for ",r==null?void 0:r.data.date]}),(r==null?void 0:r.data.transactions.length)===0&&e.jsx("div",{className:"text-center text-lg font-semibold text-gray-500",children:"No transactions found for the selected date."}),r==null?void 0:r.data.transactions.map((p,I)=>e.jsxs(De,{children:[e.jsx(ze,{children:e.jsxs(nt,{children:[p.receiverName," (",p.paymentType,")"]})}),e.jsx(We,{children:e.jsxs(Fe,{children:[e.jsx(Le,{children:e.jsxs(ne,{children:[e.jsx(G,{children:"Sr No"}),e.jsx(G,{children:"Receiver Name"}),e.jsx(G,{children:"Member Name"}),e.jsx(G,{children:"Payment Type"}),e.jsx(G,{children:"Paid Amount"}),e.jsx(G,{children:"Receiver Fee"}),e.jsx(G,{children:"Platform Fee"}),e.jsx(G,{children:"Penalty Amount"}),e.jsx(G,{children:"Discount Amount"}),e.jsx(G,{children:"Status"})]})}),e.jsxs(Ae,{children:[p.data.map((m,R)=>e.jsxs(ne,{children:[e.jsx(S,{children:R+1}),e.jsx(S,{children:p.receiverName}),e.jsx(S,{children:m.membername}),e.jsx(S,{children:m.paymentType}),e.jsx(S,{children:m.paidAmount}),e.jsx(S,{children:m.receiverFee}),e.jsx(S,{children:m.platformFee}),e.jsx(S,{children:m.penaltyAmount}),e.jsx(S,{children:m.discountAmount}),e.jsx(S,{children:m.status})]},m.memberid)),e.jsxs(ne,{className:"font-bold bg-muted/50",children:[e.jsx(S,{colSpan:3,children:"Total:"}),e.jsx(S,{children:p.paymentType}),e.jsx(S,{children:p.totals.amountPaid}),e.jsx(S,{children:p.totals.receiverFee}),e.jsx(S,{children:p.totals.platformFee}),e.jsx(S,{children:p.totals.penaltyAmount}),e.jsx(S,{children:p.totals.discountAmount}),e.jsx(S,{})]})]})]})})]},`${p.receiverName}-${p.paymentType}-${I}`)),(r==null?void 0:r.data.transactions.length)>0&&e.jsxs(De,{children:[e.jsx(ze,{children:e.jsx(nt,{children:"Grand Totals"})}),e.jsx(We,{children:e.jsxs(Fe,{children:[e.jsx(Le,{children:e.jsxs(ne,{children:[e.jsx(G,{children:"Payment Type"}),e.jsx(G,{children:"Paid Amount"}),e.jsx(G,{children:"Receiver Fee"}),e.jsx(G,{children:"Platform Fee"}),e.jsx(G,{children:"Penalty Amount"}),e.jsx(G,{children:"Discount Amount"})]})}),e.jsxs(Ae,{children:[e.jsxs(ne,{children:[e.jsx(S,{children:"Cash"}),e.jsx(S,{children:r==null?void 0:r.data.totals.cash.amountPaid}),e.jsx(S,{children:r==null?void 0:r.data.totals.cash.receiverFee}),e.jsx(S,{children:r==null?void 0:r.data.totals.cash.platformFee}),e.jsx(S,{children:r==null?void 0:r.data.totals.cash.penaltyAmount}),e.jsx(S,{children:r==null?void 0:r.data.totals.cash.discountAmount})]}),e.jsxs(ne,{children:[e.jsx(S,{children:"Online"}),e.jsx(S,{children:r==null?void 0:r.data.totals.online.amountPaid}),e.jsx(S,{children:r==null?void 0:r.data.totals.online.receiverFee}),e.jsx(S,{children:r==null?void 0:r.data.totals.online.platformFee}),e.jsx(S,{children:r==null?void 0:r.data.totals.online.penaltyAmount}),e.jsx(S,{children:r==null?void 0:r.data.totals.online.discountAmount})]}),e.jsxs(ne,{className:"font-bold bg-muted/50",children:[e.jsx(S,{children:"Grand Total"}),e.jsx(S,{children:r==null?void 0:r.data.totals.grand.amountPaid}),e.jsx(S,{children:r==null?void 0:r.data.totals.grand.receiverFee}),e.jsx(S,{children:r==null?void 0:r.data.totals.grand.platformFee}),e.jsx(S,{children:r==null?void 0:r.data.totals.grand.penaltyAmount}),e.jsx(S,{children:r==null?void 0:r.data.totals.grand.discountAmount})]})]})]})})]})]})]})};var ss={exports:{}};(function(a,w){(function(c,o){o()})(Ce,function(){function c(i,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}function o(i,u,M){var b=new XMLHttpRequest;b.open("GET",i),b.responseType="blob",b.onload=function(){j(b.response,u,M)},b.onerror=function(){console.error("could not download file")},b.send()}function f(i){var u=new XMLHttpRequest;u.open("HEAD",i,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function h(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(u)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ce=="object"&&Ce.global===Ce?Ce:void 0,N=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),j=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!N?function(i,u,M){var b=r.URL||r.webkitURL,g=document.createElement("a");u=u||i.name||"download",g.download=u,g.rel="noopener",typeof i=="string"?(g.href=i,g.origin===location.origin?h(g):f(g.href)?o(i,u,M):h(g,g.target="_blank")):(g.href=b.createObjectURL(i),setTimeout(function(){b.revokeObjectURL(g.href)},4e4),setTimeout(function(){h(g)},0))}:"msSaveOrOpenBlob"in navigator?function(i,u,M){if(u=u||i.name||"download",typeof i!="string")navigator.msSaveOrOpenBlob(c(i,M),u);else if(f(i))o(i,u,M);else{var b=document.createElement("a");b.href=i,b.target="_blank",setTimeout(function(){h(b)})}}:function(i,u,M,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof i=="string")return o(i,u,M);var g=i.type==="application/octet-stream",K=/constructor/i.test(r.HTMLElement)||r.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||g&&K||N)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var R=p.result;R=E?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=R:location=R,b=null},p.readAsDataURL(i)}else{var I=r.URL||r.webkitURL,m=I.createObjectURL(i);b?b.location=m:location.href=m,b=null,setTimeout(function(){I.revokeObjectURL(m)},4e4)}});r.saveAs=j.saveAs=j,a.exports=j})})(ss);const as=[{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"3monthly",label:"3 Monthly"}],rs=()=>{const{chapterData:a}=Me(),{downloadFromResponse:w}=tt(),[c,o]=x.useState([]),[f,h]=x.useState(""),[r,N]=x.useState("monthly"),[j,i]=x.useState(null),[u,M]=x.useState(!1),[b,g]=x.useState(!1),[K,E]=x.useState(""),[p,I]=x.useState(!1),[m,R]=x.useState(""),[ce,Y]=x.useState("");x.useEffect(()=>{a!=null&&a.chapterId&&oe.get(`/api/term/chapter/${a.chapterId}`).then(t=>o(t.data)).catch(()=>o([]))},[a]),x.useEffect(()=>{if(!(a!=null&&a.chapterId)||!f&&!p)return;M(!0);const t={period:r,...f&&!p?{termId:f}:{},...p?{startDate:m,endDate:ce}:{}};oe.get(`/api/report/${a.chapterId}/member-payment-summary-report`,{params:t}).then(s=>i(s.data)).catch(()=>i(null)).finally(()=>M(!1))},[a,f,r,p,m,ce]);const se=j==null?void 0:j.members.map((t,s)=>({...t,idx:s})).filter(t=>t.name.toLowerCase().includes(K.toLowerCase())),D=async()=>{g(!0);try{const t={period:r,...f&&!p?{termId:f}:{},...p?{startDate:m,endDate:ce}:{}},s=await oe.get(`/api/report/${a.chapterId}/member-payment-summary-report/export`,{params:t,responseType:"blob"});await w(s,"Member_Payment_Summary_Report.xlsx",{showSuccessToast:!0,allowShare:!0})}catch(t){console.error("Error exporting data:",t)}finally{g(!1)}};return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:"Member Payment Summary Report"}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 items-center",children:[e.jsxs(we,{value:f,onValueChange:h,disabled:p,children:[e.jsx(je,{className:"w-[180px]",children:e.jsx(be,{placeholder:"Select Term"})}),e.jsx(ve,{children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:"Term"}),c.map(t=>e.jsx(Se,{value:t.termId||t.id,children:t.termName||t.name||t.termId},t.termId||t.id))]})})]}),e.jsxs(we,{value:r,onValueChange:N,children:[e.jsx(je,{className:"w-[180px]",children:e.jsx(be,{placeholder:"Select Period"})}),e.jsx(ve,{children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:"Period"}),as.map(t=>e.jsx(Se,{value:t.value,children:t.label},t.value))]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{htmlFor:"customRange",children:"Custom Date?"}),e.jsx(Ht,{id:"customRange",checked:p,onCheckedChange:I})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{type:"date",value:m,onChange:t=>R(t.target.value)}),e.jsx(Ke,{type:"date",value:ce,onChange:t=>Y(t.target.value)})]}),j&&j.periodLabels&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx(te,{variant:"outline",onClick:D,disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"animate-spin w-4 h-4 mr-2 inline"})," ","Exporting..."]}):"Export to Excel"})})]}),e.jsx(Ke,{type:"text",placeholder:"Search member...",value:K,onChange:t=>E(t.target.value),className:"w-full max-w-md"}),u?e.jsxs("div",{className:"flex justify-center items-center py-16 text-muted-foreground",children:[e.jsx(it,{className:"animate-spin w-6 h-6 mr-2"}),"Loading report..."]}):j&&j.periodLabels?e.jsxs(De,{className:"overflow-auto p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Total Transactions (",j.period,")"]}),e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(Fe,{className:"text-sm",children:[e.jsx(Le,{children:e.jsxs(ne,{children:[e.jsx(G,{children:"Member"}),j.periodLabels.map((t,s)=>{var n;return e.jsx(G,{className:"text-right",children:t.includes("-")?t:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{children:t}),e.jsx("span",{className:"text-xs text-gray-400",children:((n=j.periodDates)==null?void 0:n[s])&&`(${me(new Date(j.periodDates[s].start),"d MMM")} - ${me(new Date(j.periodDates[s].end),"d MMM")})`})]})},s)}),e.jsx(G,{className:"text-right font-bold",children:"Total"})]})}),e.jsxs(Ae,{children:[(se??[]).map(({memberId:t,name:s,idx:n})=>e.jsxs(ne,{children:[e.jsx(S,{className:"font-medium",children:s}),j.matrix[n].map((d,l)=>e.jsxs(S,{className:"text-right",children:["₹",d]},l)),e.jsxs(S,{className:"text-right font-bold",children:["₹",j.totals[n]]})]},t)),!K&&e.jsxs(ne,{className:"bg-muted/40 font-semibold",children:[e.jsx(S,{children:"Grand Total"}),j.periodLabels.map((t,s)=>{const n=j.matrix.reduce((d,l)=>d+(l[s]||0),0);return e.jsxs(S,{className:"text-right",children:["₹",n]},s)}),e.jsxs(S,{className:"text-right text-primary",children:["₹",j.grandTotal]})]})]})]})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data to display. Please select a term or date range and period."})]})},dt=[{label:"Member Wise Report",reports:[{value:"member_due_summary",label:"Member Due Summary Report",component:Kt},{value:"member_ledger",label:"Member Ledger",component:Yt},{value:"member_payment_summary_report",label:"Member Payment Summary Report",component:rs}]},{label:"Chapter Report",reports:[{value:"all_transactions",label:"All Transactions",component:es},{value:"receiver_daywise_report",label:"Receiver Daily Report",component:ts}]}],ns=()=>{const[a,w]=vt();et();const c=a.get("type")||"",o=r=>{w({type:r})},h=dt.flatMap(r=>r.reports).find(r=>r.value===c);return e.jsxs(e.Fragment,{children:[e.jsx(St,{items:[{name:"Reports"}]}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white p-3 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-lg font-medium dark:text-white",children:"View Your Chapter's Reports"})}),e.jsx("div",{children:e.jsxs(we,{value:c,onValueChange:o,className:"w-full",children:[e.jsx(je,{className:"w-[280px]",children:e.jsx(be,{placeholder:"Select a report type you want to view"})}),e.jsx(ve,{children:dt.map(r=>e.jsxs(Pe,{children:[e.jsx(Ie,{children:r.label}),r.reports.map(N=>e.jsx(Se,{value:N.value,children:N.label},N.value))]},r.label))})]})}),h&&e.jsx(h.component,{})]})]})},ks=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"}));export{Ze as E,ks as R};
