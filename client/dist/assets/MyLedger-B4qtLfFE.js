import{g as x,r as s,c as a,j as r,B as b,Q as n}from"./index-eKwCJLll.js";import{B as f}from"./Breadcrumb-kGt-xtkX.js";import{S as h}from"./skeleton-BVvV9rTW.js";import{A as j,b as k,a as E}from"./alert-DPpgLttX.js";import{M as L,a as w}from"./MemberLedgerReportcolumn-D_5kwi3n.js";import"./chevron-right-B55Ri9eq.js";import"./usePagination-CgXDuylC.js";import"./table-B33a0yXU.js";import"./select-D6qXgB-2.js";import"./index-BdQq_4o_.js";import"./index-p0A_8czo.js";import"./index-DBSIu3jP.js";import"./index-Bn6wwOXp.js";import"./index-D9_AVXgF.js";import"./index-Irvr_6j-.js";import"./index-DCu9mJZ4.js";import"./index-CzuTh-Sf.js";import"./chevron-down-G1SJ-oEn.js";import"./format-SmSpYad1.js";const y=()=>{const{chapterData:e}=x(),[m,l]=s.useState([]),[p,d]=s.useState(!0),[i,c]=s.useState(null);s.useEffect(()=>{!e||!(e!=null&&e.chapterId)||a.get(`/api/report/${e==null?void 0:e.chapterId}/member-ledger-json`).then(t=>{l(t.data),d(!1)}).catch(t=>{c("Failed to load ledger data"),d(!1)})},[e==null?void 0:e.chapterId,a]);const g=async()=>{try{const t=await a.get(`/api/report/${e==null?void 0:e.chapterId}/member-ledger`,{responseType:"blob"});if(t.status!==200){n.error("Error exporting data");return}n.success("Data exported successfully");const u=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=u,o.setAttribute("download",` - ${new Date().toLocaleString()} - Member Ledger.xlsx`),document.body.appendChild(o),o.click(),o.remove()}catch(t){n.error("Error exporting data"),console.error("Error exporting data:",t)}};return r.jsxs("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[i&&r.jsxs(j,{variant:"destructive",children:[r.jsx(k,{children:"Error"}),r.jsx(E,{children:i})]}),r.jsx(b,{onClick:g,children:"Export Data"}),p?r.jsx(h,{className:"h-10 w-full mb-4"}):r.jsx(L,{data:m,columns:w,searchInputField:"firstName",totalRecord:0,pagination:{pageSize:10,pageIndex:0},state:{pagination:{pageSize:10,pageIndex:0}}})]})},H=()=>r.jsxs(r.Fragment,{children:[r.jsx(f,{items:[{name:"Dashboard",link:"/member"},{name:"My Ledger",link:"/member/my-ledger"}]}),r.jsx(y,{})]});export{H as default};
