import{r as u,j as e,B as K,d as a,K as G,X as L}from"./index.js";import{S as j}from"./separator.js";import{B as v}from"./badge.js";import{P as O,a as W,b as R}from"./popover.js";import{C as V,a as X,b as Y,c as J,d as w,e as b,f as _}from"./command.js";import{C as y,W as $}from"./wand-sparkles.js";import{C as N}from"./chevron-down.js";import{C as I}from"./check.js";const C=G("m-1 transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110 duration-300",{variants:{variant:{default:"border-foreground/10 text-foreground bg-card hover:bg-card/80",secondary:"border-foreground/10 bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",inverted:"inverted"}},defaultVariants:{variant:"default"}}),F=u.forwardRef(({options:l,onValueChange:n,variant:f,defaultValue:S=[],placeholder:k="Select options",animation:g=0,maxCount:i=3,modalPopover:D=!1,asChild:Q=!1,className:M,...Z},P)=>{const[t,o]=u.useState(S),[A,c]=u.useState(!1),[d,T]=u.useState(!1),E=r=>{if(r.key==="Enter")c(!0);else if(r.key==="Backspace"&&!r.currentTarget.value){const s=[...t];s.pop(),o(s),n(s)}},p=r=>{const s=t.includes(r)?t.filter(m=>m!==r):[...t,r];o(s),n(s)},h=()=>{o([]),n([])},B=()=>{c(r=>!r)},z=()=>{const r=t.slice(0,i);o(r),n(r)},H=()=>{if(t.length===l.length)h();else{const r=l.map(s=>s.value);o(r),n(r)}};return e.jsxs(O,{open:A,onOpenChange:c,modal:D,children:[e.jsx(W,{asChild:!0,children:e.jsx(K,{ref:P,...Z,onClick:B,className:a("flex w-full p-1 rounded-md border min-h-10 h-auto items-center justify-between bg-inherit hover:bg-inherit [&_svg]:pointer-events-auto",M),children:t.length>0?e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center",children:[t.slice(0,i).map(r=>{const s=l.find(x=>x.value===r),m=s==null?void 0:s.icon;return e.jsxs(v,{className:a(d?"animate-bounce":"",C({variant:f})),style:{animationDuration:`${g}s`},children:[m&&e.jsx(m,{className:"h-4 w-4 mr-2"}),s==null?void 0:s.label,e.jsx(y,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:x=>{x.stopPropagation(),p(r)}})]},r)}),t.length>i&&e.jsxs(v,{className:a("bg-transparent text-foreground border-foreground/1 hover:bg-transparent",d?"animate-bounce":"",C({variant:f})),style:{animationDuration:`${g}s`},children:[`+ ${t.length-i} more`,e.jsx(y,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:r=>{r.stopPropagation(),z()}})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{className:"h-4 mx-2 cursor-pointer text-muted-foreground",onClick:r=>{r.stopPropagation(),h()}}),e.jsx(j,{orientation:"vertical",className:"flex min-h-6 h-full"}),e.jsx(N,{className:"h-4 mx-2 cursor-pointer text-muted-foreground"})]})]}):e.jsxs("div",{className:"flex items-center justify-between w-full mx-auto",children:[e.jsx("span",{className:"text-sm text-muted-foreground mx-3",children:k}),e.jsx(N,{className:"h-4 cursor-pointer text-muted-foreground mx-2"})]})})}),e.jsx(R,{className:"w-auto p-0",align:"start",onEscapeKeyDown:()=>c(!1),children:e.jsxs(V,{children:[e.jsx(X,{placeholder:"Search...",onKeyDown:E}),e.jsxs(Y,{children:[e.jsx(J,{children:"No results found."}),e.jsxs(w,{className:"h-50 overflow-y-auto w-full [&::-webkit-scrollbar]:w-3 [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-button]:bg-gray-200 [&::-webkit-scrollbar-button]:hover:bg-gray-300 [&::-webkit-scrollbar-button]:h-4 [&::-webkit-scrollbar-button]:w-3 [&::-webkit-scrollbar-button:vertical:start:decrement]:bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTggNEw0IDhIMTJMOCA0WiIgZmlsbD0iIzM3NDE1MSIvPgo8L3N2Zz4K')] [&::-webkit-scrollbar-button:vertical:end:increment]:bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQgOEw4IDEyTDEyIDhINCIgZmlsbD0iIzM3NDE1MSIvPgo8L3N2Zz4K')] [&::-webkit-scrollbar-button]:bg-no-repeat [&::-webkit-scrollbar-button]:bg-center [&::-webkit-scrollbar-corner]:bg-gray-100",children:[e.jsxs(b,{onSelect:H,className:"cursor-pointer",children:[e.jsx("div",{className:a("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",t.length===l.length?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("span",{children:"(Select All)"})]},"all"),l.map(r=>{const s=t.includes(r.value);return e.jsxs(b,{onSelect:()=>p(r.value),className:"cursor-pointer",children:[e.jsx("div",{className:a("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",s?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(I,{className:"h-4 w-4"})}),r.icon&&e.jsx(r.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.label})]},r.value)})]}),e.jsx(_,{}),e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(b,{onSelect:h,className:"flex-1 justify-center cursor-pointer",children:"Clear"}),e.jsx(j,{orientation:"vertical",className:"flex min-h-6 h-full"})]}),e.jsx(b,{onSelect:()=>c(!1),className:"flex-1 justify-center cursor-pointer max-w-full",children:"Close"})]})})]})]})}),g>0&&t.length>0&&e.jsx($,{className:a("cursor-pointer my-2 text-foreground bg-background w-3 h-3",d?"":"text-muted-foreground"),onClick:()=>T(!d)})]})});F.displayName="MultiSelect";export{F as M};
