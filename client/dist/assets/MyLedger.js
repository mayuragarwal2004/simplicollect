import{l as x,r as s,c as a,j as r,B as b,Q as n}from"./index.js";import{B as f}from"./Breadcrumb.js";import{S as h}from"./skeleton.js";import{A as j,b as k,a as E}from"./alert.js";import{M as L,a as w}from"./MemberLedgerReportcolumn.js";import"./chevron-right.js";import"./usePagination.js";import"./table.js";import"./select.js";import"./index10.js";import"./index4.js";import"./index11.js";import"./index9.js";import"./index5.js";import"./index7.js";import"./index8.js";import"./index12.js";import"./chevron-down.js";import"./format.js";const y=()=>{const{chapterData:e}=x(),[m,l]=s.useState([]),[p,d]=s.useState(!0),[i,c]=s.useState(null);s.useEffect(()=>{!e||!(e!=null&&e.chapterId)||a.get(`/api/report/${e==null?void 0:e.chapterId}/member-ledger-json`).then(t=>{l(t.data),d(!1)}).catch(t=>{c("Failed to load ledger data"),d(!1)})},[e==null?void 0:e.chapterId,a]);const u=async()=>{try{const t=await a.get(`/api/report/${e==null?void 0:e.chapterId}/member-ledger`,{responseType:"blob"});if(t.status!==200){n.error("Error exporting data");return}n.success("Data exported successfully");const g=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=g,o.setAttribute("download",` - ${new Date().toLocaleString()} - Member Ledger.xlsx`),document.body.appendChild(o),o.click(),o.remove()}catch(t){n.error("Error exporting data"),console.error("Error exporting data:",t)}};return r.jsxs("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[i&&r.jsxs(j,{variant:"destructive",children:[r.jsx(k,{children:"Error"}),r.jsx(E,{children:i})]}),r.jsx(b,{onClick:u,children:"Export Data"}),p?r.jsx(h,{className:"h-10 w-full mb-4"}):r.jsx(L,{data:m,columns:w,searchInputField:"firstName",totalRecord:0,pagination:{pageSize:10,pageIndex:0},state:{pagination:{pageSize:10,pageIndex:0}}})]})},H=()=>r.jsxs(r.Fragment,{children:[r.jsx(f,{items:[{name:"Dashboard",link:"/member"},{name:"My Ledger",link:"/member/my-ledger"}]}),r.jsx(y,{})]});export{H as default};
