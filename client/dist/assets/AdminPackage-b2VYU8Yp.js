import{j as e,B as x,r as m,n as v,t as A,v as N,w,E as S}from"./index-eKwCJLll.js";import{C as P}from"./calendar-K8ZV1Djl.js";import{T as _,a as G,b as F,c as E}from"./tabs-DuNG8T3N.js";import{I as u}from"./input-BhMSVbBI.js";import{L as r}from"./label-DUERygKs.js";import{D as U,f as X,a as Z,b as K,c as ee,d as ae}from"./dialog-B-Dd4jtF.js";import{C as g}from"./checkbox-BmJP8vxX.js";import"./format-SmSpYad1.js";import"./chevron-right-B55Ri9eq.js";import"./chevron-left-Bxolz191.js";import"./index-p0A_8czo.js";import"./index-DBSIu3jP.js";import"./index-Bn6wwOXp.js";import"./index-CMxenybS.js";import"./index-Jch0bHuG.js";import"./index-D9_AVXgF.js";import"./index-CzuTh-Sf.js";import"./index-DCu9mJZ4.js";const T=({triggerText:h,pkg:i,onChange:c})=>{const j=()=>{console.log("Saved Package:",i),alert("Package saved!")};return e.jsxs(U,{children:[e.jsx(X,{asChild:!0,children:e.jsx("button",{className:"btn border px-4 py-1 rounded-md bg-white hover:bg-gray-100",children:h})}),e.jsxs(Z,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{children:e.jsx(ee,{children:"Edit Package"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Payable Start Date"}),e.jsx(P,{mode:"single",selected:i.packagePayableStartDate,onSelect:t=>c("packagePayableStartDate",t)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Payable End Date"}),e.jsx(P,{mode:"single",selected:i.packagePayableEndDate,onSelect:t=>c("packagePayableEndDate",t)})]}),e.jsx("div",{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(g,{checked:i.allowAfterEndDate,onCheckedChange:t=>c("allowAfterEndDate",t)}),"Allow After End Date"]})}),e.jsx("div",{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(g,{checked:i.allowPenaltyPayableAfterEndDate,onCheckedChange:t=>c("allowPenaltyPayableAfterEndDate",t)}),"Allow Penalty After End Date"]})}),i.allowPenaltyPayableAfterEndDate&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(r,{children:"Penalty Type"}),e.jsx(u,{value:i.penaltyType,onChange:t=>c("penaltyType",t.target.value),placeholder:"Fixed/Percentage"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Penalty Amount"}),e.jsx(u,{type:"number",value:i.penaltyAmount,onChange:t=>c("penaltyAmount",Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Penalty Frequency"}),e.jsx(u,{value:i.penaltyFrequency,onChange:t=>c("penaltyFrequency",t.target.value)})]})]}),e.jsx("div",{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(g,{checked:i.allowDiscount,onCheckedChange:t=>c("allowDiscount",t)}),"Allow Discount"]})}),i.allowDiscount&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(r,{children:"Discount Type"}),e.jsx(u,{value:i.discountType,onChange:t=>c("discountType",t.target.value),placeholder:"Fixed/Percentage"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Discount Amount"}),e.jsx(u,{type:"number",value:i.discountAmount,onChange:t=>c("discountAmount",Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Discount Frequency"}),e.jsx(u,{value:i.discountFrequency,onChange:t=>c("discountFrequency",t.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Discount End Date"}),e.jsx(P,{mode:"single",selected:i.discountEndDate,onSelect:t=>c("discountEndDate",t)})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(g,{checked:i.allowPackagePurchaseIfFeesPaid,onCheckedChange:t=>c("allowPackagePurchaseIfFeesPaid",t)}),"Allow Purchase if Fees Paid"]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{children:"Total Package Amount"}),e.jsx(u,{type:"number",value:i.packageAmount,onChange:t=>c("packageAmount",Number(t.target.value))})]})]}),e.jsx(ae,{className:"mt-4",children:e.jsx(x,{onClick:j,children:"Save"})})]})]})},De=()=>{const[h,i]=m.useState(null),[c,j]=m.useState(0),[t,M]=m.useState(0),[y,I]=m.useState([]),[V,J]=m.useState("weekly"),[f,D]=m.useState(null),[C,q]=m.useState(Array.from({length:12},(a,s)=>({name:new Date(0,s).toLocaleString("default",{month:"long"}),meetings:[],packagePayableStartDate:null,packagePayableEndDate:null,allowAfterEndDate:!1,allowPenaltyPayableAfterEndDate:!1,penaltyType:"",penaltyAmount:0,penaltyFrequency:"",allowDiscount:!1,discountType:"",discountAmount:0,discountFrequency:"",discountEndDate:null,allowPackagePurchaseIfFeesPaid:!1,packageAmount:0}))),[L,$]=m.useState(["Q1 (Jan-Mar)","Q2 (Apr-Jun)","Q3 (Jul-Sep)","Q4 (Oct-Dec)"].map(a=>({name:a,meetings:[],packagePayableStartDate:null,packagePayableEndDate:null,allowAfterEndDate:!1,allowPenaltyPayableAfterEndDate:!1,penaltyType:"",penaltyAmount:0,penaltyFrequency:"",allowDiscount:!1,discountType:"",discountAmount:0,discountFrequency:"",discountEndDate:null,allowPackagePurchaseIfFeesPaid:!1,packageAmount:0}))),[p,k]=m.useState({}),W=()=>{if(!h||c<=0)return;const a={id:Date.now().toString(),date:h,memberFee:c,visitorFee:t};I([...y,a]);const s=h.toLocaleString("default",{month:"long"});q(l=>l.map(n=>n.name!==s?n:{...n,meetings:[...n.meetings,a],packageAmount:(n.meetings.length+1)*c}));const d=O(h);$(l=>l.map(n=>n.name!==d?n:{...n,meetings:[...n.meetings,a],packageAmount:(n.meetings.length+1)*c}));const o=`Meeting-${a.id}`;k(l=>({...l,[o]:{...z(),meetings:[a],packageAmount:c}})),i(null),j(0),M(0)},O=a=>{const s=a.getMonth();return s<=2?"Q1 (Jan-Mar)":s<=5?"Q2 (Apr-Jun)":s<=8?"Q3 (Jul-Sep)":"Q4 (Oct-Dec)"},z=()=>({meetings:[],packagePayableStartDate:null,packagePayableEndDate:null,allowAfterEndDate:!1,allowPenaltyPayableAfterEndDate:!1,penaltyType:"",penaltyAmount:0,penaltyFrequency:"",allowDiscount:!1,discountType:"",discountAmount:0,discountFrequency:"",discountEndDate:null,allowPackagePurchaseIfFeesPaid:!1,packageAmount:0}),b=(a,s,d,o)=>{a==="monthly"?q(l=>l.map(n=>n.name!==s?n:{...n,[d]:o})):a==="quarterly"?$(l=>l.map(n=>n.name!==s?n:{...n,[d]:o})):k(l=>({...l,[s]:{...l[s],[d]:o}}))},Y=()=>{console.log({meetings:y,monthlyPackages:C,quarterlyPackages:L,weeklyPackages:p}),alert("Packages submitted successfully!")},B=()=>{D("add")},Q=()=>{D("show")},H=()=>{D(null)};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Meeting Management"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx(x,{onClick:B,variant:"outline",children:"Add Meeting"}),e.jsx(x,{onClick:Q,variant:"outline",children:"Show All Meetings"})]}),f&&e.jsx("div",{className:"fixed right-4 top-4 z-10 w-80 bg-white border rounded-lg shadow-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"font-semibold",children:f==="add"?"Add New Meeting":"All Meetings"}),e.jsx(x,{onClick:H,size:"sm",variant:"ghost",children:"Ã—"})]}),f==="add"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Select Date"}),e.jsx(P,{mode:"single",selected:h,onSelect:i,className:"rounded-md border"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Member Fee Amount"}),e.jsx(u,{type:"number",value:c,onChange:a=>j(Number(a.target.value)),placeholder:"Enter member fee"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Visitor Fee Amount"}),e.jsx(u,{type:"number",value:t,onChange:a=>M(Number(a.target.value)),placeholder:"Enter visitor fee"})]}),e.jsx(x,{onClick:()=>{W(),Q()},disabled:!h||c<=0,className:"w-full",children:"Add Meeting & Show All"})]}):e.jsx("div",{className:"max-h-96 overflow-y-auto",children:y.length===0?e.jsx("p",{children:"No meetings added yet."}):e.jsx("div",{className:"space-y-2",children:y.map(a=>e.jsxs("div",{className:"border-b pb-2",children:[e.jsxs("p",{className:"font-medium",children:["Moving on ",a.date.toLocaleDateString()]}),e.jsxs("p",{children:["Member Fee: $",a.memberFee]}),e.jsxs("p",{children:["Visitor Fee: $",a.visitorFee]})]},a.id))})})]})}),e.jsxs(_,{value:V,onValueChange:J,className:"w-full",children:[e.jsxs(G,{className:"grid w-full grid-cols-3",children:[e.jsx(F,{value:"weekly",children:"Weekly Packages"}),e.jsx(F,{value:"monthly",children:"Monthly Packages"}),e.jsx(F,{value:"quarterly",children:"Quarterly Packages"})]}),e.jsxs(E,{value:"weekly",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Weekly Packages"}),Object.entries(p).length===0?e.jsx("p",{children:"No meetings added yet. Add meetings to see weekly packages."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(p).map(([a,s])=>{var d,o,l;return e.jsxs(v,{children:[e.jsx(A,{children:e.jsxs(N,{children:["Meeting on ",s.meetings[0].date.toLocaleDateString()]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Meeting Details:"}),e.jsxs("p",{children:["Date: ",s.meetings[0].date.toLocaleDateString()]}),e.jsxs("p",{children:["Member Fee: $",s.meetings[0].memberFee]}),e.jsxs("p",{children:["Visitor Fee: $",s.meetings[0].visitorFee]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Package Details:"}),e.jsxs("p",{children:["Start: ",((d=s.packagePayableStartDate)==null?void 0:d.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["End: ",((o=s.packagePayableEndDate)==null?void 0:o.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["Penalty: ",s.penaltyType," $",s.penaltyAmount," (",s.penaltyFrequency,")"]}),e.jsxs("p",{children:["Discount: ",s.discountType," $",s.discountAmount," (",s.discountFrequency,")"]}),e.jsxs("p",{children:["Discount End: ",((l=s.discountEndDate)==null?void 0:l.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["Allow Purchase: ",s.allowPackagePurchaseIfFeesPaid?"Yes":"No"]})]}),e.jsxs("div",{className:"font-medium",children:["Package Amount: $",s.packageAmount]})]}),e.jsx(S,{className:"flex justify-end",children:e.jsx(T,{triggerText:"Edit Package",pkg:s,onChange:(n,R)=>b("weekly",a,n,R)})})]},a)})})]}),e.jsxs(E,{value:"monthly",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Monthly Packages"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(a=>{var s,d,o;return e.jsxs(v,{children:[e.jsx(A,{children:e.jsx(N,{children:a.name})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Meetings:"}),a.meetings.length>0?e.jsx("ul",{className:"list-disc pl-5",children:a.meetings.map(l=>e.jsxs("li",{children:[l.date.toLocaleDateString()," - Member: $",l.memberFee,", Visitor: $",l.visitorFee]},l.id))}):e.jsx("p",{children:"No meetings scheduled"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Package Details:"}),e.jsxs("p",{children:["Start: ",((s=a.packagePayableStartDate)==null?void 0:s.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["End: ",((d=a.packagePayableEndDate)==null?void 0:d.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["Penalty: ",a.penaltyType," $",a.penaltyAmount," (",a.penaltyFrequency,")"]}),e.jsxs("p",{children:["Discount: ",a.discountType," $",a.discountAmount," (",a.discountFrequency,")"]}),e.jsxs("p",{children:["Discount End: ",((o=a.discountEndDate)==null?void 0:o.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["Allow Purchase: ",a.allowPackagePurchaseIfFeesPaid?"Yes":"No"]})]}),e.jsxs("div",{className:"font-medium",children:["Total Package Amount: $",a.packageAmount]})]}),e.jsx(S,{className:"flex justify-end",children:e.jsx(T,{triggerText:"Edit Package",pkg:a,onChange:(l,n)=>b("monthly",a.name,l,n)})})]},a.name)})})]}),e.jsxs(E,{value:"quarterly",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quarterly Packages"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.map(a=>{var s,d,o;return e.jsxs(v,{children:[e.jsx(A,{children:e.jsx(N,{children:a.name})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Meetings:"}),a.meetings.length>0?e.jsx("ul",{className:"list-disc pl-5",children:a.meetings.map(l=>e.jsxs("li",{children:[l.date.toLocaleDateString()," - Member: $",l.memberFee,", Visitor: $",l.visitorFee]},l.id))}):e.jsx("p",{children:"No meetings scheduled"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Package Details:"}),e.jsxs("p",{children:["Start: ",((s=a.packagePayableStartDate)==null?void 0:s.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["End: ",((d=a.packagePayableEndDate)==null?void 0:d.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["Penalty: ",a.penaltyType," $",a.penaltyAmount," (",a.penaltyFrequency,")"]}),e.jsxs("p",{children:["Discount: ",a.discountType," $",a.discountAmount," (",a.discountFrequency,")"]}),e.jsxs("p",{children:["Discount End: ",((o=a.discountEndDate)==null?void 0:o.toLocaleDateString())||"-"]}),e.jsxs("p",{children:["Allow Purchase: ",a.allowPackagePurchaseIfFeesPaid?"Yes":"No"]})]}),e.jsxs("div",{className:"font-medium",children:["Total Package Amount: $",a.packageAmount]})]}),e.jsx(S,{className:"flex justify-end",children:e.jsx(T,{triggerText:"Edit Package",pkg:a,onChange:(l,n)=>b("quarterly",a.name,l,n)})})]},a.name)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(x,{onClick:Y,size:"lg",className:"w-full md:w-auto",children:"Submit All Packages"})})]})};export{De as default};
