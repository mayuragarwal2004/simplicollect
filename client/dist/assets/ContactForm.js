import{d as A,r,j as e,b as F,g as T,B as P,s as B}from"./index.js";import{I as E}from"./input.js";import{T as G}from"./textarea.js";import{S as H,a as U,b as W,c as _,d as V}from"./select.js";import{A as Q,a as K}from"./alert.js";import{M as O,d as Y,u as z,x as X,y as J,j as Z,L as D,t as j,C as ee,P as te,z as se,w as ae,A as ie}from"./categories.js";import{C as re}from"./circle-alert.js";import{U as ne}from"./user.js";import{M as le}from"./mail.js";import{S as oe}from"./send.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$e=A("Globe",ce);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ue=A("Tag",de);class me extends r.Component{getSnapshotBeforeUpdate(u){const n=this.props.childRef.current;if(n&&u.isPresent&&!this.props.isPresent){const h=n.offsetParent,l=Y(h)&&h.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=l-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function he({children:c,isPresent:u,anchorX:n,root:h}){const l=r.useId(),i=r.useRef(null),s=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=r.useContext(O);return r.useInsertionEffect(()=>{const{width:w,height:m,top:N,left:d,right:g}=s.current;if(u||!i.current||!w||!m)return;const b=n==="left"?`left: ${d}`:`right: ${g}`;i.current.dataset.motionPopId=l;const f=document.createElement("style");x&&(f.nonce=x);const a=h??document.head;return a.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${m}px !important;
            ${b}px !important;
            top: ${N}px !important;
          }
        `),()=>{a.contains(f)&&a.removeChild(f)}},[u]),e.jsx(me,{isPresent:u,childRef:i,sizeRef:s,children:r.cloneElement(c,{ref:i})})}const xe=({children:c,initial:u,isPresent:n,onExitComplete:h,custom:l,presenceAffectsLayout:i,mode:s,anchorX:x,root:w})=>{const m=z(fe),N=r.useId();let d=!0,g=r.useMemo(()=>(d=!1,{id:N,initial:u,isPresent:n,custom:l,onExitComplete:b=>{m.set(b,!0);for(const f of m.values())if(!f)return;h&&h()},register:b=>(m.set(b,!1),()=>m.delete(b))}),[n,m,h]);return i&&d&&(g={...g}),r.useMemo(()=>{m.forEach((b,f)=>m.set(f,!1))},[n]),r.useEffect(()=>{!n&&!m.size&&h&&h()},[n]),s==="popLayout"&&(c=e.jsx(he,{isPresent:n,anchorX:x,root:w,children:c})),e.jsx(X.Provider,{value:g,children:c})};function fe(){return new Map}const I=c=>c.key||"";function R(c){const u=[];return r.Children.forEach(c,n=>{r.isValidElement(n)&&u.push(n)}),u}const pe=({children:c,custom:u,initial:n=!0,onExitComplete:h,presenceAffectsLayout:l=!0,mode:i="sync",propagate:s=!1,anchorX:x="left",root:w})=>{const[m,N]=J(s),d=r.useMemo(()=>R(c),[c]),g=s&&!m?[]:d.map(I),b=r.useRef(!0),f=r.useRef(d),a=z(()=>new Map),[$,p]=r.useState(d),[v,M]=r.useState(d);Z(()=>{b.current=!1,f.current=d;for(let t=0;t<v.length;t++){const o=I(v[t]);g.includes(o)?a.delete(o):a.get(o)!==!0&&a.set(o,!1)}},[v,g.length,g.join("-")]);const k=[];if(d!==$){let t=[...d];for(let o=0;o<v.length;o++){const y=v[o],S=I(y);g.includes(S)||(t.splice(o,0,y),k.push(y))}return i==="wait"&&k.length&&(t=k),M(R(t)),p(d),null}const{forceRender:C}=r.useContext(D);return e.jsx(e.Fragment,{children:v.map(t=>{const o=I(t),y=s&&!m?!1:d===v||g.includes(o),S=()=>{if(a.has(o))a.set(o,!0);else return;let q=!0;a.forEach(L=>{L||(q=!1)}),q&&(C==null||C(),M(f.current),s&&(N==null||N()),h&&h())};return e.jsx(xe,{isPresent:y,initial:!b.current||n?void 0:!1,custom:u,presenceAffectsLayout:l,mode:i,root:w,onExitComplete:y?void 0:S,anchorX:x,children:t},o)})})},Me=({onSuccess:c,onError:u,className:n="",showTitle:h=!0,compact:l=!1})=>{const{isAuthenticated:i}=F(),{memberData:s}=T(),[x,w]=r.useState(!1),[m,N]=r.useState(!1),[d,g]=r.useState(""),[b,f]=r.useState(""),[a,$]=r.useState({name:i?`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim():"",email:i&&(s==null?void 0:s.email)||"",phoneNumber:i&&(s==null?void 0:s.phoneNumber)||"",subject:"",message:"",category:"general"}),[p,v]=r.useState({}),M=()=>{const t={};return a.name.trim()||(t.name="Name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(t.email="Please enter a valid email address"):t.email="Email is required",a.subject.trim()||(t.subject="Subject is required"),a.message.trim()?a.message.trim().length<10&&(t.message="Message must be at least 10 characters long"):t.message="Message is required",v(t),Object.keys(t).length===0},k=async t=>{var o;if(t.preventDefault(),!!M()){w(!0),g("");try{const y={name:a.name.trim(),email:a.email.trim().toLowerCase(),phoneNumber:((o=a.phoneNumber)==null?void 0:o.trim())||void 0,subject:a.subject.trim(),message:a.message.trim(),category:a.category,source:"web"},S=await ie.submitContactQuery(y);N(!0),f(S.referenceId),$({name:i?`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim():"",email:i&&(s==null?void 0:s.email)||"",phoneNumber:i&&(s==null?void 0:s.phoneNumber)||"",subject:"",message:"",category:"general"}),c==null||c(S)}catch(y){const S=y.message||"Failed to submit your query. Please try again.";g(S),u==null||u(S)}finally{w(!1)}}},C=(t,o)=>{$(y=>({...y,[t]:o})),p[t]&&v(y=>({...y,[t]:void 0}))};return m?e.jsx(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:`bg-white rounded-xl shadow-xl p-8 ${n}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(j.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(ee,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your query has been submitted successfully. We'll get back to you soon."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Reference ID:"})," ",b]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Please save this reference ID for future correspondence."})]}),e.jsx(P,{onClick:()=>N(!1),variant:"outline",className:"mr-3",children:"Submit Another Query"}),i&&e.jsx(P,{onClick:()=>window.location.href="/dashboard/my-queries",className:"bg-blue-600 hover:bg-blue-700",children:"View My Queries"})]})}):e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`bg-white rounded-xl shadow-xl ${l?"p-6":"p-8"} ${n}`,children:[h&&e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:`font-bold text-gray-900 ${l?"text-xl":"text-2xl"} mb-2`,children:"Contact Us"}),e.jsx("p",{className:"text-gray-600",children:"Have a question or need help? We're here to assist you."})]}),e.jsx(pe,{children:d&&e.jsx(j.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:e.jsxs(Q,{variant:"destructive",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(K,{children:d})]})})}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:`grid gap-6 ${l?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ne,{className:"inline w-4 h-4 mr-2"}),"Full Name *"]}),e.jsx(E,{type:"text",value:a.name,onChange:t=>C("name",t.target.value),placeholder:"Enter your full name",className:`transition-all duration-200 ${p.name?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.name})]}),e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(le,{className:"inline w-4 h-4 mr-2"}),"Email Address *"]}),e.jsx(E,{type:"email",value:a.email,onChange:t=>C("email",t.target.value),placeholder:"Enter your email address",className:`transition-all duration-200 ${p.email?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.email})]})]}),e.jsxs("div",{className:`grid gap-6 ${l?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(te,{className:"inline w-4 h-4 mr-2"}),"Phone Number"]}),e.jsx(E,{type:"tel",value:a.phoneNumber,onChange:t=>C("phoneNumber",t.target.value),placeholder:"Enter your phone number",className:"transition-all duration-200 focus:border-blue-500",disabled:x})]}),e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ue,{className:"inline w-4 h-4 mr-2"}),"Category"]}),e.jsxs(H,{value:a.category,onValueChange:t=>C("category",t),disabled:x,children:[e.jsx(U,{children:e.jsx(W,{placeholder:"Select a category"})}),e.jsx(_,{children:se.map(t=>e.jsx(V,{value:t.value,children:t.label},t.value))})]})]})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ae,{className:"inline w-4 h-4 mr-2"}),"Subject *"]}),e.jsx(E,{type:"text",value:a.subject,onChange:t=>C("subject",t.target.value),placeholder:"Brief description of your query",className:`transition-all duration-200 ${p.subject?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.subject&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.subject})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),e.jsx(G,{value:a.message,onChange:t=>C("message",t.target.value),placeholder:"Please provide details about your query...",rows:l?4:6,className:`transition-all duration-200 resize-none ${p.message?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.message}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.message.length,"/1000 characters"]})]}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"flex justify-center",children:e.jsx(P,{type:"submit",disabled:x,className:`${l?"w-full":"w-auto min-w-[200px]"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-lg transition-all duration-200 transform hover:scale-105 disabled:transform-none disabled:opacity-50`,children:x?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Send Message"]})})})]}),!i&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Have an account?"," ",e.jsx("a",{href:"/auth/signin",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})," ","to track your queries and get faster support."]})})]})};export{pe as A,Me as C,$e as G};
