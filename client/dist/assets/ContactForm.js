import{r,j as e,b as L,k as T,B as I,q as z}from"./index.js";import{I as k}from"./input.js";import{T as B}from"./textarea.js";import{S as U,a as W,b as H,c as V,d as Q}from"./select.js";import{A as G,a as K}from"./alert.js";import{M as O,d as Y,u as A,P as X,w as _,j as J,L as Z,t as j,C as D,x as ee}from"./categories.js";import{C as te}from"./circle-check-big.js";import{C as se}from"./circle-alert.js";import{U as ae}from"./user.js";import{M as ie}from"./mail.js";import{P as re,M as ne}from"./phone.js";import{T as le,S as oe}from"./tag.js";class ce extends r.Component{getSnapshotBeforeUpdate(m){const n=this.props.childRef.current;if(n&&m.isPresent&&!this.props.isPresent){const h=n.offsetParent,l=Y(h)&&h.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=l-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function de({children:c,isPresent:m,anchorX:n,root:h}){const l=r.useId(),i=r.useRef(null),s=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=r.useContext(O);return r.useInsertionEffect(()=>{const{width:w,height:u,top:N,left:d,right:g}=s.current;if(m||!i.current||!w||!u)return;const b=n==="left"?`left: ${d}`:`right: ${g}`;i.current.dataset.motionPopId=l;const f=document.createElement("style");x&&(f.nonce=x);const a=h??document.head;return a.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${u}px !important;
            ${b}px !important;
            top: ${N}px !important;
          }
        `),()=>{a.contains(f)&&a.removeChild(f)}},[m]),e.jsx(ce,{isPresent:m,childRef:i,sizeRef:s,children:r.cloneElement(c,{ref:i})})}const me=({children:c,initial:m,isPresent:n,onExitComplete:h,custom:l,presenceAffectsLayout:i,mode:s,anchorX:x,root:w})=>{const u=A(ue),N=r.useId();let d=!0,g=r.useMemo(()=>(d=!1,{id:N,initial:m,isPresent:n,custom:l,onExitComplete:b=>{u.set(b,!0);for(const f of u.values())if(!f)return;h&&h()},register:b=>(u.set(b,!1),()=>u.delete(b))}),[n,u,h]);return i&&d&&(g={...g}),r.useMemo(()=>{u.forEach((b,f)=>u.set(f,!1))},[n]),r.useEffect(()=>{!n&&!u.size&&h&&h()},[n]),s==="popLayout"&&(c=e.jsx(de,{isPresent:n,anchorX:x,root:w,children:c})),e.jsx(X.Provider,{value:g,children:c})};function ue(){return new Map}const P=c=>c.key||"";function R(c){const m=[];return r.Children.forEach(c,n=>{r.isValidElement(n)&&m.push(n)}),m}const he=({children:c,custom:m,initial:n=!0,onExitComplete:h,presenceAffectsLayout:l=!0,mode:i="sync",propagate:s=!1,anchorX:x="left",root:w})=>{const[u,N]=_(s),d=r.useMemo(()=>R(c),[c]),g=s&&!u?[]:d.map(P),b=r.useRef(!0),f=r.useRef(d),a=A(()=>new Map),[M,p]=r.useState(d),[v,E]=r.useState(d);J(()=>{b.current=!1,f.current=d;for(let t=0;t<v.length;t++){const o=P(v[t]);g.includes(o)?a.delete(o):a.get(o)!==!0&&a.set(o,!1)}},[v,g.length,g.join("-")]);const $=[];if(d!==M){let t=[...d];for(let o=0;o<v.length;o++){const y=v[o],S=P(y);g.includes(S)||(t.splice(o,0,y),$.push(y))}return i==="wait"&&$.length&&(t=$),E(R(t)),p(d),null}const{forceRender:C}=r.useContext(Z);return e.jsx(e.Fragment,{children:v.map(t=>{const o=P(t),y=s&&!u?!1:d===v||g.includes(o),S=()=>{if(a.has(o))a.set(o,!0);else return;let q=!0;a.forEach(F=>{F||(q=!1)}),q&&(C==null||C(),E(f.current),s&&(N==null||N()),h&&h())};return e.jsx(me,{isPresent:y,initial:!b.current||n?void 0:!1,custom:m,presenceAffectsLayout:l,mode:i,root:w,onExitComplete:y?void 0:S,anchorX:x,children:t},o)})})},$e=({onSuccess:c,onError:m,className:n="",showTitle:h=!0,compact:l=!1})=>{const{isAuthenticated:i}=L(),{memberData:s}=T(),[x,w]=r.useState(!1),[u,N]=r.useState(!1),[d,g]=r.useState(""),[b,f]=r.useState(""),[a,M]=r.useState({name:i?`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim():"",email:i&&(s==null?void 0:s.email)||"",phoneNumber:i&&(s==null?void 0:s.phoneNumber)||"",subject:"",message:"",category:"general"}),[p,v]=r.useState({}),E=()=>{const t={};return a.name.trim()||(t.name="Name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(t.email="Please enter a valid email address"):t.email="Email is required",a.subject.trim()||(t.subject="Subject is required"),a.message.trim()?a.message.trim().length<10&&(t.message="Message must be at least 10 characters long"):t.message="Message is required",v(t),Object.keys(t).length===0},$=async t=>{var o;if(t.preventDefault(),!!E()){w(!0),g("");try{const y={name:a.name.trim(),email:a.email.trim().toLowerCase(),phoneNumber:((o=a.phoneNumber)==null?void 0:o.trim())||void 0,subject:a.subject.trim(),message:a.message.trim(),category:a.category,source:"web"},S=await ee.submitContactQuery(y);N(!0),f(S.referenceId),M({name:i?`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim():"",email:i&&(s==null?void 0:s.email)||"",phoneNumber:i&&(s==null?void 0:s.phoneNumber)||"",subject:"",message:"",category:"general"}),c==null||c(S)}catch(y){const S=y.message||"Failed to submit your query. Please try again.";g(S),m==null||m(S)}finally{w(!1)}}},C=(t,o)=>{M(y=>({...y,[t]:o})),p[t]&&v(y=>({...y,[t]:void 0}))};return u?e.jsx(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:`bg-white rounded-xl shadow-xl p-8 ${n}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(j.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your query has been submitted successfully. We'll get back to you soon."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Reference ID:"})," ",b]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Please save this reference ID for future correspondence."})]}),e.jsx(I,{onClick:()=>N(!1),variant:"outline",className:"mr-3",children:"Submit Another Query"}),i&&e.jsx(I,{onClick:()=>window.location.href="/dashboard/my-queries",className:"bg-blue-600 hover:bg-blue-700",children:"View My Queries"})]})}):e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`bg-white rounded-xl shadow-xl ${l?"p-6":"p-8"} ${n}`,children:[h&&e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:`font-bold text-gray-900 ${l?"text-xl":"text-2xl"} mb-2`,children:"Contact Us"}),e.jsx("p",{className:"text-gray-600",children:"Have a question or need help? We're here to assist you."})]}),e.jsx(he,{children:d&&e.jsx(j.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:e.jsxs(G,{variant:"destructive",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx(K,{children:d})]})})}),e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs("div",{className:`grid gap-6 ${l?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ae,{className:"inline w-4 h-4 mr-2"}),"Full Name *"]}),e.jsx(k,{type:"text",value:a.name,onChange:t=>C("name",t.target.value),placeholder:"Enter your full name",className:`transition-all duration-200 ${p.name?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.name})]}),e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ie,{className:"inline w-4 h-4 mr-2"}),"Email Address *"]}),e.jsx(k,{type:"email",value:a.email,onChange:t=>C("email",t.target.value),placeholder:"Enter your email address",className:`transition-all duration-200 ${p.email?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.email})]})]}),e.jsxs("div",{className:`grid gap-6 ${l?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(re,{className:"inline w-4 h-4 mr-2"}),"Phone Number"]}),e.jsx(k,{type:"tel",value:a.phoneNumber,onChange:t=>C("phoneNumber",t.target.value),placeholder:"Enter your phone number",className:"transition-all duration-200 focus:border-blue-500",disabled:x})]}),e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:l?"col-span-1":"md:col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(le,{className:"inline w-4 h-4 mr-2"}),"Category"]}),e.jsxs(U,{value:a.category,onValueChange:t=>C("category",t),disabled:x,children:[e.jsx(W,{children:e.jsx(H,{placeholder:"Select a category"})}),e.jsx(V,{children:D.map(t=>e.jsx(Q,{value:t.value,children:t.label},t.value))})]})]})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ne,{className:"inline w-4 h-4 mr-2"}),"Subject *"]}),e.jsx(k,{type:"text",value:a.subject,onChange:t=>C("subject",t.target.value),placeholder:"Brief description of your query",className:`transition-all duration-200 ${p.subject?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.subject&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.subject})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),e.jsx(B,{value:a.message,onChange:t=>C("message",t.target.value),placeholder:"Please provide details about your query...",rows:l?4:6,className:`transition-all duration-200 resize-none ${p.message?"border-red-500 focus:border-red-500":"focus:border-blue-500"}`,disabled:x}),p.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.message}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.message.length,"/1000 characters"]})]}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"flex justify-center",children:e.jsx(I,{type:"submit",disabled:x,className:`${l?"w-full":"w-auto min-w-[200px]"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-lg transition-all duration-200 transform hover:scale-105 disabled:transform-none disabled:opacity-50`,children:x?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Send Message"]})})})]}),!i&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Have an account?"," ",e.jsx("a",{href:"/auth/signin",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})," ","to track your queries and get faster support."]})})]})};export{he as A,$e as C};
