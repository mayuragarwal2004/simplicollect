import{j as e,B as b,u as ee,a as q,r as n,f as L,c as I,Q as p,o as se,D as F,e as ae,X as te,n as re}from"./index-6elQxnHd.js";import{B as ne}from"./Breadcrumb-ME0YvNli.js";import{u as le,a as ie,b as oe,f as K,c as ce}from"./usePagination-BYw1nb5N.js";import{T as de,a as me,b as H,c as ue,d as he,e as _}from"./table-CMz5QLeZ.js";import{D as pe,C as xe,a as fe,b as ge}from"./react-icons.esm-BfHCtAcr.js";import{S as be,a as je,b as ve,c as ye,d as Ne}from"./select-BctcFQZm.js";import{D as P,f as $,a as E,c as T,e as z,d as A,b as W}from"./dialog-CT_lOUQb.js";import{I as B}from"./input-Dp_r379b.js";import{C as Ce}from"./checkbox-D30DXwBR.js";import{M as Se}from"./multiSelect-DW6PEUB7.js";import{C as we}from"./calendar-CfUOH_cJ.js";import{P as De,a as ke,b as Me}from"./popover-D0OZeFQ8.js";import{C as Re}from"./calendar-DIJiUsoz.js";import{f as Ie}from"./format-SmSpYad1.js";import"./scroll-area-CDJE7vcR.js";import{S as Pe}from"./search-bar-nO3JWK1C.js";import{D as Ee}from"./download-DlrtgMrw.js";import{U as Te}from"./upload-BOrHq15E.js";import"./chevron-right-DA45-pzU.js";import"./index-BdQq_4o_.js";import"./index-BGKEPXry.js";import"./index-CWa4kTbH.js";import"./index-BvgCK6ys.js";import"./index-BLdKwkXj.js";import"./index-BXCPHgg9.js";import"./index-BIhwVmuG.js";import"./index-DSJunp_n.js";import"./chevron-down-BUZeX_Bt.js";import"./index-CgP8r1n9.js";import"./index-CE4AQY6s.js";import"./separator-CQuc5foV.js";import"./badge-C8uzDnx2.js";import"./command-DbqVVo4r.js";import"./search-C_1baVLY.js";import"./chevron-left-DwqZmAJ3.js";function Oe({table:s,totalRecord:a}){return e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 px-2 lg:flex-row lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:flex-row sm:space-x-6 sm:space-y-0",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.getFilteredRowModel().rows.length," row(s)."]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(be,{value:`${s.getState().pagination.pageSize}`,onValueChange:o=>s.setPageSize(Number(o)),children:[e.jsx(je,{className:"h-8 w-[70px]",children:e.jsx(ve,{placeholder:s.getState().pagination.pageSize})}),e.jsx(ye,{side:"top",children:[5,10,20,30,40,50].map(o=>e.jsx(Ne,{value:`${o}`,children:o},o))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Records: ",a]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(b,{variant:"outline",className:"h-8 w-8 p-0",disabled:!s.getCanPreviousPage(),onClick:()=>s.setPageIndex(0),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(pe,{className:"h-4 w-4"})]}),e.jsxs(b,{variant:"outline",className:"h-8 w-8 p-0",disabled:!s.getCanPreviousPage(),onClick:s.previousPage,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(xe,{className:"h-4 w-4"})]}),e.jsxs(b,{variant:"outline",className:"h-8 w-8 p-0",disabled:!s.getCanNextPage(),onClick:s.nextPage,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(fe,{className:"h-4 w-4"})]}),e.jsxs(b,{variant:"outline",className:"h-8 w-8 p-0",disabled:!s.getCanNextPage(),onClick:()=>s.setPageIndex(s.getPageCount()-1),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ge,{className:"h-4 w-4"})]})]})]})]})}function $e({columns:s,data:a,searchInputField:o,filterField:v,filterFieldName:x,filterCategoriesList:g,totalRecord:f,children:d}){var i;const y=ee(),{rows:j,onPaginationChange:k,page:S,pagination:M}=le(),R=q(),D=()=>{const t=new URLSearchParams(R.search),l=ce({rows:j,page:S},t);y(`?${l}`,{replace:!0})};n.useEffect(()=>{D()},[j,S]);const N=ie({data:a,columns:s,getCoreRowModel:oe(),manualPagination:!0,onPaginationChange:k,state:{pagination:M},rowCount:f}),u=n.Children.map(d,t=>n.isValidElement(t)?n.cloneElement(t,{table:N,searchInputField:o,filterField:v,filterFieldName:x,filterCategoriesList:g}):t);return e.jsxs("div",{className:"space-y-4",children:[u,e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(de,{children:[e.jsx(me,{children:N.getHeaderGroups().map(t=>e.jsx(H,{children:t.headers.map(l=>e.jsx(ue,{className:"px-4 py-2 bg-newprimaryColor text-white font-raleway",colSpan:l.colSpan,children:l.isPlaceholder?null:K(l.column.columnDef.header,l.getContext())},l.id))},t.id))}),e.jsx(he,{className:"bg-adminBreadCrumbsBg font-raleway",children:(i=N.getRowModel().rows)!=null&&i.length?N.getRowModel().rows.map(t=>e.jsx(H,{"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(l=>e.jsx(_,{className:"px-4 py-2",children:K(l.column.columnDef.cell,l.getContext())},l.id))},t.id)):e.jsx(H,{children:e.jsx(_,{colSpan:s.length,className:"h-24 text-center bg-adminBreadCrumbsBg font-raleway",children:"No results."})})})]})}),e.jsx(Oe,{table:N,totalRecord:f})]})}const Ae=s=>[{accessorKey:"name",header:()=>e.jsx("div",{children:"Name"}),cell:({row:a})=>e.jsxs("p",{className:"text-sm font-medium",children:[a.original.firstName," ",a.original.lastName]}),enableSorting:!1,enableHiding:!1},{accessorKey:"phoneNumber",header:()=>e.jsx("div",{children:"Phone Number"}),cell:({row:a})=>e.jsx("p",{className:"text-sm",children:a.original.phoneNumber}),enableSorting:!1,enableHiding:!1},{accessorKey:"email",header:()=>e.jsx("div",{children:"Email"}),cell:({row:a})=>e.jsx("p",{className:"text-sm",children:a.original.email}),enableSorting:!1,enableHiding:!1},{accessorKey:"role",header:()=>e.jsx("div",{children:"Role"}),cell:({row:a})=>e.jsx("p",{className:"text-sm",children:a.original.roleNames}),enableSorting:!1,enableHiding:!1},{accessorKey:"balanceAmount",header:()=>e.jsx("div",{children:"Balance Amount"}),cell:({row:a})=>e.jsxs("p",{className:"text-sm font-medium text-green-600",children:["â‚¹",a.original.balance]}),enableSorting:!0,enableHiding:!1},{accessorKey:"actions",header:()=>e.jsx("div",{children:"Actions"}),cell:({row:a})=>{const{chapterSlug:o}=L(),[v,x]=n.useState(""),[g,f]=n.useState([]),[d,y]=n.useState(a.original.balance),[j,k]=n.useState(!1),[S,M]=n.useState(!1),[R,D]=n.useState(!1),[N,u]=n.useState(!1),[i,t]=n.useState(!1),l=()=>{I.put(`/api/admin/chapter-member-list/${o}/members/${a.original.memberId}/role`,{role:g.join(",")}).then(()=>{p.success("Role updated successfully"),a.original.fetchMembers(),M(!1)}).catch(()=>p.error("Failed to update role"))},h=()=>{I.put(`/api/admin/chapter-member-list/${o}/members/${a.original.memberId}/balance`,{balance:d,addToTransaction:j}).then(()=>{p.success("Balance updated successfully"),a.original.fetchMembers(),D(!1)}).catch(()=>p.error("Failed to update balance"))},c=()=>{I.put(`/api/admin/chapter-member-list/${o}/members/${a.original.memberId}/remove`,{leaveDate:v}).then(()=>{p.success("Member removed successfully"),a.original.fetchMembers(),u(!1)}).catch(()=>p.error("Failed to remove member"))},m=()=>{I.delete(`/api/admin/chapter-member-list/${o}/members/${a.original.memberId}`).then(()=>{p.success("Member deleted successfully"),a.original.fetchMembers(),t(!1)}).catch(()=>p.error("Failed to delete member"))},C=r=>{f(r)},w=(a.original.roleIds??"").split(",").map(r=>r.trim()).filter(r=>r!=="");return e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(P,{open:S,onOpenChange:M,children:[e.jsx($,{asChild:!0,children:e.jsx(b,{variant:"secondary",size:"sm",onClick:()=>M(!0),children:"Change Role"})}),e.jsxs(E,{children:[e.jsx(T,{children:"Set Role"}),e.jsx(z,{children:"Select a new role for the user."}),e.jsx(Se,{options:s.map(r=>({label:r.roleName,value:r.roleId.toString()})),onValueChange:C,defaultValue:w.map(String),placeholder:"Select Rights",maxCount:5}),e.jsx(A,{children:e.jsx(b,{onClick:l,children:"Confirm"})})]})]}),e.jsxs(P,{open:R,onOpenChange:D,children:[e.jsx($,{asChild:!0,children:e.jsx(b,{variant:"secondary",size:"sm",onClick:()=>D(!0),children:"Update Balance"})}),e.jsxs(E,{children:[e.jsx(T,{children:"Edit Balance"}),e.jsx(B,{type:"number",value:d,onChange:r=>y(r.target.value)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{onCheckedChange:k}),e.jsx("span",{children:"Add to transaction"})]}),e.jsx(A,{children:e.jsx(b,{onClick:h,children:"Save"})})]})]}),e.jsxs(P,{open:N,onOpenChange:u,children:[e.jsx($,{asChild:!0,children:e.jsx(b,{variant:"secondary",size:"sm",className:"text-yellow-600 border-yellow-600",onClick:()=>u(!0),children:"Remove"})}),e.jsxs(E,{children:[e.jsx(T,{children:"Remove Member"}),e.jsx(z,{children:"Enter leave date to remove this member."}),e.jsx(B,{type:"date",value:v,onChange:r=>x(r.target.value)}),e.jsx(A,{children:e.jsx(b,{onClick:c,children:"Confirm"})})]})]}),e.jsxs(P,{open:i,onOpenChange:t,children:[e.jsx($,{asChild:!0,children:e.jsx(b,{variant:"destructive",size:"sm",onClick:()=>t(!0),children:"Delete"})}),e.jsxs(E,{children:[e.jsx(T,{children:"Delete User"}),e.jsx(z,{children:"Are you sure? This action is irreversible."}),e.jsx(A,{children:e.jsx(b,{variant:"destructive",onClick:m,children:"Delete"})})]})]})]})}}];var Be="Expected a function",J=NaN,Fe="[object Symbol]",Le=/^\s+|\s+$/g,Ue=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,He=/^0o[0-7]+$/i,ze=parseInt,Qe=typeof F=="object"&&F&&F.Object===Object&&F,We=typeof self=="object"&&self&&self.Object===Object&&self,Ge=Qe||We||Function("return this")(),Ke=Object.prototype,_e=Ke.toString,Je=Math.max,Xe=Math.min,Q=function(){return Ge.Date.now()};function qe(s,a,o){var v,x,g,f,d,y,j=0,k=!1,S=!1,M=!0;if(typeof s!="function")throw new TypeError(Be);a=X(a)||0,G(o)&&(k=!!o.leading,S="maxWait"in o,g=S?Je(X(o.maxWait)||0,a):g,M="trailing"in o?!!o.trailing:M);function R(m){var C=v,w=x;return v=x=void 0,j=m,f=s.apply(w,C),f}function D(m){return j=m,d=setTimeout(i,a),k?R(m):f}function N(m){var C=m-y,w=m-j,r=a-C;return S?Xe(r,g-w):r}function u(m){var C=m-y,w=m-j;return y===void 0||C>=a||C<0||S&&w>=g}function i(){var m=Q();if(u(m))return t(m);d=setTimeout(i,N(m))}function t(m){return d=void 0,M&&v?R(m):(v=x=void 0,f)}function l(){d!==void 0&&clearTimeout(d),j=0,v=y=x=d=void 0}function h(){return d===void 0?f:t(Q())}function c(){var m=Q(),C=u(m);if(v=arguments,x=this,y=m,C){if(d===void 0)return D(y);if(S)return d=setTimeout(i,a),R(y)}return d===void 0&&(d=setTimeout(i,a)),f}return c.cancel=l,c.flush=h,c}function G(s){var a=typeof s;return!!s&&(a=="object"||a=="function")}function Ye(s){return!!s&&typeof s=="object"}function Ze(s){return typeof s=="symbol"||Ye(s)&&_e.call(s)==Fe}function X(s){if(typeof s=="number")return s;if(Ze(s))return J;if(G(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=G(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=s.replace(Le,"");var o=Ve.test(s);return o||He.test(s)?ze(s.slice(2),o?2:8):Ue.test(s)?J:+s}var es=qe;const ss=se(es);function as(){const[s,a]=n.useState();return e.jsxs(De,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:ae("w-[240px] justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[e.jsx(Re,{}),s?Ie(s,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(Me,{className:"w-auto p-0",align:"start",children:e.jsx(we,{mode:"single",selected:s,onSelect:a,initialFocus:!0})})]})}const ts=({isOpen:s,onClose:a,chapterSlug:o,fetchMembers:v})=>{const[x,g]=n.useState(""),[f,d]=n.useState([]),[y,j]=n.useState(!1),[k,S]=n.useState(1),[M,R]=n.useState(!0),[D,N]=n.useState(null),[u,i]=n.useState(""),[t,l]=n.useState(null),h=async(r,O=1,U=!1)=>{if(r){j(!0);try{const V=(await I.get(`/api/admin/chapter-member-list/searchmemberstoadd?searchQuery=${r}&chapterSlug=${o}&page=${O}&limit=10`)).data||[];d(Z=>U?V:[...new Set([...Z,...V])]),R(V.length===10)}catch{p.error("Failed to fetch search results")}finally{j(!1)}}},c=n.useCallback(ss(r=>h(r,1,!0),500),[]);n.useEffect(()=>{S(1),d([]),R(!0),c(x)},[x,c]);const m=r=>{r.target.scrollHeight-r.target.scrollTop===r.target.clientHeight&&!y&&M&&(h(x,k+1),S(O=>O+1))},C=r=>{N(r)},w=async()=>{var r,O;if(!u||!t){p.error("Please provide all details");return}try{await I.post(`/api/admin/chapter-member-list/${o}/members/${D.memberId}/addmember`,{role:u,joinDate:t}),p.success("Member added successfully"),v(),a(),N(null),i(""),l(null)}catch(U){p.error(((O=(r=U.response)==null?void 0:r.data)==null?void 0:O.error)||"Failed to add member")}};return e.jsx(P,{open:s,onOpenChange:a,children:e.jsxs(E,{children:[e.jsx(W,{children:e.jsx(T,{children:"Search Members"})}),e.jsx(B,{placeholder:"Search members...",value:x,onChange:r=>g(r.target.value),className:"mb-4"}),e.jsxs("div",{onScroll:m,className:"h-64 overflow-y-auto",children:[y&&e.jsx("p",{children:"Loading..."}),f.length>0?f.map(r=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded-md",children:[e.jsxs("p",{children:[r.fullName," (",r.phoneNumber,")"]}),r.isInChapter===0&&e.jsx(b,{size:"sm",onClick:()=>C(r),children:"Add"})]},r.memberId)):e.jsx("p",{children:"No results found"})]}),e.jsx(P,{open:D!==null,onOpenChange:()=>N(null),children:e.jsxs(E,{children:[e.jsx(W,{children:e.jsx(T,{children:"Enter Member Details"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{children:"Role"}),e.jsx(B,{value:u,onChange:r=>i(r.target.value),placeholder:"Enter role",className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{children:"Join Date"}),e.jsx(as,{selected:t,onChange:l,className:"mt-2"})]}),e.jsx(b,{onClick:w,children:"Add Member"})]})})]})})};function rs({isAddDialogOpen:s,onClose:a,fetchMembers:o}){const[v,x]=n.useState(""),[g,f]=n.useState(null),[d,y]=n.useState(!1),{chapterSlug:j}=L(),k=n.useRef(null),S=()=>{x(""),f(null)},M=async()=>{try{const i=await I.get(`/api/admin/chapters/${j}/bulk-members-add-get-template`,{responseType:"blob"}),t=new Blob([i.data],{type:i.headers["content-type"]}),l=URL.createObjectURL(t),h=document.createElement("a");h.href=l,h.setAttribute("download","members_template.xlsx"),document.body.appendChild(h),h.click(),document.body.removeChild(h)}catch(i){p.error("Failed to download the Excel template."),console.error("Template download error:",i)}},R=i=>{var h;const t=(h=i.target.files)==null?void 0:h[0];if(!t)return;if(!(t.name.endsWith(".xlsx")||t.name.endsWith(".xls"))){p.error("Only Excel files (.xlsx, .xls) are allowed."),x("");return}x(t.name),f(null),p.success(`Selected file: ${t.name}`)},D=async()=>{var l,h;const i=(h=(l=k.current)==null?void 0:l.files)==null?void 0:h[0];if(!i){p.error("Please select an Excel file to validate.");return}const t=new FormData;t.append("excelFile",i);try{const c=await I.post(`/api/admin/chapters/${j}/bulk-members-add-check-format`,t,{headers:{"Content-Type":"multipart/form-data"},responseType:"blob",validateStatus:()=>!0});if(c.status===200)p.success("Excel file validated successfully.");else{const m=new Blob([c.data],{type:c.headers["content-type"]}),C=URL.createObjectURL(m),w=document.createElement("a");w.href=C,w.setAttribute("download","validation_result.xlsx"),document.body.appendChild(w),w.click(),document.body.removeChild(w),p.error("Validation failed. Please check the downloaded file for details.")}}catch(c){p.error("Validation failed. Please check the file contents."),console.error("Validation error:",c)}},N=async()=>{var l,h;const i=(h=(l=k.current)==null?void 0:l.files)==null?void 0:h[0];if(!i){p.error("Please select an Excel file to submit.");return}y(!0);const t=new FormData;t.append("excelFile",i);try{const c=await I.post(`/api/admin/chapters/${j}/add-bulk-members`,t,{headers:{"Content-Type":"multipart/form-data"},validateStatus:()=>!0});c.status===200?(p.success("Members added successfully!"),x(""),f(null),a(),o()):(f(c.data.errorDetails),p.error("Submission failed. Please fix the errors below."))}catch(c){p.error("Submission failed. Please try again."),console.error("Submission error:",c)}finally{y(!1)}},u=(i,t)=>!t||t.length===0?null:e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-red-600",children:i}),e.jsx("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-1",children:t.map((l,h)=>e.jsx("li",{className:"text-sm text-red-500",children:l.message},h))})]});return e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Super Admin Member Table"}),e.jsxs(P,{open:s,onOpenChange:a,children:[e.jsx($,{asChild:!0,children:e.jsx(b,{onClick:S,children:"Add Bulk Member"})}),e.jsxs(E,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(W,{children:[e.jsx(T,{className:"text-lg font-semibold",children:"Add Bulk Member"}),g&&e.jsxs("button",{onClick:()=>f(null),className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),g?e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Validation Errors Found"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please fix the following errors in your Excel file and try again."}),u("Duplicate Emails",g.duplicateEmail),u("Duplicate Phone Numbers",g.duplicatePhoneNumber),u("Missing First Names",g.noFirstName),u("Missing Contact Info",g.noPhoneAndEmail),u("Invalid Role Names",g.invalidRoleName),u("Missing Join Dates",g.noJoinDate),u("Missing Last Names",g.noLastName),e.jsx(b,{variant:"outline",className:"mt-4 w-full",onClick:()=>f(null),children:"Back to Upload"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground mt-2",children:[e.jsx("li",{children:"Download the template"}),e.jsx("li",{children:"Edit the template carefully"}),e.jsx("li",{children:"Upload the completed file"})]}),e.jsxs(b,{onClick:M,variant:"outline",className:"w-full mt-4 flex items-center justify-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Download Excel template"]}),e.jsxs("div",{onClick:()=>{var i;return(i=k.current)==null?void 0:i.click()},className:"border-2 border-dashed border-gray-300 rounded-xl p-6 mt-4 text-center cursor-pointer hover:bg-gray-50",children:[e.jsx(Te,{className:"mx-auto h-6 w-6 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:v?`Selected: ${v}`:"No file chosen"}),e.jsx(B,{type:"file",accept:".xlsx, .xls",ref:k,onChange:R,className:"hidden"})]}),e.jsxs(A,{className:"mt-6 flex justify-end gap-2",children:[e.jsx(b,{variant:"secondary",onClick:D,disabled:d,children:d?"Validating...":"Validate"}),e.jsx(b,{onClick:N,disabled:d,children:d?"Submitting...":"Submit"})]})]})]})]})]})}const ns=()=>{const[s,a]=n.useState([]),[o,v]=n.useState(!0),[x,g]=n.useState(""),[f,d]=n.useState(!1),[y,j]=n.useState(!1),[k,S]=n.useState(0),M=q(),R=new URLSearchParams(M.search),D=parseInt(R.get("rows"))||10,N=parseInt(R.get("page"))||0,{chapterSlug:u}=L(),[i,t]=n.useState([{roleId:1,roleName:"Admin",roleDescription:"Administrator role with full access",rights:"all",removable:!1},{roleId:2,roleName:"Editor",roleDescription:"Editor role with limited access",rights:"edit",removable:!0},{roleId:3,roleName:"Viewer",roleDescription:"Viewer role with read-only access",rights:"view",removable:!0},{roleId:6,roleName:"Member",roleDescription:"Member role with limited access",rights:"view",removable:!0}]);n.useEffect(()=>{l(),h()},[D,N,u,x]);const l=()=>{I.get(`/api/admin/chapter-member-list/${u}/members?rows=${D}&page=${N+1}&searchQuery=${x}`).then(c=>{const m=c.data.data.map(C=>({...C,onRoleEdit:()=>{handleRoleSelection(C.memberId,C.roles.map(w=>w.roleId),i)}}));a(m),S(c.data.totalRecords||c.data.length),v(!1)}).catch(()=>{p.error("Failed to fetch Members"),v(!1)})},h=()=>{I.get(`/api/admin/chapters/${u}/roles`).then(c=>{t(c.data)}).catch(()=>{p.error("Failed to fetch roles")})};return e.jsxs(re,{className:"p-5 shadow-md",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Super Admin Chapter Member Table"}),e.jsxs("div",{className:"flex gap-2 flex-wrap sm:gap-5",children:[e.jsx(b,{onClick:()=>d(!0),children:"Add Member"}),e.jsx(b,{onClick:()=>j(!0),children:"Add Bulk Member"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pe,{onChange:c=>g(c.target.value),value:x,placeholder:"Search by member name, email, phone number or role",className:"mb-3 w-full"})})]}),o?e.jsx("p",{children:"Loading..."}):e.jsx($e,{data:s.map(c=>({...c,fetchMembers:l})),columns:Ae(i),searchInputField:"memberName",totalRecord:k,pagination:{pageSize:parseInt(D),pageIndex:parseInt(N)}}),e.jsx(ts,{isOpen:f,onClose:()=>d(!1),chapterSlug:u,fetchMembers:l}),e.jsx(rs,{isAddDialogOpen:y,onClose:()=>j(!1),fetchMembers:l})]})},Vs=()=>{const{chapterSlug:s}=L();return e.jsxs(e.Fragment,{children:[e.jsx(ne,{items:[{name:"Dashboard",link:"/admin"},{name:"Chapter ",link:"/admin/chapters"},{name:"Chapter Members",link:`/admin/chapters/${s}/member`}]}),e.jsx(ns,{})]})};export{Vs as default};
