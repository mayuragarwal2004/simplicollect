import{d as dr,j as e,B as oe,u as _t,a as Ge,r as d,K as ur,k as hr,H as Rt,m as pr,T as fr,e as tt,g as Be,c as de,Q as ae,D as Te,n as Ke,t as Je,w as Ze,v as yt,s as vt,R as mr}from"./index-CcyABReA.js";import{B as xr}from"./Breadcrumb-Bt9gBFUs.js";import{S as je,a as Ce,b as Ne,c as Ee,d as Se,e as Le,f as Me}from"./select-B3urF3Hi.js";import{T as De,a as Fe,b as le,c as Z,d as $e,e as A}from"./table-BXqGsErc.js";import{u as Pt,a as Tt,b as kt,f as qe,c as At}from"./usePagination-C59AlEqw.js";import{D as Ot,C as It,a as Lt,b as Mt}from"./react-icons.esm-BzHOPdLi.js";import{B as ze}from"./badge-BDjuXPks.js";import{u as gr,o as yr,s as vr,f as br,b as wr,d as jr,h as Cr,l as Nr,e as Er}from"./index-sjTRltFJ.js";import{A as Sr,b as _r,a as Rr}from"./alert-CxhHq2Nn.js";import{S as Ie}from"./skeleton-C2KhqAQG.js";import{M as Pr,a as Tr}from"./MemberLedgerReportcolumn-Dsv40nHE.js";import{C as kr,f as Ar}from"./ChooseMemberPopoverCommand-CxOK0rqG.js";import{C as Or}from"./checkbox-B3RY7Jod.js";import"./jspdf.plugin.autotable-BWSFR1kF.js";import{D as Ir,f as Lr,a as Mr,b as Dr,c as Fr,d as $r}from"./dialog-BhvudPjP.js";import{L as rt}from"./label-DkJgDQ9K.js";import{I as et}from"./input-DI8PfTs9.js";import{P as nt,a as st,b as at}from"./popover-XWgxwwby.js";import{C as ot}from"./calendar-BrvYrJzF.js";import{C as it}from"./calendar-BDVSWBWC.js";import{f as pe}from"./format-SmSpYad1.js";import{S as Ur}from"./switch-Cyf8udgh.js";import"./chevron-right-w6QnsD3M.js";import"./index-BdQq_4o_.js";import"./index-BXwgaSlv.js";import"./index-BBmkKsXB.js";import"./index-B2Rd_dEO.js";import"./index-Bnm6sZYZ.js";import"./index-DshIeolU.js";import"./chevron-down-D_eirmdc.js";import"./index-CWw0P0dO.js";import"./command-DzESqg9Q.js";import"./index-Bf-H7HrM.js";import"./index-BiMNnMJT.js";import"./search-Bl5VJYkV.js";import"./chevrons-up-down-BS_U-1YP.js";import"./chevron-left-D1BS-Pp4.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bt=dr("Info",Br);function Hr({table:t,totalRecord:o}){return e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 px-2 lg:flex-row lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:flex-row sm:space-x-6 sm:space-y-0",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.getFilteredRowModel().rows.length," row(s)."]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(je,{value:`${t.getState().pagination.pageSize}`,onValueChange:i=>{t.setPageSize(Number(i))},children:[e.jsx(Ce,{className:"h-8 w-[70px]",children:e.jsx(Ne,{placeholder:t.getState().pagination.pageSize})}),e.jsx(Ee,{side:"top",children:[5,10,20,30,40,50].map(i=>e.jsx(Se,{value:`${i}`,children:i},i))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Record: ",o]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of ",t.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanPreviousPage(),onClick:()=>t.setPageIndex(0),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(Ot,{className:"h-4 w-4"})]}),e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanPreviousPage(),onClick:t.previousPage,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(It,{className:"h-4 w-4"})]}),e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanNextPage(),onClick:t.nextPage,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(Lt,{className:"h-4 w-4"})]}),e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanNextPage(),onClick:()=>t.setPageIndex(t.getPageCount()-1),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(Mt,{className:"h-4 w-4"})]})]})]})]})}function zr({columns:t,data:o,searchInputField:i,filterField:a,filterFieldName:c,filterCategoriesList:n,totalRecord:f,children:m}){var P;const g=_t(),{rows:l,onPaginationChange:h,page:w,pagination:x}=Pt(),p=Ge(),N=()=>{const C=new URLSearchParams(p.search),R=At({rows:l,page:w},C);g(`?${R}`,{replace:!0})};d.useEffect(()=>{N()},[l,w]);const v=Tt({data:o,columns:t,getCoreRowModel:kt(),manualPagination:!0,onPaginationChange:h,state:{pagination:x},rowCount:f}),S=d.Children.map(m,C=>d.isValidElement(C)?d.cloneElement(C,{table:v,searchInputField:i,filterField:a,filterFieldName:c,filterCategoriesList:n}):C);return e.jsxs("div",{className:"space-y-4",children:[S,e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(De,{children:[e.jsx(Fe,{children:v.getHeaderGroups().map(C=>e.jsx(le,{children:C.headers.map(R=>e.jsx(Z,{className:"px-4 py-2 bg-newprimaryColor text-white font-raleway",colSpan:R.colSpan,children:R.isPlaceholder?null:qe(R.column.columnDef.header,R.getContext())},R.id))},C.id))}),e.jsx($e,{className:"bg-adminBreadCrumbsBg font-raleway",children:(P=v.getRowModel().rows)!=null&&P.length?v.getRowModel().rows.map(C=>e.jsx(le,{"data-state":C.getIsSelected()&&"selected",children:C.getVisibleCells().map(R=>e.jsx(A,{className:"px-4 py-2",children:qe(R.column.columnDef.cell,R.getContext())},R.id))},C.id)):e.jsx(le,{children:e.jsx(A,{colSpan:t.length,className:"h-24 text-center bg-adminBreadCrumbsBg font-raleway",children:"No results."})})})]})}),e.jsx(Hr,{table:v,totalRecord:f})]})}const wt=[{id:"srno",header:()=>e.jsx("p",{className:"font-semibold",children:"Sr. No."}),cell:t=>e.jsx("p",{className:"text-muted-foreground",children:t.row.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"firstName",header:()=>e.jsx("div",{className:"font-semibold",children:"Member Name"}),cell:({row:t})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"font-medium",children:[t.original.firstName," ",t.original.lastName]}),t.original.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.original.email})]}),enableSorting:!1,enableHiding:!1}];function ye(t,o,{checkForDefaultPrevented:i=!0}={}){return function(c){if(t==null||t(c),i===!1||!c.defaultPrevented)return o==null?void 0:o(c)}}function jt(t,o){if(typeof t=="function")return t(o);t!=null&&(t.current=o)}function Wr(...t){return o=>{let i=!1;const a=t.map(c=>{const n=jt(c,o);return!i&&typeof n=="function"&&(i=!0),n});if(i)return()=>{for(let c=0;c<a.length;c++){const n=a[c];typeof n=="function"?n():jt(t[c],null)}}}}function _e(...t){return d.useCallback(Wr(...t),t)}function Dt(t,o=[]){let i=[];function a(n,f){const m=d.createContext(f),g=i.length;i=[...i,f];const l=w=>{var P;const{scope:x,children:p,...N}=w,v=((P=x==null?void 0:x[t])==null?void 0:P[g])||m,S=d.useMemo(()=>N,Object.values(N));return e.jsx(v.Provider,{value:S,children:p})};l.displayName=n+"Provider";function h(w,x){var v;const p=((v=x==null?void 0:x[t])==null?void 0:v[g])||m,N=d.useContext(p);if(N)return N;if(f!==void 0)return f;throw new Error(`\`${w}\` must be used within \`${n}\``)}return[l,h]}const c=()=>{const n=i.map(f=>d.createContext(f));return function(m){const g=(m==null?void 0:m[t])||n;return d.useMemo(()=>({[`__scope${t}`]:{...m,[t]:g}}),[m,g])}};return c.scopeName=t,[a,Kr(c,...o)]}function Kr(...t){const o=t[0];if(t.length===1)return o;const i=()=>{const a=t.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(n){const f=a.reduce((m,{useScope:g,scopeName:l})=>{const w=g(n)[`__scope${l}`];return{...m,...w}},{});return d.useMemo(()=>({[`__scope${o.scopeName}`]:f}),[f])}};return i.scopeName=o.scopeName,i}var qr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=qr.reduce((t,o)=>{const i=ur(`Primitive.${o}`),a=d.forwardRef((c,n)=>{const{asChild:f,...m}=c,g=f?i:o;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...m,ref:n})});return a.displayName=`Primitive.${o}`,{...t,[o]:a}},{});function Gr(t,o){t&&hr.flushSync(()=>t.dispatchEvent(o))}function Ve(t){const o=d.useRef(t);return d.useEffect(()=>{o.current=t}),d.useMemo(()=>(...i)=>{var a;return(a=o.current)==null?void 0:a.call(o,...i)},[])}function Vr(t,o=globalThis==null?void 0:globalThis.document){const i=Ve(t);d.useEffect(()=>{const a=c=>{c.key==="Escape"&&i(c)};return o.addEventListener("keydown",a,{capture:!0}),()=>o.removeEventListener("keydown",a,{capture:!0})},[i,o])}var Yr="DismissableLayer",lt="dismissableLayer.update",Qr="dismissableLayer.pointerDownOutside",Xr="dismissableLayer.focusOutside",Ct,Ft=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$t=d.forwardRef((t,o)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:n,onInteractOutside:f,onDismiss:m,...g}=t,l=d.useContext(Ft),[h,w]=d.useState(null),x=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),N=_e(o,y=>w(y)),v=Array.from(l.layers),[S]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),P=v.indexOf(S),C=h?v.indexOf(h):-1,R=l.layersWithOutsidePointerEventsDisabled.size>0,G=C>=P,te=en(y=>{const r=y.target,s=[...l.branches].some(u=>u.contains(r));!G||s||(c==null||c(y),f==null||f(y),y.defaultPrevented||m==null||m())},x),q=tn(y=>{const r=y.target;[...l.branches].some(u=>u.contains(r))||(n==null||n(y),f==null||f(y),y.defaultPrevented||m==null||m())},x);return Vr(y=>{C===l.layers.size-1&&(a==null||a(y),!y.defaultPrevented&&m&&(y.preventDefault(),m()))},x),d.useEffect(()=>{if(h)return i&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Ct=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(h)),l.layers.add(h),Nt(),()=>{i&&l.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=Ct)}},[h,x,i,l]),d.useEffect(()=>()=>{h&&(l.layers.delete(h),l.layersWithOutsidePointerEventsDisabled.delete(h),Nt())},[h,l]),d.useEffect(()=>{const y=()=>p({});return document.addEventListener(lt,y),()=>document.removeEventListener(lt,y)},[]),e.jsx(we.div,{...g,ref:N,style:{pointerEvents:R?G?"auto":"none":void 0,...t.style},onFocusCapture:ye(t.onFocusCapture,q.onFocusCapture),onBlurCapture:ye(t.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ye(t.onPointerDownCapture,te.onPointerDownCapture)})});$t.displayName=Yr;var Jr="DismissableLayerBranch",Zr=d.forwardRef((t,o)=>{const i=d.useContext(Ft),a=d.useRef(null),c=_e(o,a);return d.useEffect(()=>{const n=a.current;if(n)return i.branches.add(n),()=>{i.branches.delete(n)}},[i.branches]),e.jsx(we.div,{...t,ref:c})});Zr.displayName=Jr;function en(t,o=globalThis==null?void 0:globalThis.document){const i=Ve(t),a=d.useRef(!1),c=d.useRef(()=>{});return d.useEffect(()=>{const n=m=>{if(m.target&&!a.current){let g=function(){Ut(Qr,i,l,{discrete:!0})};const l={originalEvent:m};m.pointerType==="touch"?(o.removeEventListener("click",c.current),c.current=g,o.addEventListener("click",c.current,{once:!0})):g()}else o.removeEventListener("click",c.current);a.current=!1},f=window.setTimeout(()=>{o.addEventListener("pointerdown",n)},0);return()=>{window.clearTimeout(f),o.removeEventListener("pointerdown",n),o.removeEventListener("click",c.current)}},[o,i]),{onPointerDownCapture:()=>a.current=!0}}function tn(t,o=globalThis==null?void 0:globalThis.document){const i=Ve(t),a=d.useRef(!1);return d.useEffect(()=>{const c=n=>{n.target&&!a.current&&Ut(Xr,i,{originalEvent:n},{discrete:!1})};return o.addEventListener("focusin",c),()=>o.removeEventListener("focusin",c)},[o,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Nt(){const t=new CustomEvent(lt);document.dispatchEvent(t)}function Ut(t,o,i,{discrete:a}){const c=i.originalEvent.target,n=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i});o&&c.addEventListener(t,o,{once:!0}),a?Gr(c,n):c.dispatchEvent(n)}var be=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},rn=Rt[" useId ".trim().toString()]||(()=>{}),nn=0;function sn(t){const[o,i]=d.useState(rn());return be(()=>{i(a=>a??String(nn++))},[t]),o?`radix-${o}`:""}var an="Arrow",Bt=d.forwardRef((t,o)=>{const{children:i,width:a=10,height:c=5,...n}=t;return e.jsx(we.svg,{...n,ref:o,width:a,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?i:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Bt.displayName=an;var on=Bt;function ln(t){const[o,i]=d.useState(void 0);return be(()=>{if(t){i({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const n=c[0];let f,m;if("borderBoxSize"in n){const g=n.borderBoxSize,l=Array.isArray(g)?g[0]:g;f=l.inlineSize,m=l.blockSize}else f=t.offsetWidth,m=t.offsetHeight;i({width:f,height:m})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else i(void 0)},[t]),o}var ut="Popper",[Ht,zt]=Dt(ut),[cn,Wt]=Ht(ut),Kt=t=>{const{__scopePopper:o,children:i}=t,[a,c]=d.useState(null);return e.jsx(cn,{scope:o,anchor:a,onAnchorChange:c,children:i})};Kt.displayName=ut;var qt="PopperAnchor",Gt=d.forwardRef((t,o)=>{const{__scopePopper:i,virtualRef:a,...c}=t,n=Wt(qt,i),f=d.useRef(null),m=_e(o,f);return d.useEffect(()=>{n.onAnchorChange((a==null?void 0:a.current)||f.current)}),a?null:e.jsx(we.div,{...c,ref:m})});Gt.displayName=qt;var ht="PopperContent",[dn,un]=Ht(ht),Vt=d.forwardRef((t,o)=>{var ce,M,U,V,k,Y;const{__scopePopper:i,side:a="bottom",sideOffset:c=0,align:n="center",alignOffset:f=0,arrowPadding:m=0,avoidCollisions:g=!0,collisionBoundary:l=[],collisionPadding:h=0,sticky:w="partial",hideWhenDetached:x=!1,updatePositionStrategy:p="optimized",onPlaced:N,...v}=t,S=Wt(ht,i),[P,C]=d.useState(null),R=_e(o,Q=>C(Q)),[G,te]=d.useState(null),q=ln(G),y=(q==null?void 0:q.width)??0,r=(q==null?void 0:q.height)??0,s=a+(n!=="center"?"-"+n:""),u=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},j=Array.isArray(l)?l:[l],b=j.length>0,_={padding:u,boundary:j.filter(pn),altBoundary:b},{refs:z,floatingStyles:$,placement:se,isPositioned:I,middlewareData:B}=gr({strategy:"fixed",placement:s,whileElementsMounted:(...Q)=>Er(...Q,{animationFrame:p==="always"}),elements:{reference:S.anchor},middleware:[yr({mainAxis:c+r,alignmentAxis:f}),g&&vr({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?Nr():void 0,..._}),g&&br({..._}),wr({..._,apply:({elements:Q,rects:H,availableWidth:W,availableHeight:F})=>{const{width:he,height:L}=H.reference,K=Q.floating.style;K.setProperty("--radix-popper-available-width",`${W}px`),K.setProperty("--radix-popper-available-height",`${F}px`),K.setProperty("--radix-popper-anchor-width",`${he}px`),K.setProperty("--radix-popper-anchor-height",`${L}px`)}}),G&&jr({element:G,padding:m}),fn({arrowWidth:y,arrowHeight:r}),x&&Cr({strategy:"referenceHidden",..._})]}),[T,re]=Xt(se),O=Ve(N);be(()=>{I&&(O==null||O())},[I,O]);const D=(ce=B.arrow)==null?void 0:ce.x,E=(M=B.arrow)==null?void 0:M.y,J=((U=B.arrow)==null?void 0:U.centerOffset)!==0,[X,ee]=d.useState();return be(()=>{P&&ee(window.getComputedStyle(P).zIndex)},[P]),e.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:I?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(V=B.transformOrigin)==null?void 0:V.x,(k=B.transformOrigin)==null?void 0:k.y].join(" "),...((Y=B.hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(dn,{scope:i,placedSide:T,onArrowChange:te,arrowX:D,arrowY:E,shouldHideArrow:J,children:e.jsx(we.div,{"data-side":T,"data-align":re,...v,ref:R,style:{...v.style,animation:I?void 0:"none"}})})})});Vt.displayName=ht;var Yt="PopperArrow",hn={top:"bottom",right:"left",bottom:"top",left:"right"},Qt=d.forwardRef(function(o,i){const{__scopePopper:a,...c}=o,n=un(Yt,a),f=hn[n.placedSide];return e.jsx("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[f]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:e.jsx(on,{...c,ref:i,style:{...c.style,display:"block"}})})});Qt.displayName=Yt;function pn(t){return t!==null}var fn=t=>({name:"transformOrigin",options:t,fn(o){var S,P,C;const{placement:i,rects:a,middlewareData:c}=o,f=((S=c.arrow)==null?void 0:S.centerOffset)!==0,m=f?0:t.arrowWidth,g=f?0:t.arrowHeight,[l,h]=Xt(i),w={start:"0%",center:"50%",end:"100%"}[h],x=(((P=c.arrow)==null?void 0:P.x)??0)+m/2,p=(((C=c.arrow)==null?void 0:C.y)??0)+g/2;let N="",v="";return l==="bottom"?(N=f?w:`${x}px`,v=`${-g}px`):l==="top"?(N=f?w:`${x}px`,v=`${a.floating.height+g}px`):l==="right"?(N=`${-g}px`,v=f?w:`${p}px`):l==="left"&&(N=`${a.floating.width+g}px`,v=f?w:`${p}px`),{data:{x:N,y:v}}}});function Xt(t){const[o,i="center"]=t.split("-");return[o,i]}var mn=Kt,xn=Gt,gn=Vt,yn=Qt,vn="Portal",Jt=d.forwardRef((t,o)=>{var m;const{container:i,...a}=t,[c,n]=d.useState(!1);be(()=>n(!0),[]);const f=i||c&&((m=globalThis==null?void 0:globalThis.document)==null?void 0:m.body);return f?pr.createPortal(e.jsx(we.div,{...a,ref:o}),f):null});Jt.displayName=vn;function bn(t,o){return d.useReducer((i,a)=>o[i][a]??i,t)}var pt=t=>{const{present:o,children:i}=t,a=wn(o),c=typeof i=="function"?i({present:a.isPresent}):d.Children.only(i),n=_e(a.ref,jn(c));return typeof i=="function"||a.isPresent?d.cloneElement(c,{ref:n}):null};pt.displayName="Presence";function wn(t){const[o,i]=d.useState(),a=d.useRef(null),c=d.useRef(t),n=d.useRef("none"),f=t?"mounted":"unmounted",[m,g]=bn(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const l=We(a.current);n.current=m==="mounted"?l:"none"},[m]),be(()=>{const l=a.current,h=c.current;if(h!==t){const x=n.current,p=We(l);t?g("MOUNT"):p==="none"||(l==null?void 0:l.display)==="none"?g("UNMOUNT"):g(h&&x!==p?"ANIMATION_OUT":"UNMOUNT"),c.current=t}},[t,g]),be(()=>{if(o){let l;const h=o.ownerDocument.defaultView??window,w=p=>{const v=We(a.current).includes(p.animationName);if(p.target===o&&v&&(g("ANIMATION_END"),!c.current)){const S=o.style.animationFillMode;o.style.animationFillMode="forwards",l=h.setTimeout(()=>{o.style.animationFillMode==="forwards"&&(o.style.animationFillMode=S)})}},x=p=>{p.target===o&&(n.current=We(a.current))};return o.addEventListener("animationstart",x),o.addEventListener("animationcancel",w),o.addEventListener("animationend",w),()=>{h.clearTimeout(l),o.removeEventListener("animationstart",x),o.removeEventListener("animationcancel",w),o.removeEventListener("animationend",w)}}else g("ANIMATION_END")},[o,g]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:d.useCallback(l=>{a.current=l?getComputedStyle(l):null,i(l)},[])}}function We(t){return(t==null?void 0:t.animationName)||"none"}function jn(t){var a,c;let o=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,i=o&&"isReactWarning"in o&&o.isReactWarning;return i?t.ref:(o=(c=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:c.get,i=o&&"isReactWarning"in o&&o.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}var Cn=Rt[" useInsertionEffect ".trim().toString()]||be;function Nn({prop:t,defaultProp:o,onChange:i=()=>{},caller:a}){const[c,n,f]=En({defaultProp:o,onChange:i}),m=t!==void 0,g=m?t:c;{const h=d.useRef(t!==void 0);d.useEffect(()=>{const w=h.current;w!==m&&console.warn(`${a} is changing from ${w?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=m},[m,a])}const l=d.useCallback(h=>{var w;if(m){const x=Sn(h)?h(t):h;x!==t&&((w=f.current)==null||w.call(f,x))}else n(h)},[m,t,n,f]);return[g,l]}function En({defaultProp:t,onChange:o}){const[i,a]=d.useState(t),c=d.useRef(i),n=d.useRef(o);return Cn(()=>{n.current=o},[o]),d.useEffect(()=>{var f;c.current!==i&&((f=n.current)==null||f.call(n,i),c.current=i)},[i,c]),[i,a,n]}function Sn(t){return typeof t=="function"}var _n=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Rn="VisuallyHidden",Zt=d.forwardRef((t,o)=>e.jsx(we.span,{...t,ref:o,style:{..._n,...t.style}}));Zt.displayName=Rn;var Pn=Zt,[Ye,qs]=Dt("Tooltip",[zt]),Qe=zt(),er="TooltipProvider",Tn=700,ct="tooltip.open",[kn,ft]=Ye(er),tr=t=>{const{__scopeTooltip:o,delayDuration:i=Tn,skipDelayDuration:a=300,disableHoverableContent:c=!1,children:n}=t,f=d.useRef(!0),m=d.useRef(!1),g=d.useRef(0);return d.useEffect(()=>{const l=g.current;return()=>window.clearTimeout(l)},[]),e.jsx(kn,{scope:o,isOpenDelayedRef:f,delayDuration:i,onOpen:d.useCallback(()=>{window.clearTimeout(g.current),f.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>f.current=!0,a)},[a]),isPointerInTransitRef:m,onPointerInTransitChange:d.useCallback(l=>{m.current=l},[]),disableHoverableContent:c,children:n})};tr.displayName=er;var Ue="Tooltip",[An,He]=Ye(Ue),rr=t=>{const{__scopeTooltip:o,children:i,open:a,defaultOpen:c,onOpenChange:n,disableHoverableContent:f,delayDuration:m}=t,g=ft(Ue,t.__scopeTooltip),l=Qe(o),[h,w]=d.useState(null),x=sn(),p=d.useRef(0),N=f??g.disableHoverableContent,v=m??g.delayDuration,S=d.useRef(!1),[P,C]=Nn({prop:a,defaultProp:c??!1,onChange:y=>{y?(g.onOpen(),document.dispatchEvent(new CustomEvent(ct))):g.onClose(),n==null||n(y)},caller:Ue}),R=d.useMemo(()=>P?S.current?"delayed-open":"instant-open":"closed",[P]),G=d.useCallback(()=>{window.clearTimeout(p.current),p.current=0,S.current=!1,C(!0)},[C]),te=d.useCallback(()=>{window.clearTimeout(p.current),p.current=0,C(!1)},[C]),q=d.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{S.current=!0,C(!0),p.current=0},v)},[v,C]);return d.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),e.jsx(mn,{...l,children:e.jsx(An,{scope:o,contentId:x,open:P,stateAttribute:R,trigger:h,onTriggerChange:w,onTriggerEnter:d.useCallback(()=>{g.isOpenDelayedRef.current?q():G()},[g.isOpenDelayedRef,q,G]),onTriggerLeave:d.useCallback(()=>{N?te():(window.clearTimeout(p.current),p.current=0)},[te,N]),onOpen:G,onClose:te,disableHoverableContent:N,children:i})})};rr.displayName=Ue;var dt="TooltipTrigger",nr=d.forwardRef((t,o)=>{const{__scopeTooltip:i,...a}=t,c=He(dt,i),n=ft(dt,i),f=Qe(i),m=d.useRef(null),g=_e(o,m,c.onTriggerChange),l=d.useRef(!1),h=d.useRef(!1),w=d.useCallback(()=>l.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",w),[w]),e.jsx(xn,{asChild:!0,...f,children:e.jsx(we.button,{"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute,...a,ref:g,onPointerMove:ye(t.onPointerMove,x=>{x.pointerType!=="touch"&&!h.current&&!n.isPointerInTransitRef.current&&(c.onTriggerEnter(),h.current=!0)}),onPointerLeave:ye(t.onPointerLeave,()=>{c.onTriggerLeave(),h.current=!1}),onPointerDown:ye(t.onPointerDown,()=>{c.open&&c.onClose(),l.current=!0,document.addEventListener("pointerup",w,{once:!0})}),onFocus:ye(t.onFocus,()=>{l.current||c.onOpen()}),onBlur:ye(t.onBlur,c.onClose),onClick:ye(t.onClick,c.onClose)})})});nr.displayName=dt;var mt="TooltipPortal",[On,In]=Ye(mt,{forceMount:void 0}),sr=t=>{const{__scopeTooltip:o,forceMount:i,children:a,container:c}=t,n=He(mt,o);return e.jsx(On,{scope:o,forceMount:i,children:e.jsx(pt,{present:i||n.open,children:e.jsx(Jt,{asChild:!0,container:c,children:a})})})};sr.displayName=mt;var ke="TooltipContent",ar=d.forwardRef((t,o)=>{const i=In(ke,t.__scopeTooltip),{forceMount:a=i.forceMount,side:c="top",...n}=t,f=He(ke,t.__scopeTooltip);return e.jsx(pt,{present:a||f.open,children:f.disableHoverableContent?e.jsx(or,{side:c,...n,ref:o}):e.jsx(Ln,{side:c,...n,ref:o})})}),Ln=d.forwardRef((t,o)=>{const i=He(ke,t.__scopeTooltip),a=ft(ke,t.__scopeTooltip),c=d.useRef(null),n=_e(o,c),[f,m]=d.useState(null),{trigger:g,onClose:l}=i,h=c.current,{onPointerInTransitChange:w}=a,x=d.useCallback(()=>{m(null),w(!1)},[w]),p=d.useCallback((N,v)=>{const S=N.currentTarget,P={x:N.clientX,y:N.clientY},C=Un(P,S.getBoundingClientRect()),R=Bn(P,C),G=Hn(v.getBoundingClientRect()),te=Wn([...R,...G]);m(te),w(!0)},[w]);return d.useEffect(()=>()=>x(),[x]),d.useEffect(()=>{if(g&&h){const N=S=>p(S,h),v=S=>p(S,g);return g.addEventListener("pointerleave",N),h.addEventListener("pointerleave",v),()=>{g.removeEventListener("pointerleave",N),h.removeEventListener("pointerleave",v)}}},[g,h,p,x]),d.useEffect(()=>{if(f){const N=v=>{const S=v.target,P={x:v.clientX,y:v.clientY},C=(g==null?void 0:g.contains(S))||(h==null?void 0:h.contains(S)),R=!zn(P,f);C?x():R&&(x(),l())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[g,h,f,l,x]),e.jsx(or,{...t,ref:n})}),[Mn,Dn]=Ye(Ue,{isInside:!1}),Fn=fr("TooltipContent"),or=d.forwardRef((t,o)=>{const{__scopeTooltip:i,children:a,"aria-label":c,onEscapeKeyDown:n,onPointerDownOutside:f,...m}=t,g=He(ke,i),l=Qe(i),{onClose:h}=g;return d.useEffect(()=>(document.addEventListener(ct,h),()=>document.removeEventListener(ct,h)),[h]),d.useEffect(()=>{if(g.trigger){const w=x=>{const p=x.target;p!=null&&p.contains(g.trigger)&&h()};return window.addEventListener("scroll",w,{capture:!0}),()=>window.removeEventListener("scroll",w,{capture:!0})}},[g.trigger,h]),e.jsx($t,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:n,onPointerDownOutside:f,onFocusOutside:w=>w.preventDefault(),onDismiss:h,children:e.jsxs(gn,{"data-state":g.stateAttribute,...l,...m,ref:o,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Fn,{children:a}),e.jsx(Mn,{scope:i,isInside:!0,children:e.jsx(Pn,{id:g.contentId,role:"tooltip",children:c||a})})]})})});ar.displayName=ke;var ir="TooltipArrow",$n=d.forwardRef((t,o)=>{const{__scopeTooltip:i,...a}=t,c=Qe(i);return Dn(ir,i).isInside?null:e.jsx(yn,{...c,...a,ref:o})});$n.displayName=ir;function Un(t,o){const i=Math.abs(o.top-t.y),a=Math.abs(o.bottom-t.y),c=Math.abs(o.right-t.x),n=Math.abs(o.left-t.x);switch(Math.min(i,a,c,n)){case n:return"left";case c:return"right";case i:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Bn(t,o,i=5){const a=[];switch(o){case"top":a.push({x:t.x-i,y:t.y+i},{x:t.x+i,y:t.y+i});break;case"bottom":a.push({x:t.x-i,y:t.y-i},{x:t.x+i,y:t.y-i});break;case"left":a.push({x:t.x+i,y:t.y-i},{x:t.x+i,y:t.y+i});break;case"right":a.push({x:t.x-i,y:t.y-i},{x:t.x-i,y:t.y+i});break}return a}function Hn(t){const{top:o,right:i,bottom:a,left:c}=t;return[{x:c,y:o},{x:i,y:o},{x:i,y:a},{x:c,y:a}]}function zn(t,o){const{x:i,y:a}=t;let c=!1;for(let n=0,f=o.length-1;n<o.length;f=n++){const m=o[n],g=o[f],l=m.x,h=m.y,w=g.x,x=g.y;h>a!=x>a&&i<(w-l)*(a-h)/(x-h)+l&&(c=!c)}return c}function Wn(t){const o=t.slice();return o.sort((i,a)=>i.x<a.x?-1:i.x>a.x?1:i.y<a.y?-1:i.y>a.y?1:0),Kn(o)}function Kn(t){if(t.length<=1)return t.slice();const o=[];for(let a=0;a<t.length;a++){const c=t[a];for(;o.length>=2;){const n=o[o.length-1],f=o[o.length-2];if((n.x-f.x)*(c.y-f.y)>=(n.y-f.y)*(c.x-f.x))o.pop();else break}o.push(c)}o.pop();const i=[];for(let a=t.length-1;a>=0;a--){const c=t[a];for(;i.length>=2;){const n=i[i.length-1],f=i[i.length-2];if((n.x-f.x)*(c.y-f.y)>=(n.y-f.y)*(c.x-f.x))i.pop();else break}i.push(c)}return i.pop(),o.length===1&&i.length===1&&o[0].x===i[0].x&&o[0].y===i[0].y?o:o.concat(i)}var qn=tr,Gn=rr,Vn=nr,Yn=sr,lr=ar;const Qn=qn,Xn=Gn,Jn=Vn,cr=d.forwardRef(({className:t,sideOffset:o=4,...i},a)=>e.jsx(Yn,{children:e.jsx(lr,{ref:a,sideOffset:o,className:tt("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...i})}));cr.displayName=lr.displayName;const Zn=()=>{const t=Ge(),[o,i]=d.useState([]),{chapterData:a}=Be(),[c,n]=d.useState(null),f=new URLSearchParams(t.search),[m,g]=d.useState([]),[l,h]=d.useState([]),[w,x]=d.useState([]),[p,N]=d.useState(""),[v,S]=d.useState(""),P=f.get("rows")||10,C=f.get("page")||0,R=wt.map(({accessorKey:r,header:s})=>({label:s().props.children,key:r})),[G,te]=d.useState(R.map(({label:r})=>r)),q=r=>{switch(r==null?void 0:r.toLowerCase()){case"approved":return e.jsx(ze,{className:"bg-green-500 text-white",children:r});case"rejected":return e.jsx(ze,{className:"bg-red-500 text-white",children:r});case"pending":return e.jsx(ze,{className:"bg-yellow-500 text-white",children:"Pending Approval"});default:return e.jsx(ze,{className:"bg-gray-500 text-white",children:"N/A"})}},y=()=>{a!=null&&a.chapterId&&(!p||!v||de.get(`/api/report/${a.chapterId}/package-summary?rows=${P}&page=${C}`,{params:{chapterId:a.chapterId,rows:P,page:C,...p&&{termId:p}}}).then(r=>{var b;const s=(r.data.data||[]).map(_=>({..._,packageData:(_.packageData||[]).filter(z=>z.packageParent===v)}));i(s);const u=((b=s[0])==null?void 0:b.packageData)||[],j=[];for(let _=0;_<u.length;_++)j.push({accessorKey:`packageData_${_}`,header:()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:u[_].packageName}),e.jsx(Qn,{children:e.jsxs(Xn,{children:[e.jsx(Jn,{children:e.jsx(bt,{className:"w-4 h-4 text-muted-foreground"})}),e.jsxs(cr,{children:[e.jsxs("p",{children:["Package: ",u[_].packageName]}),e.jsx("p",{children:"Status indicates approval state"})]})]})})]}),cell:({row:z})=>{var se,I,B;const $=z.original.packageData[_];return e.jsx("div",{className:"flex flex-col gap-1",children:$!=null&&$.status?q($.status):(se=$==null?void 0:$.calculatedResult)!=null&&se.totalAmount?e.jsxs("span",{className:"font-medium",children:["₹",$.calculatedResult.totalAmount]}):((I=$==null?void 0:$.calculatedResult)==null?void 0:I.message)==="Package has overlapping payments"?e.jsx("span",{className:"text-green-500",children:"✔️"}):e.jsx("span",{className:"text-muted-foreground",children:((B=$==null?void 0:$.calculatedResult)==null?void 0:B.message)||"N/A"})})},enableSorting:!1,enableHiding:!1});g([...wt,...j]),n(r.data.totalRecords)}).catch(r=>{console.error(r)}))};return d.useEffect(()=>{a!=null&&a.chapterId&&de.get(`/api/term/chapter/${a.chapterId}`).then(r=>h(r.data)).catch(()=>h([]))},[a]),d.useEffect(()=>{if(!(a!=null&&a.chapterId)||!p){x([]),S("");return}de.get(`/api/packages/parents/${a.chapterId}?termId=${p}`).then(r=>x(r.data)).catch(()=>x([]))},[a,p]),d.useEffect(()=>{y()},[a,P,C,t.search,p,v]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Member Due Summary Report"})}),e.jsxs(Sr,{variant:"info",className:"mb-6",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx(_r,{children:"Report Information"}),e.jsx(Rr,{children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"This report shows member package statuses. Approved packages are marked in green, rejected in red, and pending approvals in yellow."}),e.jsx("li",{children:"The package data includes the package name, status, and total amount if applicable."}),e.jsx("li",{children:"The amount shows the total for each package if available if the respective user chooses to pay for the package."}),e.jsx("li",{children:"N/A indicates no data available for that package as the user need not pay for the package."})]})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(je,{value:p,onValueChange:N,children:[e.jsx(Ce,{className:"w-[180px]",children:e.jsx(Ne,{placeholder:"Select Term"})}),e.jsx(Ee,{children:e.jsxs(Le,{children:[e.jsx(Me,{children:"Term"}),l.map(r=>e.jsx(Se,{value:r.termId||r.id,children:r.termName||r.name||r.termId},r.termId||r.id))]})})]}),e.jsxs(je,{value:v,onValueChange:S,children:[e.jsx(Ce,{className:"w-[180px]",children:e.jsx(Ne,{placeholder:"Select Package Parent"})}),e.jsx(Ee,{children:e.jsxs(Le,{children:[e.jsx(Me,{children:"Package Parent"}),w.map(r=>e.jsx(Se,{value:r,children:r},r))]})})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",onClick:async()=>{if(!(!(a!=null&&a.chapterId)||!p))try{const r=await de.get(`/api/report/${a.chapterId}/all-members-excel?termId=${p}`,{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([r.data])),u=document.createElement("a");u.href=s,u.setAttribute("download","all-members-report.xlsx"),document.body.appendChild(u),u.click(),u.parentNode.removeChild(u),window.URL.revokeObjectURL(s)}catch(r){console.error("Failed to download Excel file:",r)}},disabled:!p,children:"Export to Excel"})]}),m&&e.jsx("div",{className:"rounded-md border",children:e.jsx(zr,{data:o,columns:m,searchInputField:"firstName",totalRecord:c,pagination:{pageSize:P,pageIndex:C},state:{pagination:{pageSize:P,pageIndex:C}}})})]})},es=()=>{const{chapterData:t}=Be(),[o,i]=d.useState([]),[a,c]=d.useState([]),[n,f]=d.useState(null),[m,g]=d.useState(!1),[l,h]=d.useState(""),[w,x]=d.useState([]),[p,N]=d.useState(!1),v=async()=>{try{const C=await de.get("/api/member/all",{params:{chapterId:t==null?void 0:t.chapterId}});i(C.data),c(C.data)}catch{ae.error("Error fetching members")}};d.useEffect(()=>{t!=null&&t.chapterId&&v()},[t]),d.useEffect(()=>{n&&P()},[n]);const S=async()=>{if(!n){ae.error("Please select a member");return}try{const C=await de.get(`/api/report/${t==null?void 0:t.chapterId}/member-ledger`,{params:{memberId:n.value},responseType:"blob"});if(C.status!==200){ae.error("Error exporting data");return}ae.success("Data exported successfully");const R=window.URL.createObjectURL(new Blob([C.data])),G=document.createElement("a");G.href=R,G.setAttribute("download",`${n.label} - ${new Date().toLocaleString()} - Member Ledger.xlsx`),document.body.appendChild(G),G.click(),G.remove()}catch(C){ae.error("Error exporting data"),console.error("Error exporting data:",C)}},P=async()=>{if(n){N(!0),x([]);try{const C=await de.get(`/api/report/${t==null?void 0:t.chapterId}/member-ledger-json`,{params:{memberId:n.value}});x(C.data),N(!1)}catch{ae.error("Error fetching ledger data"),N(!1)}}};return!t||!(t!=null&&t.chapterId)?null:e.jsxs("div",{className:"flex flex-col gap-4 mt-5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(kr,{members:o,selectedMember:n,setSelectedMember:f}),e.jsx(oe,{onClick:S,children:"Export Data"})]}),p?e.jsx(Ie,{className:"h-10 w-full mb-4"}):n?e.jsx(Pr,{data:w,columns:Tr,searchInputField:"firstName",totalRecord:0,pagination:{pageSize:10,pageIndex:0},state:{pagination:{pageSize:10,pageIndex:0}}}):null]})};function ts({table:t,totalRecord:o}){return e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 px-2 lg:flex-row lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:flex-row sm:space-x-6 sm:space-y-0",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.getFilteredRowModel().rows.length," row(s)."]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(je,{value:`${t.getState().pagination.pageSize}`,onValueChange:i=>{t.setPageSize(Number(i))},children:[e.jsx(Ce,{className:"h-8 w-[70px]",children:e.jsx(Ne,{placeholder:t.getState().pagination.pageSize})}),e.jsx(Ee,{side:"top",children:[5,10,20,30,40,50].map(i=>e.jsx(Se,{value:`${i}`,children:i},i))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Record: ",o]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of ",t.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanPreviousPage(),onClick:()=>t.setPageIndex(0),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(Ot,{className:"h-4 w-4"})]}),e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanPreviousPage(),onClick:t.previousPage,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(It,{className:"h-4 w-4"})]}),e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanNextPage(),onClick:t.nextPage,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(Lt,{className:"h-4 w-4"})]}),e.jsxs(oe,{variant:"outline",className:"h-8 w-8 p-0",disabled:!t.getCanNextPage(),onClick:()=>t.setPageIndex(t.getPageCount()-1),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(Mt,{className:"h-4 w-4"})]})]})]})]})}function rs({columns:t,data:o,searchInputField:i,filterField:a,filterFieldName:c,filterCategoriesList:n,totalRecord:f,children:m}){var P;const g=_t(),{rows:l,onPaginationChange:h,page:w,pagination:x}=Pt(),p=Ge(),N=()=>{const C=new URLSearchParams(p.search),R=At({rows:l,page:w},C);g(`?${R}`,{replace:!0})};d.useEffect(()=>{N()},[l,w]);const v=Tt({data:o,columns:t,getCoreRowModel:kt(),manualPagination:!0,onPaginationChange:h,state:{pagination:x},rowCount:f}),S=d.Children.map(m,C=>d.isValidElement(C)?d.cloneElement(C,{table:v,searchInputField:i,filterField:a,filterFieldName:c,filterCategoriesList:n}):C);return e.jsxs("div",{className:"space-y-4",children:[S,e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(De,{children:[e.jsx(Fe,{children:v.getHeaderGroups().map(C=>e.jsx(le,{children:C.headers.map(R=>e.jsx(Z,{className:"px-4 py-2 bg-newprimaryColor text-white font-raleway",colSpan:R.colSpan,children:R.isPlaceholder?null:qe(R.column.columnDef.header,R.getContext())},R.id))},C.id))}),e.jsx($e,{className:"bg-adminBreadCrumbsBg font-raleway",children:(P=v.getRowModel().rows)!=null&&P.length?v.getRowModel().rows.map(C=>e.jsx(le,{"data-state":C.getIsSelected()&&"selected",children:C.getVisibleCells().map(R=>e.jsx(A,{className:"px-4 py-2",children:qe(R.column.columnDef.cell,R.getContext())},R.id))},C.id)):e.jsx(le,{children:e.jsx(A,{colSpan:t.length,className:"h-24 text-center bg-adminBreadCrumbsBg font-raleway",children:"No results."})})})]})}),e.jsx(ts,{table:v,totalRecord:f})]})}const Et=[{id:"srno",header:()=>e.jsx("p",{className:!0,children:"Sr. No."}),cell:t=>e.jsx("p",{children:t.row.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:()=>e.jsx("div",{className:!0,children:"Member Name"}),cell:({row:t})=>e.jsxs("p",{className:"text-sm font-medium",children:[t.original.firstName," ",t.original.lastName]}),enableSorting:!1,enableHiding:!1},{accessorKey:"paidAmount",header:()=>e.jsx("div",{className:!0,children:"Amount Paid"}),cell:({row:t})=>e.jsx("p",{className:"text-sm font-medium",children:t.original.paidAmount}),enableSorting:!1,enableHiding:!1},{accessorKey:"balanceAmount",header:()=>e.jsx("div",{className:!0,children:"Balance"}),cell:({row:t})=>e.jsx("p",{className:"text-sm font-medium",children:t.original.balanceAmount}),enableSorting:!1,enableHiding:!1},{accessorKey:"packageName",header:()=>e.jsx("div",{className:!0,children:"Package Name"}),cell:({row:t})=>e.jsx("p",{className:"text-sm font-medium",children:t.original.packageName}),enableSorting:!1,enableHiding:!1},{accessorKey:"paymentType",header:()=>e.jsx("div",{className:!0,children:"Payment Type"}),cell:({row:t})=>e.jsx("p",{className:"text-sm font-medium",children:t.original.paymentType}),enableSorting:!1,enableHiding:!1},{accessorKey:"paymentReceivedByName",header:()=>e.jsx("div",{className:!0,children:"Collected By"}),cell:({row:t})=>e.jsx("p",{className:"text-sm font-medium",children:t.original.paymentReceivedByName}),enableSorting:!1,enableHiding:!1},{accessorKey:"approvedByName",header:()=>e.jsx("div",{className:!0,children:"Approved By"}),cell:({row:t})=>e.jsx("p",{className:"text-sm font-medium",children:t.original.approvedByName}),enableSorting:!1,enableHiding:!1},{accessorKey:"transactionDate",header:()=>e.jsx("div",{className:!0,children:"Date"}),cell:({row:t})=>{const o=new Date(t.original.transactionDate);return e.jsx("p",{className:"text-sm font-medium",children:Ar(o)})},enableSorting:!1,enableHiding:!1},{accessorKey:"approvalStatus",header:()=>e.jsx("div",{className:!0,children:"Approval Status"}),cell:({row:t})=>e.jsx("p",{className:"text-sm font-medium",children:t.original.approvalStatus})}];var ns={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,o){((i,a)=>{t.exports=a()})(Te,function i(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},c,n=!a.document&&!!a.postMessage,f=a.IS_PAPA_WORKER||!1,m={},g=0,l={};function h(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var u=te(s);u.chunkSize=parseInt(u.chunkSize),s.step||s.chunk||(u.chunkSize=null),this._handle=new v(u),(this._handle.streamer=this)._config=u}).call(this,r),this.parseChunk=function(s,u){var j=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<j){let _=this._config.newline;_||(b=this._config.quoteChar||'"',_=this._handle.guessLineEndings(s,b)),s=[...s.split(_).slice(j)].join(_)}this.isFirstChunk&&y(this._config.beforeFirstChunk)&&(b=this._config.beforeFirstChunk(s))!==void 0&&(s=b),this.isFirstChunk=!1,this._halted=!1;var j=this._partialLine+s,b=(this._partialLine="",this._handle.parse(j,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=b.meta.cursor,j=(this._finished||(this._partialLine=j.substring(s-this._baseIndex),this._baseIndex=s),b&&b.data&&(this._rowCount+=b.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)a.postMessage({results:b,workerId:l.WORKER_ID,finished:j});else if(y(this._config.chunk)&&!u){if(this._config.chunk(b,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=b=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(b.data),this._completeResults.errors=this._completeResults.errors.concat(b.errors),this._completeResults.meta=b.meta),this._completed||!j||!y(this._config.complete)||b&&b.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),j||b&&b.meta.paused||this._nextChunk(),b}this._halted=!0},this._sendError=function(s){y(this._config.error)?this._config.error(s):f&&this._config.error&&a.postMessage({workerId:l.WORKER_ID,error:s,finished:!1})}}function w(r){var s;(r=r||{}).chunkSize||(r.chunkSize=l.RemoteChunkSize),h.call(this,r),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),n||(s.onload=q(this._chunkLoaded,this),s.onerror=q(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var u,j=this._config.downloadRequestHeaders;for(u in j)s.setRequestHeader(u,j[u])}var b;this._config.chunkSize&&(b=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+b));try{s.send(this._config.downloadRequestBody)}catch(_){this._chunkError(_.message)}n&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(u=>(u=u.getResponseHeader("Content-Range"))!==null?parseInt(u.substring(u.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(u){u=s.statusText||u,this._sendError(new Error(u))}}function x(r){(r=r||{}).chunkSize||(r.chunkSize=l.LocalChunkSize),h.call(this,r);var s,u,j=typeof FileReader<"u";this.stream=function(b){this._input=b,u=b.slice||b.webkitSlice||b.mozSlice,j?((s=new FileReader).onload=q(this._chunkLoaded,this),s.onerror=q(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var b=this._input,_=(this._config.chunkSize&&(_=Math.min(this._start+this._config.chunkSize,this._input.size),b=u.call(b,this._start,_)),s.readAsText(b,this._config.encoding));j||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(b){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(b.target.result)},this._chunkError=function(){this._sendError(s.error)}}function p(r){var s;h.call(this,r=r||{}),this.stream=function(u){return s=u,this._nextChunk()},this._nextChunk=function(){var u,j;if(!this._finished)return u=this._config.chunkSize,s=u?(j=s.substring(0,u),s.substring(u)):(j=s,""),this._finished=!s,this.parseChunk(j)}}function N(r){h.call(this,r=r||{});var s=[],u=!0,j=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(b){this._input=b,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){j&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):u=!0},this._streamData=q(function(b){try{s.push(typeof b=="string"?b:b.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(_){this._streamError(_)}},this),this._streamError=q(function(b){this._streamCleanUp(),this._sendError(b)},this),this._streamEnd=q(function(){this._streamCleanUp(),j=!0,this._streamData("")},this),this._streamCleanUp=q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(r){var s,u,j,b,_=Math.pow(2,53),z=-_,$=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,I=this,B=0,T=0,re=!1,O=!1,D=[],E={data:[],errors:[],meta:{}};function J(M){return r.skipEmptyLines==="greedy"?M.join("").trim()==="":M.length===1&&M[0].length===0}function X(){if(E&&j&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),j=!1),r.skipEmptyLines&&(E.data=E.data.filter(function(k){return!J(k)})),ee()){let k=function(Y,Q){y(r.transformHeader)&&(Y=r.transformHeader(Y,Q)),D.push(Y)};if(E)if(Array.isArray(E.data[0])){for(var M=0;ee()&&M<E.data.length;M++)E.data[M].forEach(k);E.data.splice(0,1)}else E.data.forEach(k)}function U(k,Y){for(var Q=r.header?{}:[],H=0;H<k.length;H++){var W=H,F=k[H],F=((he,L)=>(K=>(r.dynamicTypingFunction&&r.dynamicTyping[K]===void 0&&(r.dynamicTyping[K]=r.dynamicTypingFunction(K)),(r.dynamicTyping[K]||r.dynamicTyping)===!0))(he)?L==="true"||L==="TRUE"||L!=="false"&&L!=="FALSE"&&((K=>{if($.test(K)&&(K=parseFloat(K),z<K&&K<_))return 1})(L)?parseFloat(L):se.test(L)?new Date(L):L===""?null:L):L)(W=r.header?H>=D.length?"__parsed_extra":D[H]:W,F=r.transform?r.transform(F,W):F);W==="__parsed_extra"?(Q[W]=Q[W]||[],Q[W].push(F)):Q[W]=F}return r.header&&(H>D.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+D.length+" fields but parsed "+H,T+Y):H<D.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+D.length+" fields but parsed "+H,T+Y)),Q}var V;E&&(r.header||r.dynamicTyping||r.transform)&&(V=1,!E.data.length||Array.isArray(E.data[0])?(E.data=E.data.map(U),V=E.data.length):E.data=U(E.data,0),r.header&&E.meta&&(E.meta.fields=D),T+=V)}function ee(){return r.header&&D.length===0}function ce(M,U,V,k){M={type:M,code:U,message:V},k!==void 0&&(M.row=k),E.errors.push(M)}y(r.step)&&(b=r.step,r.step=function(M){E=M,ee()?X():(X(),E.data.length!==0&&(B+=M.data.length,r.preview&&B>r.preview?u.abort():(E.data=E.data[0],b(E,I))))}),this.parse=function(M,U,V){var k=r.quoteChar||'"',k=(r.newline||(r.newline=this.guessLineEndings(M,k)),j=!1,r.delimiter?y(r.delimiter)&&(r.delimiter=r.delimiter(M),E.meta.delimiter=r.delimiter):((k=((Y,Q,H,W,F)=>{var he,L,K,ve;F=F||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Re=0;Re<F.length;Re++){for(var fe,Ae=F[Re],ie=0,me=0,ne=0,ue=(K=void 0,new P({comments:W,delimiter:Ae,newline:Q,preview:10}).parse(Y)),ge=0;ge<ue.data.length;ge++)H&&J(ue.data[ge])?ne++:(fe=ue.data[ge].length,me+=fe,K===void 0?K=fe:0<fe&&(ie+=Math.abs(fe-K),K=fe));0<ue.data.length&&(me/=ue.data.length-ne),(L===void 0||ie<=L)&&(ve===void 0||ve<me)&&1.99<me&&(L=ie,he=Ae,ve=me)}return{successful:!!(r.delimiter=he),bestDelimiter:he}})(M,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess)).successful?r.delimiter=k.bestDelimiter:(j=!0,r.delimiter=l.DefaultDelimiter),E.meta.delimiter=r.delimiter),te(r));return r.preview&&r.header&&k.preview++,s=M,u=new P(k),E=u.parse(s,U,V),X(),re?{meta:{paused:!0}}:E||{meta:{paused:!1}}},this.paused=function(){return re},this.pause=function(){re=!0,u.abort(),s=y(r.chunk)?"":s.substring(u.getCharIndex())},this.resume=function(){I.streamer._halted?(re=!1,I.streamer.parseChunk(s,!0)):setTimeout(I.resume,3)},this.aborted=function(){return O},this.abort=function(){O=!0,u.abort(),E.meta.aborted=!0,y(r.complete)&&r.complete(E),s=""},this.guessLineEndings=function(Y,k){Y=Y.substring(0,1048576);var k=new RegExp(S(k)+"([^]*?)"+S(k),"gm"),V=(Y=Y.replace(k,"")).split("\r"),k=Y.split(`
`),Y=1<k.length&&k[0].length<V[0].length;if(V.length===1||Y)return`
`;for(var Q=0,H=0;H<V.length;H++)V[H][0]===`
`&&Q++;return Q>=V.length/2?`\r
`:"\r"}}function S(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(r){var s=(r=r||{}).delimiter,u=r.newline,j=r.comments,b=r.step,_=r.preview,z=r.fastMode,$=null,se=!1,I=r.quoteChar==null?'"':r.quoteChar,B=I;if(r.escapeChar!==void 0&&(B=r.escapeChar),(typeof s!="string"||-1<l.BAD_DELIMITERS.indexOf(s))&&(s=","),j===s)throw new Error("Comment character same as delimiter");j===!0?j="#":(typeof j!="string"||-1<l.BAD_DELIMITERS.indexOf(j))&&(j=!1),u!==`
`&&u!=="\r"&&u!==`\r
`&&(u=`
`);var T=0,re=!1;this.parse=function(O,D,E){if(typeof O!="string")throw new Error("Input must be a string");var J=O.length,X=s.length,ee=u.length,ce=j.length,M=y(b),U=[],V=[],k=[],Y=T=0;if(!O)return ie();if(z||z!==!1&&O.indexOf(I)===-1){for(var Q=O.split(u),H=0;H<Q.length;H++){if(k=Q[H],T+=k.length,H!==Q.length-1)T+=u.length;else if(E)return ie();if(!j||k.substring(0,ce)!==j){if(M){if(U=[],ve(k.split(s)),me(),re)return ie()}else ve(k.split(s));if(_&&_<=H)return U=U.slice(0,_),ie(!0)}}return ie()}for(var W=O.indexOf(s,T),F=O.indexOf(u,T),he=new RegExp(S(B)+S(I),"g"),L=O.indexOf(I,T);;)if(O[T]===I)for(L=T,T++;;){if((L=O.indexOf(I,L+1))===-1)return E||V.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:U.length,index:T}),fe();if(L===J-1)return fe(O.substring(T,L).replace(he,I));if(I===B&&O[L+1]===B)L++;else if(I===B||L===0||O[L-1]!==B){W!==-1&&W<L+1&&(W=O.indexOf(s,L+1));var K=Re((F=F!==-1&&F<L+1?O.indexOf(u,L+1):F)===-1?W:Math.min(W,F));if(O.substr(L+1+K,X)===s){k.push(O.substring(T,L).replace(he,I)),O[T=L+1+K+X]!==I&&(L=O.indexOf(I,T)),W=O.indexOf(s,T),F=O.indexOf(u,T);break}if(K=Re(F),O.substring(L+1+K,L+1+K+ee)===u){if(k.push(O.substring(T,L).replace(he,I)),Ae(L+1+K+ee),W=O.indexOf(s,T),L=O.indexOf(I,T),M&&(me(),re))return ie();if(_&&U.length>=_)return ie(!0);break}V.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:U.length,index:T}),L++}}else if(j&&k.length===0&&O.substring(T,T+ce)===j){if(F===-1)return ie();T=F+ee,F=O.indexOf(u,T),W=O.indexOf(s,T)}else if(W!==-1&&(W<F||F===-1))k.push(O.substring(T,W)),T=W+X,W=O.indexOf(s,T);else{if(F===-1)break;if(k.push(O.substring(T,F)),Ae(F+ee),M&&(me(),re))return ie();if(_&&U.length>=_)return ie(!0)}return fe();function ve(ne){U.push(ne),Y=T}function Re(ne){var ue=0;return ue=ne!==-1&&(ne=O.substring(L+1,ne))&&ne.trim()===""?ne.length:ue}function fe(ne){return E||(ne===void 0&&(ne=O.substring(T)),k.push(ne),T=J,ve(k),M&&me()),ie()}function Ae(ne){T=ne,ve(k),k=[],F=O.indexOf(u,T)}function ie(ne){if(r.header&&!D&&U.length&&!se){var ue=U[0],ge={},Xe=new Set(ue);let xt=!1;for(let Pe=0;Pe<ue.length;Pe++){let xe=ue[Pe];if(ge[xe=y(r.transformHeader)?r.transformHeader(xe,Pe):xe]){let Oe,gt=ge[xe];for(;Oe=xe+"_"+gt,gt++,Xe.has(Oe););Xe.add(Oe),ue[Pe]=Oe,ge[xe]++,xt=!0,($=$===null?{}:$)[Oe]=xe}else ge[xe]=1,ue[Pe]=xe;Xe.add(xe)}xt&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:U,errors:V,meta:{delimiter:s,linebreak:u,aborted:re,truncated:!!ne,cursor:Y+(D||0),renamedHeaders:$}}}function me(){b(ie()),U=[],V=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return T}}function C(r){var s=r.data,u=m[s.workerId],j=!1;if(s.error)u.userError(s.error,s.file);else if(s.results&&s.results.data){var b={abort:function(){j=!0,R(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:G,resume:G};if(y(u.userStep)){for(var _=0;_<s.results.data.length&&(u.userStep({data:s.results.data[_],errors:s.results.errors,meta:s.results.meta},b),!j);_++);delete s.results}else y(u.userChunk)&&(u.userChunk(s.results,b,s.file),delete s.results)}s.finished&&!j&&R(s.workerId,s.results)}function R(r,s){var u=m[r];y(u.userComplete)&&u.userComplete(s),u.terminate(),delete m[r]}function G(){throw new Error("Not implemented.")}function te(r){if(typeof r!="object"||r===null)return r;var s,u=Array.isArray(r)?[]:{};for(s in r)u[s]=te(r[s]);return u}function q(r,s){return function(){r.apply(s,arguments)}}function y(r){return typeof r=="function"}return l.parse=function(r,s){var u=(s=s||{}).dynamicTyping||!1;if(y(u)&&(s.dynamicTypingFunction=u,u={}),s.dynamicTyping=u,s.transform=!!y(s.transform)&&s.transform,!s.worker||!l.WORKERS_SUPPORTED)return u=null,l.NODE_STREAM_INPUT,typeof r=="string"?(r=(j=>j.charCodeAt(0)!==65279?j:j.slice(1))(r),u=new(s.download?w:p)(s)):r.readable===!0&&y(r.read)&&y(r.on)?u=new N(s):(a.File&&r instanceof File||r instanceof Object)&&(u=new x(s)),u.stream(r);(u=(()=>{var j;return!!l.WORKERS_SUPPORTED&&(j=(()=>{var b=a.URL||a.webkitURL||null,_=i.toString();return l.BLOB_URL||(l.BLOB_URL=b.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))})(),(j=new a.Worker(j)).onmessage=C,j.id=g++,m[j.id]=j)})()).userStep=s.step,u.userChunk=s.chunk,u.userComplete=s.complete,u.userError=s.error,s.step=y(s.step),s.chunk=y(s.chunk),s.complete=y(s.complete),s.error=y(s.error),delete s.worker,u.postMessage({input:r,config:s,workerId:u.id})},l.unparse=function(r,s){var u=!1,j=!0,b=",",_=`\r
`,z='"',$=z+z,se=!1,I=null,B=!1,T=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||l.BAD_DELIMITERS.filter(function(D){return s.delimiter.indexOf(D)!==-1}).length||(b=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(u=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(se=s.skipEmptyLines),typeof s.newline=="string"&&(_=s.newline),typeof s.quoteChar=="string"&&(z=s.quoteChar),typeof s.header=="boolean"&&(j=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");I=s.columns}s.escapeChar!==void 0&&($=s.escapeChar+z),s.escapeFormulae instanceof RegExp?B=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(B=/^[=+\-@\t\r].*$/)}})(),new RegExp(S(z),"g"));if(typeof r=="string"&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return re(null,r,se);if(typeof r[0]=="object")return re(I||Object.keys(r[0]),r,se)}else if(typeof r=="object")return typeof r.data=="string"&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||I),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:typeof r.data[0]=="object"?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||typeof r.data[0]=="object"||(r.data=[r.data])),re(r.fields||[],r.data||[],se);throw new Error("Unable to serialize unrecognized input");function re(D,E,J){var X="",ee=(typeof D=="string"&&(D=JSON.parse(D)),typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(D)&&0<D.length),ce=!Array.isArray(E[0]);if(ee&&j){for(var M=0;M<D.length;M++)0<M&&(X+=b),X+=O(D[M],M);0<E.length&&(X+=_)}for(var U=0;U<E.length;U++){var V=(ee?D:E[U]).length,k=!1,Y=ee?Object.keys(E[U]).length===0:E[U].length===0;if(J&&!ee&&(k=J==="greedy"?E[U].join("").trim()==="":E[U].length===1&&E[U][0].length===0),J==="greedy"&&ee){for(var Q=[],H=0;H<V;H++){var W=ce?D[H]:H;Q.push(E[U][W])}k=Q.join("").trim()===""}if(!k){for(var F=0;F<V;F++){0<F&&!Y&&(X+=b);var he=ee&&ce?D[F]:F;X+=O(E[U][he],F)}U<E.length-1&&(!J||0<V&&!Y)&&(X+=_)}}return X}function O(D,E){var J,X;return D==null?"":D.constructor===Date?JSON.stringify(D).slice(1,25):(X=!1,B&&typeof D=="string"&&B.test(D)&&(D="'"+D,X=!0),J=D.toString().replace(T,$),(X=X||u===!0||typeof u=="function"&&u(D,E)||Array.isArray(u)&&u[E]||((ee,ce)=>{for(var M=0;M<ce.length;M++)if(-1<ee.indexOf(ce[M]))return!0;return!1})(J,l.BAD_DELIMITERS)||-1<J.indexOf(b)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?z+J+z:J)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!n&&!!a.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=P,l.ParserHandle=v,l.NetworkStreamer=w,l.FileStreamer=x,l.StringStreamer=p,l.ReadableStreamStreamer=N,a.jQuery&&((c=a.jQuery).fn.parse=function(r){var s=r.config||{},u=[];return this.each(function(_){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var z=0;z<this.files.length;z++)u.push({file:this.files[z],inputElem:this,instanceConfig:c.extend({},s)})}),j(),this;function j(){if(u.length===0)y(r.complete)&&r.complete();else{var _,z,$,se,I=u[0];if(y(r.before)){var B=r.before(I.file,I.inputElem);if(typeof B=="object"){if(B.action==="abort")return _="AbortError",z=I.file,$=I.inputElem,se=B.reason,void(y(r.error)&&r.error({name:_},z,$,se));if(B.action==="skip")return void b();typeof B.config=="object"&&(I.instanceConfig=c.extend(I.instanceConfig,B.config))}else if(B==="skip")return void b()}var T=I.instanceConfig.complete;I.instanceConfig.complete=function(re){y(T)&&T(re,I.file,I.inputElem),b()},l.parse(I.file,I.instanceConfig)}}function b(){u.splice(0,1),j()}}),f&&(a.onmessage=function(r){r=r.data,l.WORKER_ID===void 0&&r&&(l.WORKER_ID=r.workerId),typeof r.input=="string"?a.postMessage({workerId:l.WORKER_ID,results:l.parse(r.input,r.config),finished:!0}):(a.File&&r.input instanceof File||r.input instanceof Object)&&(r=l.parse(r.input,r.config))&&a.postMessage({workerId:l.WORKER_ID,results:r,finished:!0})}),(w.prototype=Object.create(h.prototype)).constructor=w,(x.prototype=Object.create(h.prototype)).constructor=x,(p.prototype=Object.create(p.prototype)).constructor=p,(N.prototype=Object.create(h.prototype)).constructor=N,l})})(ns);const ss=()=>{const t=Ge(),[o,i]=d.useState([]),[a,c]=d.useState(!0),{chapterData:n}=Be(),f=new URLSearchParams(t.search),[m,g]=d.useState(null),l=f.get("rows")||5,h=f.get("page")||1,[w,x]=d.useState(!1),[p,N]=d.useState(null),[v,S]=d.useState(null),P=Et.map(({accessorKey:r,header:s})=>({label:s().props.children,key:r})),[C,R]=d.useState(P.map(({label:r})=>r));d.useEffect(()=>{console.log("helo"),n&&G()},[n,l,h,t.search]);const G=()=>{n.chapterId&&(console.log("helo 2"),de.get(`/api/report/${n.chapterId}/member-transactions-report?rows=${l}&page=${h}  `,{params:{chapterId:n.chapterId,rows:l,page:h}}).then(r=>{i(r.data.data),g(r.data.totalRecords),c(!1)}).catch(r=>{console.error("Error fetching reports:",r),c(!1)}))},te=r=>{R(s=>s.includes(r)?s.filter(u=>u!==r):[...s,r])},q=async()=>{const r=P.filter(({label:s})=>C.includes(s)).map(({key:s})=>s);try{const s=await de.post(`/api/report/${n.chapterId}/member-transactions-report/export`,{startDate:p,endDate:v,type:"excel",selectedColumns:r,chapterId:n.chapterId},{responseType:"blob"}),u=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),j=window.URL.createObjectURL(u),b=document.createElement("a");b.href=j,b.setAttribute("download",`Member Transactions Report ${pe(new Date(p),"dd/MM/yyyy")} - ${pe(new Date(v),"dd/MM/yyyy")}.xlsx`),document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(j),ae.success("Excel file downloaded successfully.")}catch(s){console.error("Error exporting Excel:",s),ae.error("Failed to export Excel. Please try again later.")}},y=async()=>{var u,j;x(!1);const r=P.filter(({label:b})=>C.includes(b)).map(({key:b})=>b),s={startDate:p,endDate:v,type:"pdf",selectedColumns:r,chapterId:n.chapterId};try{const b=await de.post(`/api/report/${n.chapterId}/member-transactions-report/export`,s,{responseType:"blob"}),_=new Blob([b.data],{type:"application/pdf"}),z=window.URL.createObjectURL(_),$=document.createElement("a");$.href=z,$.setAttribute("download",`Member Transactions Report ${pe(new Date(p),"dd/MM/yyyy")} - ${pe(new Date(v),"dd/MM/yyyy")}.pdf`),document.body.appendChild($),$.click(),document.body.removeChild($),window.URL.revokeObjectURL(z),ae.success("PDF file downloaded successfully.")}catch(b){console.error("Error exporting PDF:",b),ae.error(((j=(u=b.response)==null?void 0:u.data)==null?void 0:j.error)||"Failed to export PDF")}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Member Transactions Report"}),e.jsxs("div",{className:"mb-4 p-4 border rounded-md bg-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select Columns to Export"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:P.map(({label:r})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Or,{checked:C.includes(r),onCheckedChange:()=>te(r)}),e.jsx("label",{className:"text-sm",children:r})]},r))})]}),e.jsx("div",{className:"flex gap-4 mb-4",children:e.jsxs(Ir,{open:w,onOpenChange:x,children:[e.jsx(Lr,{asChild:!0,children:e.jsx(oe,{className:"bg-blue-600 text-white",children:"Export"})}),e.jsxs(Mr,{children:[e.jsx(Dr,{children:e.jsx(Fr,{children:"Export Options"})}),e.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(rt,{htmlFor:"fromDate",children:"From Date"}),e.jsxs(nt,{children:[e.jsx(st,{asChild:!0,children:e.jsxs(oe,{variant:"outline",className:tt("w-full justify-start text-left font-normal",!p&&"text-muted-foreground"),children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),p?pe(new Date(p),"PPP"):"Pick a date"]})}),e.jsx(at,{className:"w-auto p-0",children:e.jsx(ot,{mode:"single",selected:p,onSelect:N,initialFocus:!0,disabled:r=>r>new Date})})]})]}),e.jsxs("div",{children:[e.jsx(rt,{htmlFor:"toDate",children:"To Date"}),e.jsxs(nt,{children:[e.jsx(st,{asChild:!0,children:e.jsxs(oe,{variant:"outline",className:tt("w-full justify-start text-left font-normal",!v&&"text-muted-foreground"),children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),v?pe(new Date(v),"PPP"):"Pick a date"]})}),e.jsx(at,{className:"w-auto p-0",children:e.jsx(ot,{mode:"single",selected:v,onSelect:S,initialFocus:!0,disabled:r=>r>new Date})})]})]})]}),e.jsxs($r,{className:"flex justify-between gap-2",children:[e.jsx(oe,{onClick:y,className:"bg-red-500 text-white",disabled:!p||!v,children:"Export PDF"}),e.jsx(oe,{onClick:()=>{x(!1),q()},className:"bg-green-700 text-white",disabled:!p||!v,children:"Export Excel"})]})]})]})}),a?e.jsx("p",{className:"text-gray-600",children:"Loading..."}):o.length===0?e.jsx("p",{className:"text-gray-600",children:"No reports available."}):e.jsx(rs,{data:o,columns:Et,searchInputField:"firstName",totalRecord:m,pagination:{pageSize:l,pageIndex:h},state:{pagination:{pageSize:l,pageIndex:h}}})]})},as=()=>{const{chapterData:t}=Be(),[o,i]=d.useState(new Date),[a,c]=d.useState(!1),[n,f]=d.useState(null),[m,g]=d.useState(!1),[l,h]=d.useState(null),w=async()=>{try{g(!0),h(null);const p=pe(o,"yyyy-MM-dd"),N=await de.get(`/api/report/${t==null?void 0:t.chapterId}/receiver-daywise-json-report`,{params:{date:p}});f(N.data)}catch(p){h(p.message||"An unknown error occurred"),ae.error("Error fetching data")}finally{g(!1)}},x=async()=>{try{const p=pe(o,"yyyy-MM-dd"),N=await de.get(`/api/report/${t==null?void 0:t.chapterId}/receiver-daywise-report`,{params:{date:p},responseType:"blob"});if(N.status!==200){ae.error("Error exporting data");return}ae.success("Data exported successfully");const v=window.URL.createObjectURL(new Blob([N.data])),S=document.createElement("a");S.href=v,S.setAttribute("download",`ReceiverDaywiseReport-${p}.xlsx`),document.body.appendChild(S),S.click(),S.remove()}catch(p){ae.error("Error exporting data"),console.error("Error exporting data:",p)}};return d.useEffect(()=>{t!=null&&t.chapterId&&w()},[o,t]),e.jsxs("div",{className:"flex flex-col gap-4 mt-5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(nt,{open:a,onOpenChange:c,children:[e.jsx(st,{asChild:!0,children:e.jsxs(oe,{variant:"outline",className:"w-[200px] justify-start text-left font-normal",children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),o?pe(o,"PPP"):e.jsx("span",{children:"Select date"})]})}),e.jsx(at,{className:"w-auto p-0",children:e.jsx(ot,{mode:"single",selected:o,onSelect:p=>{i(p||new Date),c(!1)},disabled:p=>p>new Date})})]}),e.jsx(oe,{onClick:x,disabled:(n==null?void 0:n.data.transactions.length)===0,children:"Export Data"})]}),m&&e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((p,N)=>e.jsxs(Ke,{children:[e.jsx(Je,{children:e.jsx(Ie,{className:"h-6 w-[200px]"})}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ie,{className:"h-4 w-full"}),e.jsx(Ie,{className:"h-4 w-full"}),e.jsx(Ie,{className:"h-4 w-full"})]})})]},N))}),l&&e.jsxs("div",{className:"text-red-500",children:["Error: ",l]}),n&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Transaction Report for ",n==null?void 0:n.data.date]}),(n==null?void 0:n.data.transactions.length)===0&&e.jsx("div",{className:"text-center text-lg font-semibold text-gray-500",children:"No transactions found for the selected date."}),n==null?void 0:n.data.transactions.map((p,N)=>e.jsxs(Ke,{children:[e.jsx(Je,{children:e.jsxs(yt,{children:[p.receiverName," (",p.paymentType,")"]})}),e.jsx(Ze,{children:e.jsxs(De,{children:[e.jsx(Fe,{children:e.jsxs(le,{children:[e.jsx(Z,{children:"Sr No"}),e.jsx(Z,{children:"Receiver Name"}),e.jsx(Z,{children:"Member Name"}),e.jsx(Z,{children:"Payment Type"}),e.jsx(Z,{children:"Paid Amount"}),e.jsx(Z,{children:"Receiver Fee"}),e.jsx(Z,{children:"Platform Fee"}),e.jsx(Z,{children:"Penalty Amount"}),e.jsx(Z,{children:"Discount Amount"}),e.jsx(Z,{children:"Status"})]})}),e.jsxs($e,{children:[p.data.map((v,S)=>e.jsxs(le,{children:[e.jsx(A,{children:S+1}),e.jsx(A,{children:p.receiverName}),e.jsx(A,{children:v.membername}),e.jsx(A,{children:v.paymentType}),e.jsx(A,{children:v.paidAmount}),e.jsx(A,{children:v.receiverFee}),e.jsx(A,{children:v.platformFee}),e.jsx(A,{children:v.penaltyAmount}),e.jsx(A,{children:v.discountAmount}),e.jsx(A,{children:v.status})]},v.memberid)),e.jsxs(le,{className:"font-bold bg-muted/50",children:[e.jsx(A,{colSpan:3,children:"Total:"}),e.jsx(A,{children:p.paymentType}),e.jsx(A,{children:p.totals.amountPaid}),e.jsx(A,{children:p.totals.receiverFee}),e.jsx(A,{children:p.totals.platformFee}),e.jsx(A,{children:p.totals.penaltyAmount}),e.jsx(A,{children:p.totals.discountAmount}),e.jsx(A,{})]})]})]})})]},`${p.receiverName}-${p.paymentType}-${N}`)),(n==null?void 0:n.data.transactions.length)>0&&e.jsxs(Ke,{children:[e.jsx(Je,{children:e.jsx(yt,{children:"Grand Totals"})}),e.jsx(Ze,{children:e.jsxs(De,{children:[e.jsx(Fe,{children:e.jsxs(le,{children:[e.jsx(Z,{children:"Payment Type"}),e.jsx(Z,{children:"Paid Amount"}),e.jsx(Z,{children:"Receiver Fee"}),e.jsx(Z,{children:"Platform Fee"}),e.jsx(Z,{children:"Penalty Amount"}),e.jsx(Z,{children:"Discount Amount"})]})}),e.jsxs($e,{children:[e.jsxs(le,{children:[e.jsx(A,{children:"Cash"}),e.jsx(A,{children:n==null?void 0:n.data.totals.cash.amountPaid}),e.jsx(A,{children:n==null?void 0:n.data.totals.cash.receiverFee}),e.jsx(A,{children:n==null?void 0:n.data.totals.cash.platformFee}),e.jsx(A,{children:n==null?void 0:n.data.totals.cash.penaltyAmount}),e.jsx(A,{children:n==null?void 0:n.data.totals.cash.discountAmount})]}),e.jsxs(le,{children:[e.jsx(A,{children:"Online"}),e.jsx(A,{children:n==null?void 0:n.data.totals.online.amountPaid}),e.jsx(A,{children:n==null?void 0:n.data.totals.online.receiverFee}),e.jsx(A,{children:n==null?void 0:n.data.totals.online.platformFee}),e.jsx(A,{children:n==null?void 0:n.data.totals.online.penaltyAmount}),e.jsx(A,{children:n==null?void 0:n.data.totals.online.discountAmount})]}),e.jsxs(le,{className:"font-bold bg-muted/50",children:[e.jsx(A,{children:"Grand Total"}),e.jsx(A,{children:n==null?void 0:n.data.totals.grand.amountPaid}),e.jsx(A,{children:n==null?void 0:n.data.totals.grand.receiverFee}),e.jsx(A,{children:n==null?void 0:n.data.totals.grand.platformFee}),e.jsx(A,{children:n==null?void 0:n.data.totals.grand.penaltyAmount}),e.jsx(A,{children:n==null?void 0:n.data.totals.grand.discountAmount})]})]})]})})]})]})]})};var os={exports:{}};(function(t,o){(function(i,a){a()})(Te,function(){function i(l,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function a(l,h,w){var x=new XMLHttpRequest;x.open("GET",l),x.responseType="blob",x.onload=function(){g(x.response,h,w)},x.onerror=function(){console.error("could not download file")},x.send()}function c(l){var h=new XMLHttpRequest;h.open("HEAD",l,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function n(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(h)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Te=="object"&&Te.global===Te?Te:void 0,m=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(l,h,w){var x=f.URL||f.webkitURL,p=document.createElement("a");h=h||l.name||"download",p.download=h,p.rel="noopener",typeof l=="string"?(p.href=l,p.origin===location.origin?n(p):c(p.href)?a(l,h,w):n(p,p.target="_blank")):(p.href=x.createObjectURL(l),setTimeout(function(){x.revokeObjectURL(p.href)},4e4),setTimeout(function(){n(p)},0))}:"msSaveOrOpenBlob"in navigator?function(l,h,w){if(h=h||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(i(l,w),h);else if(c(l))a(l,h,w);else{var x=document.createElement("a");x.href=l,x.target="_blank",setTimeout(function(){n(x)})}}:function(l,h,w,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof l=="string")return a(l,h,w);var p=l.type==="application/octet-stream",N=/constructor/i.test(f.HTMLElement)||f.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||p&&N||m)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var R=S.result;R=v?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=R:location=R,x=null},S.readAsDataURL(l)}else{var P=f.URL||f.webkitURL,C=P.createObjectURL(l);x?x.location=C:location.href=C,x=null,setTimeout(function(){P.revokeObjectURL(C)},4e4)}});f.saveAs=g.saveAs=g,t.exports=g})})(os);const is=[{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"3monthly",label:"3 Monthly"}],ls=()=>{const{chapterData:t}=Be(),[o,i]=d.useState([]),[a,c]=d.useState(""),[n,f]=d.useState("monthly"),[m,g]=d.useState(null),[l,h]=d.useState(!1),[w,x]=d.useState(!1),[p,N]=d.useState(""),[v,S]=d.useState(!1),[P,C]=d.useState(""),[R,G]=d.useState("");d.useEffect(()=>{t!=null&&t.chapterId&&de.get(`/api/term/chapter/${t.chapterId}`).then(y=>i(y.data)).catch(()=>i([]))},[t]),d.useEffect(()=>{if(!(t!=null&&t.chapterId)||!a&&!v)return;h(!0);const y={period:n,...a&&!v?{termId:a}:{},...v?{startDate:P,endDate:R}:{}};de.get(`/api/report/${t.chapterId}/member-payment-summary-report`,{params:y}).then(r=>g(r.data)).catch(()=>g(null)).finally(()=>h(!1))},[t,a,n,v,P,R]);const te=m==null?void 0:m.members.map((y,r)=>({...y,idx:r})).filter(y=>y.name.toLowerCase().includes(p.toLowerCase())),q=async()=>{x(!0);try{const y={period:n,...a&&!v?{termId:a}:{},...v?{startDate:P,endDate:R}:{}},r=await de.get(`/api/report/${t.chapterId}/member-payment-summary-report/export`,{params:y,responseType:"blob"});if(r.status!==200){ae.error("Error exporting data");return}ae.success("Data exported successfully");const s=window.URL.createObjectURL(new Blob([r.data])),u=document.createElement("a");u.href=s,u.setAttribute("download","Member_Payment_Summary_Report.xlsx"),document.body.appendChild(u),u.click(),u.remove()}catch(y){ae.error("Error exporting data"),console.error("Error exporting data:",y)}finally{x(!1)}};return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:"Member Payment Summary Report"}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 items-center",children:[e.jsxs(je,{value:a,onValueChange:c,disabled:v,children:[e.jsx(Ce,{className:"w-[180px]",children:e.jsx(Ne,{placeholder:"Select Term"})}),e.jsx(Ee,{children:e.jsxs(Le,{children:[e.jsx(Me,{children:"Term"}),o.map(y=>e.jsx(Se,{value:y.termId||y.id,children:y.termName||y.name||y.termId},y.termId||y.id))]})})]}),e.jsxs(je,{value:n,onValueChange:f,children:[e.jsx(Ce,{className:"w-[180px]",children:e.jsx(Ne,{placeholder:"Select Period"})}),e.jsx(Ee,{children:e.jsxs(Le,{children:[e.jsx(Me,{children:"Period"}),is.map(y=>e.jsx(Se,{value:y.value,children:y.label},y.value))]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{htmlFor:"customRange",children:"Custom Date?"}),e.jsx(Ur,{id:"customRange",checked:v,onCheckedChange:S})]}),v&&e.jsxs(e.Fragment,{children:[e.jsx(et,{type:"date",value:P,onChange:y=>C(y.target.value)}),e.jsx(et,{type:"date",value:R,onChange:y=>G(y.target.value)})]}),m&&m.periodLabels&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx(oe,{variant:"outline",onClick:q,disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"animate-spin w-4 h-4 mr-2 inline"})," ","Exporting..."]}):"Export to Excel"})})]}),e.jsx(et,{type:"text",placeholder:"Search member...",value:p,onChange:y=>N(y.target.value),className:"w-full max-w-md"}),l?e.jsxs("div",{className:"flex justify-center items-center py-16 text-muted-foreground",children:[e.jsx(vt,{className:"animate-spin w-6 h-6 mr-2"}),"Loading report..."]}):m&&m.periodLabels?e.jsxs(Ke,{className:"overflow-auto p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Total Transactions (",m.period,")"]}),e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(De,{className:"text-sm",children:[e.jsx(Fe,{children:e.jsxs(le,{children:[e.jsx(Z,{children:"Member"}),m.periodLabels.map((y,r)=>{var s;return e.jsx(Z,{className:"text-right",children:y.includes("-")?y:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{children:y}),e.jsx("span",{className:"text-xs text-gray-400",children:((s=m.periodDates)==null?void 0:s[r])&&`(${pe(new Date(m.periodDates[r].start),"d MMM")} - ${pe(new Date(m.periodDates[r].end),"d MMM")})`})]})},r)}),e.jsx(Z,{className:"text-right font-bold",children:"Total"})]})}),e.jsxs($e,{children:[(te??[]).map(({memberId:y,name:r,idx:s})=>e.jsxs(le,{children:[e.jsx(A,{className:"font-medium",children:r}),m.matrix[s].map((u,j)=>e.jsxs(A,{className:"text-right",children:["₹",u]},j)),e.jsxs(A,{className:"text-right font-bold",children:["₹",m.totals[s]]})]},y)),!p&&e.jsxs(le,{className:"bg-muted/40 font-semibold",children:[e.jsx(A,{children:"Grand Total"}),m.periodLabels.map((y,r)=>{const s=m.matrix.reduce((u,j)=>u+(j[r]||0),0);return e.jsxs(A,{className:"text-right",children:["₹",s]},r)}),e.jsxs(A,{className:"text-right text-primary",children:["₹",m.grandTotal]})]})]})]})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data to display. Please select a term or date range and period."})]})},St=[{label:"Member Wise Report",reports:[{value:"member_due_summary",label:"Member Due Summary Report",component:Zn},{value:"member_ledger",label:"Member Ledger",component:es},{value:"member_payment_summary_report",label:"Member Payment Summary Report",component:ls}]},{label:"Chapter Report",reports:[{value:"all_transactions",label:"All Transactions",component:ss},{value:"receiver_daywise_report",label:"Receiver Daily Report",component:as}]}],Gs=()=>{const[t,o]=mr.useState(""),a=St.flatMap(c=>c.reports).find(c=>c.value===t);return e.jsxs(e.Fragment,{children:[e.jsx(xr,{items:[{name:"Reports"}]}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white p-3 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-lg font-medium dark:text-white",children:"View Your Chapter's Reports"})}),e.jsx("div",{children:e.jsxs(je,{value:t,onValueChange:c=>o(c),className:"w-full",children:[e.jsx(Ce,{className:"w-[280px]",children:e.jsx(Ne,{placeholder:"Select a report type you want to view"})}),e.jsx(Ee,{children:St.map(c=>e.jsxs(Le,{children:[e.jsx(Me,{children:c.label}),c.reports.map(n=>e.jsx(Se,{value:n.value,children:n.label},n.value))]},c.label))})]})}),a&&e.jsx(a.component,{})]})]})};export{Gs as default};
