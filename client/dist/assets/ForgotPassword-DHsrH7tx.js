import{u as S,a as L,r as t,j as e,L as p,c as g}from"./index-6elQxnHd.js";import{B as F}from"./Breadcrumb-ME0YvNli.js";import{L as O}from"./logo-dark-BHjl3cne.js";import{L as R}from"./logo-ajku0Xcj.js";import"./chevron-right-DA45-pzU.js";const A=()=>{const h=S(),k=L(),[o,w]=t.useState(""),[l,f]=t.useState(""),[n,j]=t.useState(""),[m,N]=t.useState(!1),[u,a]=t.useState(""),[i,b]=t.useState(!1),[r,x]=t.useState(!1),y=async()=>{b(!0),a("");try{const s=await g.post("/api/auth/forgot-password",{email:o}),d=await s.json();s.ok?(N(!0),a("")):a(d.message)}catch{a("Failed to send OTP.")}finally{b(!1)}},v=async s=>{var d;s.preventDefault(),x(!0),a("");try{const c=await g.post("/api/auth/reset-password",{email:o,otp:l,newPassword:n}),P=await c.json();c.ok?h("/auth/signin",{state:{from:(d=k.state)==null?void 0:d.from}}):a(P.message)}catch{a("Failed to reset password.")}finally{x(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(F,{items:[{name:"Authentication",link:"/auth"},{name:"Forgot Password"}]}),e.jsx("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-8 max-w-md mx-auto",children:e.jsxs("div",{className:"flex flex-wrap items-center",children:[e.jsxs("div",{className:"w-full text-center mb-6",children:[e.jsxs(p,{to:"/",children:[e.jsx("img",{className:"hidden dark:block mx-auto",src:R,alt:"Logo"}),e.jsx("img",{className:"dark:hidden mx-auto",src:O,alt:"Logo"})]}),e.jsx("p",{className:"mt-3 text-gray-500",children:"Reset your password"})]}),e.jsxs("form",{className:"w-full",onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",className:"w-full p-3 border border-stroke rounded-md dark:border-strokedark dark:bg-boxdark",value:o,onChange:s=>w(s.target.value),required:!0,disabled:i||r})]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",htmlFor:"otp",children:"Enter OTP"}),e.jsx("input",{type:"text",id:"otp",className:"w-full p-3 border border-stroke rounded-md dark:border-strokedark dark:bg-boxdark",value:l,onChange:s=>f(s.target.value),required:!0,disabled:r})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",htmlFor:"newPassword",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",className:"w-full p-3 border border-stroke rounded-md dark:border-strokedark dark:bg-boxdark",value:n,onChange:s=>j(s.target.value),required:!0,disabled:r})]})]}),u&&e.jsx("div",{className:"text-red-500 mb-4",children:u}),m?e.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-60",disabled:r||!l||!n,children:r?"Resetting Password...":"Reset Password"}):e.jsx("button",{type:"button",className:"w-full py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-60",onClick:y,disabled:i||!o,children:i?"Sending OTP...":"Send OTP"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(p,{to:"/auth/signin",className:"text-blue-500 hover:underline",children:"Back to Login"})})]})})]})};export{A as default};
