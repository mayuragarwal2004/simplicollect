import{g as f,r as d,c as x,Q as o,j as e,B as m}from"./index-6elQxnHd.js";import{B as b}from"./Breadcrumb-ME0YvNli.js";import{D as A,f as N,a as P,b as C,c as v,e as w,d as B}from"./dialog-CT_lOUQb.js";import{T as k,a as D,b as g,c as t,d as I,e as n}from"./table-CMz5QLeZ.js";import"./chevron-right-DA45-pzU.js";import"./index-CgP8r1n9.js";import"./index-BGKEPXry.js";import"./index-BLdKwkXj.js";import"./index-CE4AQY6s.js";const E=()=>{const{chapterData:a}=f(),[i,j]=d.useState([]),[s,p]=d.useState(null),[u,c]=d.useState(!1);d.useEffect(()=>{a!=null&&a.chapterId&&h()},[a==null?void 0:a.chapterId]);const y=async r=>{try{await x.post(`/api/chapter-payment/approve-payment/${r}`),h(),c(!1),o.success("Payment accepted successfully!")}catch(l){o.error("Error accepting payment"),console.error("Error accepting payment:",l)}},h=async()=>{try{const r=await x.get(`/api/chapter-payment/${a.chapterId}/chapter-transactions`);j(r.data.data)}catch(r){o.error("Error fetching transactions"),console.error("Error fetching transactions:",r)}};return a!=null&&a.chapterId?e.jsxs("div",{className:"p-5 bg-white dark:bg-gray-800 rounded-md shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Pending Payment Requests"}),e.jsx("div",{className:"overflow-y-auto rounded-md border",children:e.jsxs(k,{children:[e.jsx(D,{children:e.jsxs(g,{children:[e.jsx(t,{children:"Sender Name"}),e.jsx(t,{children:"Payable Amount"}),e.jsx(t,{children:"Transferred Amount"}),e.jsx(t,{children:"Balance"}),e.jsx(t,{children:"Status"}),e.jsx(t,{})]})}),e.jsx(I,{children:i==null?void 0:i.map(r=>e.jsxs(g,{children:[e.jsx(n,{children:r.senderName}),e.jsx(n,{children:r.payableAmount}),e.jsx(n,{children:r.transferredAmount}),e.jsx(n,{children:parseFloat(r.payableAmount)-parseFloat(r.transferredAmount)}),e.jsx(n,{children:r.approvedById?`Approved by ${r.approvedByName}`:"Pending"}),e.jsx(n,{className:"text-right",children:r.approvedById?e.jsx("span",{className:"text-green-500 font-medium",children:"Payment Accepted"}):e.jsxs(A,{open:(s==null?void 0:s.id)===r.id&&u,onOpenChange:l=>{c(l),l||p(null)},children:[e.jsx(N,{asChild:!0,children:e.jsx(m,{onClick:()=>p(r),className:"bg-blue-600 text-white hover:bg-blue-700",children:"Accept Payment"})}),e.jsxs(P,{children:[e.jsxs(C,{children:[e.jsxs(v,{children:["Accept Payment from"," ",s==null?void 0:s.senderName]}),e.jsxs(w,{className:"text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:["Payable Amount:"," ",s==null?void 0:s.payableAmount]}),e.jsxs("p",{children:["Transferred Amount:"," ",s==null?void 0:s.transferredAmount]})]})]}),e.jsxs(B,{className:"flex justify-end gap-3 mt-4",children:[e.jsx(m,{onClick:()=>y(s.id),className:"bg-green-600 text-white hover:bg-green-700",children:"Confirm"}),e.jsx(m,{onClick:()=>c(!1),className:"bg-gray-500 text-white hover:bg-gray-600",children:"Cancel"})]})]})]})})]},r.id))})]})})]}):null},z=()=>e.jsxs(e.Fragment,{children:[e.jsx(b,{items:[{name:"Dashboard",link:"/admin"},{name:"Chapters",link:"/admin/chapters"}]}),e.jsx(E,{})]});export{z as default};
