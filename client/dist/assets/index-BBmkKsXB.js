import{r as s,j as C,R as m}from"./index-CcyABReA.js";import{f as v,c as O,u as A}from"./index-BXwgaSlv.js";var E=s.forwardRef((e,t)=>{const{children:o,...r}=e,n=s.Children.toArray(o),l=n.find(w);if(l){const i=l.props.children,u=n.map(x=>x===l?s.Children.count(i)>1?s.Children.only(null):s.isValidElement(i)?i.props.children:null:x);return C.jsx(S,{...r,ref:t,children:s.isValidElement(i)?s.cloneElement(i,void 0,u):null})}return C.jsx(S,{...r,ref:t,children:o})});E.displayName="Slot";var S=s.forwardRef((e,t)=>{const{children:o,...r}=e;if(s.isValidElement(o)){const n=V(o),l=T(r,o.props);return o.type!==s.Fragment&&(l.ref=t?v(t,n):n),s.cloneElement(o,l)}return s.Children.count(o)>1?s.Children.only(null):null});S.displayName="SlotClone";var P=({children:e})=>C.jsx(C.Fragment,{children:e});function w(e){return s.isValidElement(e)&&e.type===P}function T(e,t){const o={...t};for(const r in t){const n=e[r],l=t[r];/^on[A-Z]/.test(r)?n&&l?o[r]=(...u)=>{l(...u),n(...u)}:n&&(o[r]=n):r==="style"?o[r]={...n,...l}:r==="className"&&(o[r]=[n,l].filter(Boolean).join(" "))}return{...e,...o}}function V(e){var r,n;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}function D(e){const t=e+"CollectionProvider",[o,r]=O(t),[n,l]=o(t,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:c,children:R}=p,a=m.useRef(null),f=m.useRef(new Map).current;return C.jsx(n,{scope:c,itemMap:f,collectionRef:a,children:R})};i.displayName=t;const u=e+"CollectionSlot",x=m.forwardRef((p,c)=>{const{scope:R,children:a}=p,f=l(u,R),d=A(c,f.collectionRef);return C.jsx(E,{ref:d,children:a})});x.displayName=u;const g=e+"CollectionItemSlot",h="data-radix-collection-item",M=m.forwardRef((p,c)=>{const{scope:R,children:a,...f}=p,d=m.useRef(null),N=A(c,d),y=l(g,R);return m.useEffect(()=>(y.itemMap.set(d,{ref:d,...f}),()=>void y.itemMap.delete(d))),C.jsx(E,{[h]:"",ref:N,children:a})});M.displayName=g;function I(p){const c=l(e+"CollectionConsumer",p);return m.useCallback(()=>{const a=c.collectionRef.current;if(!a)return[];const f=Array.from(a.querySelectorAll(`[${h}]`));return Array.from(c.itemMap.values()).sort((y,j)=>f.indexOf(y.ref.current)-f.indexOf(j.ref.current))},[c.collectionRef,c.itemMap])}return[{Provider:i,Slot:x,ItemSlot:M},I,r]}export{D as c};
