import{d as Pe,r as s,j as t,J as oe,K as Yt,I as De,e as K,c as V,Q as O,B as ee,n as ke,t as Te,v as Ae,G as Oe,w as Le,f as Fe}from"./index.js";import{B as Wt}from"./Breadcrumb.js";import{d as Ge,I as qt,R as Jt,T as Qt,a as Zt,b as _e,c as Se}from"./tabs2.js";import{C as $e}from"./checkbox.js";import{I as en}from"./input.js";import{c as Ke,d as Ue,b as j,P as q,g as tn,a as nn,u as Re}from"./index4.js";import{c as rn}from"./index11.js";import{u as on}from"./index9.js";import{P as an,h as sn,u as cn,R as ln,F as dn,D as un}from"./index5.js";import{c as Be,R as pn,A as mn,C as fn,a as hn}from"./index7.js";import{P as le}from"./index6.js";import{C as xn}from"./chevron-right.js";import{C as gn}from"./index8.js";import{T as Ve,a as He,b as $,c as W,d as ze,e as k}from"./table.js";import{S as vn}from"./search.js";import{C as Xe}from"./chevron-down.js";import{S as wn,a as Cn,b as Mn,c as jn,d as bn}from"./select.js";import{P as Ye}from"./package.js";import{U as yn}from"./users.js";import"./index12.js";import"./index10.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],In=Pe("Circle",Nn);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],We=Pe("Save",_n);var he=["Enter"," "],Sn=["ArrowDown","PageUp","Home"],qe=["ArrowUp","PageDown","End"],Rn=[...Sn,...qe],En={ltr:[...he,"ArrowRight"],rtl:[...he,"ArrowLeft"]},Pn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ae="Menu",[te,Dn,kn]=rn(ae),[H,Je]=Ke(ae,[kn,Be,Ge]),de=Be(),Qe=Ge(),[Tn,z]=H(ae),[An,se]=H(ae),Ze=e=>{const{__scopeMenu:r,open:n=!1,children:o,dir:a,onOpenChange:c,modal:d=!0}=e,m=de(r),[v,w]=s.useState(null),x=s.useRef(!1),l=Ue(c),h=on(a);return s.useEffect(()=>{const b=()=>{x.current=!0,document.addEventListener("pointerdown",M,{capture:!0,once:!0}),document.addEventListener("pointermove",M,{capture:!0,once:!0})},M=()=>x.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",M,{capture:!0}),document.removeEventListener("pointermove",M,{capture:!0})}},[]),t.jsx(pn,{...m,children:t.jsx(Tn,{scope:r,open:n,onOpenChange:l,content:v,onContentChange:w,children:t.jsx(An,{scope:r,onClose:s.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:x,dir:h,modal:d,children:o})})})};Ze.displayName=ae;var On="MenuAnchor",xe=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,a=de(n);return t.jsx(mn,{...a,...o,ref:r})});xe.displayName=On;var ge="MenuPortal",[Ln,et]=H(ge,{forceMount:void 0}),tt=e=>{const{__scopeMenu:r,forceMount:n,children:o,container:a}=e,c=z(ge,r);return t.jsx(Ln,{scope:r,forceMount:n,children:t.jsx(le,{present:n||c.open,children:t.jsx(an,{asChild:!0,container:a,children:o})})})};tt.displayName=ge;var S="MenuContent",[Fn,ve]=H(S),nt=s.forwardRef((e,r)=>{const n=et(S,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,c=z(S,e.__scopeMenu),d=se(S,e.__scopeMenu);return t.jsx(te.Provider,{scope:e.__scopeMenu,children:t.jsx(le,{present:o||c.open,children:t.jsx(te.Slot,{scope:e.__scopeMenu,children:d.modal?t.jsx(Gn,{...a,ref:r}):t.jsx($n,{...a,ref:r})})})})}),Gn=s.forwardRef((e,r)=>{const n=z(S,e.__scopeMenu),o=s.useRef(null),a=oe(r,o);return s.useEffect(()=>{const c=o.current;if(c)return sn(c)},[]),t.jsx(we,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:j(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),$n=s.forwardRef((e,r)=>{const n=z(S,e.__scopeMenu);return t.jsx(we,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Kn=Yt("MenuContent.ScrollLock"),we=s.forwardRef((e,r)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:m,onEntryFocus:v,onEscapeKeyDown:w,onPointerDownOutside:x,onFocusOutside:l,onInteractOutside:h,onDismiss:b,disableOutsideScroll:M,...I}=e,R=z(S,n),T=se(S,n),L=de(n),F=Qe(n),E=Dn(n),[J,p]=s.useState(null),C=s.useRef(null),i=oe(r,C,R.onContentChange),f=s.useRef(0),u=s.useRef(""),y=s.useRef(0),P=s.useRef(null),U=s.useRef("right"),B=s.useRef(0),Ht=M?ln:s.Fragment,zt=M?{as:Kn,allowPinchZoom:!0}:void 0,Xt=g=>{var Y,Ne;const _=u.current+g,D=E().filter(A=>!A.disabled),G=document.activeElement,me=(Y=D.find(A=>A.ref.current===G))==null?void 0:Y.textValue,fe=D.map(A=>A.textValue),ye=Zn(fe,_,me),Q=(Ne=D.find(A=>A.textValue===ye))==null?void 0:Ne.ref.current;(function A(Ie){u.current=Ie,window.clearTimeout(f.current),Ie!==""&&(f.current=window.setTimeout(()=>A(""),1e3))})(_),Q&&setTimeout(()=>Q.focus())};s.useEffect(()=>()=>window.clearTimeout(f.current),[]),cn();const X=s.useCallback(g=>{var D,G;return U.current===((D=P.current)==null?void 0:D.side)&&tr(g,(G=P.current)==null?void 0:G.area)},[]);return t.jsx(Fn,{scope:n,searchRef:u,onItemEnter:s.useCallback(g=>{X(g)&&g.preventDefault()},[X]),onItemLeave:s.useCallback(g=>{var _;X(g)||((_=C.current)==null||_.focus(),p(null))},[X]),onTriggerLeave:s.useCallback(g=>{X(g)&&g.preventDefault()},[X]),pointerGraceTimerRef:y,onPointerGraceIntentChange:s.useCallback(g=>{P.current=g},[]),children:t.jsx(Ht,{...zt,children:t.jsx(dn,{asChild:!0,trapped:a,onMountAutoFocus:j(c,g=>{var _;g.preventDefault(),(_=C.current)==null||_.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:t.jsx(un,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:w,onPointerDownOutside:x,onFocusOutside:l,onInteractOutside:h,onDismiss:b,children:t.jsx(Jt,{asChild:!0,...F,dir:T.dir,orientation:"vertical",loop:o,currentTabStopId:J,onCurrentTabStopIdChange:p,onEntryFocus:j(v,g=>{T.isUsingKeyboardRef.current||g.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(fn,{role:"menu","aria-orientation":"vertical","data-state":vt(R.open),"data-radix-menu-content":"",dir:T.dir,...L,...I,ref:i,style:{outline:"none",...I.style},onKeyDown:j(I.onKeyDown,g=>{const D=g.target.closest("[data-radix-menu-content]")===g.currentTarget,G=g.ctrlKey||g.altKey||g.metaKey,me=g.key.length===1;D&&(g.key==="Tab"&&g.preventDefault(),!G&&me&&Xt(g.key));const fe=C.current;if(g.target!==fe||!Rn.includes(g.key))return;g.preventDefault();const Q=E().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);qe.includes(g.key)&&Q.reverse(),Jn(Q)}),onBlur:j(e.onBlur,g=>{g.currentTarget.contains(g.target)||(window.clearTimeout(f.current),u.current="")}),onPointerMove:j(e.onPointerMove,ne(g=>{const _=g.target,D=B.current!==g.clientX;if(g.currentTarget.contains(_)&&D){const G=g.clientX>B.current?"right":"left";U.current=G,B.current=g.clientX}}))})})})})})})});nt.displayName=S;var Un="MenuGroup",Ce=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(q.div,{role:"group",...o,ref:r})});Ce.displayName=Un;var Bn="MenuLabel",rt=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(q.div,{...o,ref:r})});rt.displayName=Bn;var ce="MenuItem",Ee="menu.itemSelect",ue=s.forwardRef((e,r)=>{const{disabled:n=!1,onSelect:o,...a}=e,c=s.useRef(null),d=se(ce,e.__scopeMenu),m=ve(ce,e.__scopeMenu),v=oe(r,c),w=s.useRef(!1),x=()=>{const l=c.current;if(!n&&l){const h=new CustomEvent(Ee,{bubbles:!0,cancelable:!0});l.addEventListener(Ee,b=>o==null?void 0:o(b),{once:!0}),tn(l,h),h.defaultPrevented?w.current=!1:d.onClose()}};return t.jsx(ot,{...a,ref:v,disabled:n,onClick:j(e.onClick,x),onPointerDown:l=>{var h;(h=e.onPointerDown)==null||h.call(e,l),w.current=!0},onPointerUp:j(e.onPointerUp,l=>{var h;w.current||(h=l.currentTarget)==null||h.click()}),onKeyDown:j(e.onKeyDown,l=>{const h=m.searchRef.current!=="";n||h&&l.key===" "||he.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});ue.displayName=ce;var ot=s.forwardRef((e,r)=>{const{__scopeMenu:n,disabled:o=!1,textValue:a,...c}=e,d=ve(ce,n),m=Qe(n),v=s.useRef(null),w=oe(r,v),[x,l]=s.useState(!1),[h,b]=s.useState("");return s.useEffect(()=>{const M=v.current;M&&b((M.textContent??"").trim())},[c.children]),t.jsx(te.ItemSlot,{scope:n,disabled:o,textValue:a??h,children:t.jsx(qt,{asChild:!0,...m,focusable:!o,children:t.jsx(q.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:w,onPointerMove:j(e.onPointerMove,ne(M=>{o?d.onItemLeave(M):(d.onItemEnter(M),M.defaultPrevented||M.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:j(e.onPointerLeave,ne(M=>d.onItemLeave(M))),onFocus:j(e.onFocus,()=>l(!0)),onBlur:j(e.onBlur,()=>l(!1))})})})}),Vn="MenuCheckboxItem",at=s.forwardRef((e,r)=>{const{checked:n=!1,onCheckedChange:o,...a}=e;return t.jsx(dt,{scope:e.__scopeMenu,checked:n,children:t.jsx(ue,{role:"menuitemcheckbox","aria-checked":ie(n)?"mixed":n,...a,ref:r,"data-state":je(n),onSelect:j(a.onSelect,()=>o==null?void 0:o(ie(n)?!0:!n),{checkForDefaultPrevented:!1})})})});at.displayName=Vn;var st="MenuRadioGroup",[Hn,zn]=H(st,{value:void 0,onValueChange:()=>{}}),ct=s.forwardRef((e,r)=>{const{value:n,onValueChange:o,...a}=e,c=Ue(o);return t.jsx(Hn,{scope:e.__scopeMenu,value:n,onValueChange:c,children:t.jsx(Ce,{...a,ref:r})})});ct.displayName=st;var it="MenuRadioItem",lt=s.forwardRef((e,r)=>{const{value:n,...o}=e,a=zn(it,e.__scopeMenu),c=n===a.value;return t.jsx(dt,{scope:e.__scopeMenu,checked:c,children:t.jsx(ue,{role:"menuitemradio","aria-checked":c,...o,ref:r,"data-state":je(c),onSelect:j(o.onSelect,()=>{var d;return(d=a.onValueChange)==null?void 0:d.call(a,n)},{checkForDefaultPrevented:!1})})})});lt.displayName=it;var Me="MenuItemIndicator",[dt,Xn]=H(Me,{checked:!1}),ut=s.forwardRef((e,r)=>{const{__scopeMenu:n,forceMount:o,...a}=e,c=Xn(Me,n);return t.jsx(le,{present:o||ie(c.checked)||c.checked===!0,children:t.jsx(q.span,{...a,ref:r,"data-state":je(c.checked)})})});ut.displayName=Me;var Yn="MenuSeparator",pt=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(q.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});pt.displayName=Yn;var Wn="MenuArrow",mt=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,a=de(n);return t.jsx(hn,{...a,...o,ref:r})});mt.displayName=Wn;var qn="MenuSub",[fo,ft]=H(qn),Z="MenuSubTrigger",ht=s.forwardRef((e,r)=>{const n=z(Z,e.__scopeMenu),o=se(Z,e.__scopeMenu),a=ft(Z,e.__scopeMenu),c=ve(Z,e.__scopeMenu),d=s.useRef(null),{pointerGraceTimerRef:m,onPointerGraceIntentChange:v}=c,w={__scopeMenu:e.__scopeMenu},x=s.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return s.useEffect(()=>x,[x]),s.useEffect(()=>{const l=m.current;return()=>{window.clearTimeout(l),v(null)}},[m,v]),t.jsx(xe,{asChild:!0,...w,children:t.jsx(ot,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":vt(n.open),...e,ref:De(r,a.onTriggerChange),onClick:l=>{var h;(h=e.onClick)==null||h.call(e,l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:j(e.onPointerMove,ne(l=>{c.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),x()},100))})),onPointerLeave:j(e.onPointerLeave,ne(l=>{var b,M;x();const h=(b=n.content)==null?void 0:b.getBoundingClientRect();if(h){const I=(M=n.content)==null?void 0:M.dataset.side,R=I==="right",T=R?-5:5,L=h[R?"left":"right"],F=h[R?"right":"left"];c.onPointerGraceIntentChange({area:[{x:l.clientX+T,y:l.clientY},{x:L,y:h.top},{x:F,y:h.top},{x:F,y:h.bottom},{x:L,y:h.bottom}],side:I}),window.clearTimeout(m.current),m.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(l),l.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:j(e.onKeyDown,l=>{var b;const h=c.searchRef.current!=="";e.disabled||h&&l.key===" "||En[o.dir].includes(l.key)&&(n.onOpenChange(!0),(b=n.content)==null||b.focus(),l.preventDefault())})})})});ht.displayName=Z;var xt="MenuSubContent",gt=s.forwardRef((e,r)=>{const n=et(S,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,c=z(S,e.__scopeMenu),d=se(S,e.__scopeMenu),m=ft(xt,e.__scopeMenu),v=s.useRef(null),w=oe(r,v);return t.jsx(te.Provider,{scope:e.__scopeMenu,children:t.jsx(le,{present:o||c.open,children:t.jsx(te.Slot,{scope:e.__scopeMenu,children:t.jsx(we,{id:m.contentId,"aria-labelledby":m.triggerId,...a,ref:w,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var l;d.isUsingKeyboardRef.current&&((l=v.current)==null||l.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:j(e.onFocusOutside,x=>{x.target!==m.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:j(e.onEscapeKeyDown,x=>{d.onClose(),x.preventDefault()}),onKeyDown:j(e.onKeyDown,x=>{var b;const l=x.currentTarget.contains(x.target),h=Pn[d.dir].includes(x.key);l&&h&&(c.onOpenChange(!1),(b=m.trigger)==null||b.focus(),x.preventDefault())})})})})})});gt.displayName=xt;function vt(e){return e?"open":"closed"}function ie(e){return e==="indeterminate"}function je(e){return ie(e)?"indeterminate":e?"checked":"unchecked"}function Jn(e){const r=document.activeElement;for(const n of e)if(n===r||(n.focus(),document.activeElement!==r))return}function Qn(e,r){return e.map((n,o)=>e[(r+o)%e.length])}function Zn(e,r,n){const a=r.length>1&&Array.from(r).every(w=>w===r[0])?r[0]:r,c=n?e.indexOf(n):-1;let d=Qn(e,Math.max(c,0));a.length===1&&(d=d.filter(w=>w!==n));const v=d.find(w=>w.toLowerCase().startsWith(a.toLowerCase()));return v!==n?v:void 0}function er(e,r){const{x:n,y:o}=e;let a=!1;for(let c=0,d=r.length-1;c<r.length;d=c++){const m=r[c],v=r[d],w=m.x,x=m.y,l=v.x,h=v.y;x>o!=h>o&&n<(l-w)*(o-x)/(h-x)+w&&(a=!a)}return a}function tr(e,r){if(!r)return!1;const n={x:e.clientX,y:e.clientY};return er(n,r)}function ne(e){return r=>r.pointerType==="mouse"?e(r):void 0}var nr=Ze,rr=xe,or=tt,ar=nt,sr=Ce,cr=rt,ir=ue,lr=at,dr=ct,ur=lt,pr=ut,mr=pt,fr=mt,hr=ht,xr=gt,pe="DropdownMenu",[gr]=Ke(pe,[Je]),N=Je(),[vr,wt]=gr(pe),Ct=e=>{const{__scopeDropdownMenu:r,children:n,dir:o,open:a,defaultOpen:c,onOpenChange:d,modal:m=!0}=e,v=N(r),w=s.useRef(null),[x,l]=nn({prop:a,defaultProp:c??!1,onChange:d,caller:pe});return t.jsx(vr,{scope:r,triggerId:Re(),triggerRef:w,contentId:Re(),open:x,onOpenChange:l,onOpenToggle:s.useCallback(()=>l(h=>!h),[l]),modal:m,children:t.jsx(nr,{...v,open:x,onOpenChange:l,dir:o,modal:m,children:n})})};Ct.displayName=pe;var Mt="DropdownMenuTrigger",jt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...a}=e,c=wt(Mt,n),d=N(n);return t.jsx(rr,{asChild:!0,...d,children:t.jsx(q.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:De(r,c.triggerRef),onPointerDown:j(e.onPointerDown,m=>{!o&&m.button===0&&m.ctrlKey===!1&&(c.onOpenToggle(),c.open||m.preventDefault())}),onKeyDown:j(e.onKeyDown,m=>{o||(["Enter"," "].includes(m.key)&&c.onOpenToggle(),m.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(m.key)&&m.preventDefault())})})})});jt.displayName=Mt;var wr="DropdownMenuPortal",bt=e=>{const{__scopeDropdownMenu:r,...n}=e,o=N(r);return t.jsx(or,{...o,...n})};bt.displayName=wr;var yt="DropdownMenuContent",Nt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=wt(yt,n),c=N(n),d=s.useRef(!1);return t.jsx(ar,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...o,ref:r,onCloseAutoFocus:j(e.onCloseAutoFocus,m=>{var v;d.current||(v=a.triggerRef.current)==null||v.focus(),d.current=!1,m.preventDefault()}),onInteractOutside:j(e.onInteractOutside,m=>{const v=m.detail.originalEvent,w=v.button===0&&v.ctrlKey===!0,x=v.button===2||w;(!a.modal||x)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Nt.displayName=yt;var Cr="DropdownMenuGroup",Mr=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(sr,{...a,...o,ref:r})});Mr.displayName=Cr;var jr="DropdownMenuLabel",It=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(cr,{...a,...o,ref:r})});It.displayName=jr;var br="DropdownMenuItem",_t=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(ir,{...a,...o,ref:r})});_t.displayName=br;var yr="DropdownMenuCheckboxItem",St=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(lr,{...a,...o,ref:r})});St.displayName=yr;var Nr="DropdownMenuRadioGroup",Ir=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(dr,{...a,...o,ref:r})});Ir.displayName=Nr;var _r="DropdownMenuRadioItem",Rt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(ur,{...a,...o,ref:r})});Rt.displayName=_r;var Sr="DropdownMenuItemIndicator",Et=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(pr,{...a,...o,ref:r})});Et.displayName=Sr;var Rr="DropdownMenuSeparator",Pt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(mr,{...a,...o,ref:r})});Pt.displayName=Rr;var Er="DropdownMenuArrow",Pr=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(fr,{...a,...o,ref:r})});Pr.displayName=Er;var Dr="DropdownMenuSubTrigger",Dt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(hr,{...a,...o,ref:r})});Dt.displayName=Dr;var kr="DropdownMenuSubContent",kt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=N(n);return t.jsx(xr,{...a,...o,ref:r,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kt.displayName=kr;var Tr=Ct,Ar=jt,Or=bt,Tt=Nt,At=It,Ot=_t,Lt=St,Ft=Rt,Gt=Et,$t=Pt,Kt=Dt,Ut=kt;const Bt=Tr,Vt=Ar,Lr=s.forwardRef(({className:e,inset:r,children:n,...o},a)=>t.jsxs(Kt,{ref:a,className:K("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",e),...o,children:[n,t.jsx(xn,{className:"ml-auto"})]}));Lr.displayName=Kt.displayName;const Fr=s.forwardRef(({className:e,...r},n)=>t.jsx(Ut,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r}));Fr.displayName=Ut.displayName;const be=s.forwardRef(({className:e,sideOffset:r=4,...n},o)=>t.jsx(Or,{children:t.jsx(Tt,{ref:o,sideOffset:r,className:K("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));be.displayName=Tt.displayName;const re=s.forwardRef(({className:e,inset:r,...n},o)=>t.jsx(Ot,{ref:o,className:K("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",r&&"pl-8",e),...n}));re.displayName=Ot.displayName;const Gr=s.forwardRef(({className:e,children:r,checked:n,...o},a)=>t.jsxs(Lt,{ref:a,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...o,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Gt,{children:t.jsx(gn,{className:"h-4 w-4"})})}),r]}));Gr.displayName=Lt.displayName;const $r=s.forwardRef(({className:e,children:r,...n},o)=>t.jsxs(Ft,{ref:o,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Gt,{children:t.jsx(In,{className:"h-2 w-2 fill-current"})})}),r]}));$r.displayName=Ft.displayName;const Kr=s.forwardRef(({className:e,inset:r,...n},o)=>t.jsx(At,{ref:o,className:K("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",e),...n}));Kr.displayName=At.displayName;const Ur=s.forwardRef(({className:e,...r},n)=>t.jsx($t,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...r}));Ur.displayName=$t.displayName;const Br=({clusters:e,chapterSlug:r})=>{const[n,o]=s.useState([]),[a,c]=s.useState(""),[d,m]=s.useState({}),[v,w]=s.useState(!1),[x,l]=s.useState(!0),[h,b]=s.useState(!1);s.useEffect(()=>{M()},[r]),s.useEffect(()=>{if(n.length>0&&e.length>0){const p={};n.forEach(C=>{p[C.memberId]={},e.forEach(i=>{const f=C.clusterId?String(C.clusterId):null,u=String(i.clusterId);p[C.memberId][i.clusterId]=f===u})}),m(p)}},[e,n]);const M=async()=>{try{l(!0);const p=await V.get(`/api/member/search/chapter/${r}?query=${a}&includeWithoutCluster=true`);o(p.data);const C={};p.data.forEach(i=>{C[i.memberId]={},e.forEach(f=>{const u=i.clusterId?String(i.clusterId):null,y=String(f.clusterId);C[i.memberId][f.clusterId]=u===y})}),m(C),w(!1)}catch{O.error("Failed to fetch members")}finally{l(!1)}},I=()=>{M()},R=(p,C,i)=>{m(f=>{const u={...f};return i?Object.keys(u[p]).forEach(y=>{u[p][y]=y===C}):u[p][C]=!1,w(!0),u})},T=p=>{m(C=>{const i={...C};return E.forEach(f=>{i[f.memberId]&&Object.keys(i[f.memberId]).forEach(u=>{i[f.memberId][u]=u===p})}),w(!0),i})},L=p=>{m(C=>{const i={...C};return E.forEach(f=>{i[f.memberId]&&(i[f.memberId][p]=!1)}),w(!0),i})},F=async()=>{try{b(!0);const p=[];if(Object.keys(d).forEach(C=>{const i=Object.keys(d[C]).find(u=>d[C][u]),f=n.find(u=>u.memberId===C);f&&f.clusterId!==i&&p.push({memberId:C,clusterId:i||null})}),p.length===0){O.info("No changes to save");return}await V.put(`/api/clusters/bulk-update-members/${r}`,{updates:p}),O.success("Member cluster assignments updated successfully"),w(!1),M()}catch{O.error("Failed to update member assignments")}finally{b(!1)}},E=n.filter(p=>{var C,i;return((C=p.name)==null?void 0:C.toLowerCase().includes(a.toLowerCase()))||((i=p.phone)==null?void 0:i.includes(a))}),J=p=>E.filter(C=>{var i;return(i=d[C.memberId])==null?void 0:i[p]}).length;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t.jsx(en,{placeholder:"Search members by name or phone...",value:a,onChange:p=>c(p.target.value),onKeyPress:p=>p.key==="Enter"&&I(),className:"pl-10"})]}),t.jsx(ee,{onClick:I,variant:"outline",children:"Search"}),v&&t.jsxs(ee,{onClick:F,disabled:h,children:[t.jsx(We,{className:"mr-2 h-4 w-4"}),h?"Saving...":"Save Changes"]})]}),t.jsx("div",{className:"border rounded-lg overflow-hidden",children:t.jsxs(Ve,{children:[t.jsx(He,{children:t.jsxs($,{children:[t.jsx(W,{className:"w-64",children:"Member"}),t.jsx(W,{className:"w-32",children:"Phone"}),e.map(p=>t.jsx(W,{className:"text-center min-w-32",children:t.jsxs("div",{className:"space-y-2 flex flex-col items-center",children:[t.jsxs(Bt,{children:[t.jsx(Vt,{asChild:!0,children:t.jsxs(ee,{variant:"ghost",className:"font-medium p-0 h-auto hover:bg-gray-100 flex items-center gap-1",children:[p.clusterName,t.jsx(Xe,{className:"h-3 w-3"})]})}),t.jsxs(be,{align:"center",children:[t.jsx(re,{onClick:()=>T(p.clusterId),className:"cursor-pointer",children:"Select All"}),t.jsx(re,{onClick:()=>L(p.clusterId),className:"cursor-pointer text-red-600 focus:text-red-600",children:"Unselect All"})]})]}),t.jsxs("div",{className:"text-xs text-gray-300",children:["(",J(p.clusterId)," members)"]})]})},p.clusterId))]})}),t.jsx(ze,{children:x?t.jsx($,{children:t.jsx(k,{colSpan:e.length+2,className:"text-center py-8",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{children:"Loading members..."})]})})}):E.length>0?E.map(p=>t.jsxs($,{children:[t.jsx(k,{className:"font-medium",children:p.name}),t.jsx(k,{children:p.phone}),e.map(C=>{var i;return t.jsx(k,{className:"text-center",children:t.jsx($e,{checked:!!((i=d[p.memberId])!=null&&i[C.clusterId]),onCheckedChange:f=>R(p.memberId,C.clusterId,f)})},C.clusterId)})]},p.memberId)):t.jsx($,{children:t.jsx(k,{colSpan:e.length+2,className:"text-center py-8 text-gray-500",children:"No members found. Try adjusting your search criteria."})})})]})})]})},Vr=({clusters:e,chapterSlug:r})=>{const[n,o]=s.useState([]),[a,c]=s.useState(""),[d,m]=s.useState([]),[v,w]=s.useState({}),[x,l]=s.useState(!1),[h,b]=s.useState(!1),[M,I]=s.useState(!1);s.useEffect(()=>{R()},[r]),s.useEffect(()=>{a&&T()},[a]);const R=async()=>{try{const i=await V.get(`/api/term/chapter/${r}`);o(i.data),i.data.length>0&&c(i.data[0].termId)}catch{O.error("Failed to fetch terms")}},T=async()=>{try{b(!0);const i=await V.get(`/api/packages/admin/all/${r}/term/${a}`);m(i.data);const u=(await V.get(`/api/clusters/package-mappings/${r}/term/${a}`)).data,y={};i.data.forEach(P=>{y[P.packageId]={},e.forEach(U=>{y[P.packageId][U.clusterId]=u.some(B=>B.packageId===P.packageId&&B.clusterId===U.clusterId&&B.isActive)})}),w(y),l(!1)}catch{O.error("Failed to fetch packages")}finally{b(!1)}},L=(i,f,u)=>{w(y=>({...y,[i]:{...y[i],[f]:u}})),l(!0)},F=i=>{w(f=>{const u={...f};return d.forEach(y=>{u[y.packageId]&&(u[y.packageId][i]=!0)}),l(!0),u})},E=i=>{w(f=>{const u={...f};return d.forEach(y=>{u[y.packageId]&&(u[y.packageId][i]=!1)}),l(!0),u})},J=async()=>{try{I(!0);const i=[];Object.keys(v).forEach(f=>{Object.keys(v[f]).forEach(u=>{i.push({packageId:f,clusterId:u,isActive:v[f][u]})})}),await V.put(`/api/clusters/bulk-update-packages/${r}`,{updates:i}),O.success("Package cluster assignments updated successfully"),l(!1)}catch{O.error("Failed to update package assignments")}finally{I(!1)}},p=d.reduce((i,f)=>{const u=f.packageParent||"Other";return i[u]||(i[u]=[]),i[u].push(f),i},{}),C=i=>d.filter(f=>{var u;return(u=v[f.packageId])==null?void 0:u[i]}).length;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs(wn,{value:a,onValueChange:c,children:[t.jsx(Cn,{className:"w-64",children:t.jsx(Mn,{placeholder:"Select a term"})}),t.jsx(jn,{children:n.map(i=>t.jsx(bn,{value:i.termId,children:i.termName},i.termId))})]})}),x&&t.jsxs(ee,{onClick:J,disabled:M,children:[t.jsx(We,{className:"mr-2 h-4 w-4"}),M?"Saving...":"Save Changes"]})]}),a&&Object.keys(p).length>0?t.jsx("div",{className:"space-y-6",children:Object.entries(p).map(([i,f])=>t.jsxs(ke,{children:[t.jsxs(Te,{children:[t.jsxs(Ae,{className:"flex items-center gap-2",children:[t.jsx(Ye,{className:"h-5 w-5"}),i]}),t.jsx(Oe,{children:"Assign packages to clusters"})]}),t.jsx(Le,{children:t.jsx("div",{className:"border rounded-lg overflow-hidden",children:t.jsxs(Ve,{children:[t.jsx(He,{children:t.jsxs($,{children:[t.jsx(W,{className:"w-64",children:"Package"}),t.jsx(W,{className:"w-32",children:"Amount"}),e.map(u=>t.jsx(W,{className:"text-center min-w-32",children:t.jsxs("div",{className:"space-y-2 flex flex-col items-center",children:[t.jsxs(Bt,{children:[t.jsx(Vt,{asChild:!0,children:t.jsxs(ee,{variant:"ghost",className:"font-medium p-0 h-auto hover:bg-gray-100 flex items-center gap-1",children:[u.clusterName,t.jsx(Xe,{className:"h-3 w-3"})]})}),t.jsxs(be,{align:"center",children:[t.jsx(re,{onClick:()=>F(u.clusterId),className:"cursor-pointer",children:"Select All"}),t.jsx(re,{onClick:()=>E(u.clusterId),className:"cursor-pointer text-red-600 focus:text-red-600",children:"Unselect All"})]})]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["(",C(u.clusterId)," packages)"]})]})},u.clusterId))]})}),t.jsx(ze,{children:h?t.jsx($,{children:t.jsx(k,{colSpan:e.length+2,className:"text-center py-8",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{children:"Loading packages..."})]})})}):f.length>0?f.map(u=>t.jsxs($,{children:[t.jsx(k,{className:"font-medium",children:u.packageName}),t.jsxs(k,{children:["â‚¹",u.packageFeeAmount||0]}),e.map(y=>{var P;return t.jsx(k,{className:"text-center",children:t.jsx($e,{checked:!!((P=v[u.packageId])!=null&&P[y.clusterId]),onCheckedChange:U=>L(u.packageId,y.clusterId,U)})},y.clusterId)})]},u.packageId)):t.jsx($,{children:t.jsx(k,{colSpan:e.length+2,className:"text-center py-8 text-gray-500",children:"No packages found in this category."})})})]})})})]},i))}):a?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No packages found for the selected term."}):t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Please select a term to view packages."})]})},Hr=()=>{const{chapterSlug:e}=Fe(),[r,n]=s.useState([]),[o,a]=s.useState("members");s.useEffect(()=>{c()},[e]);const c=async()=>{try{const d=await V.get(`/api/clusters/${e}`);n(d.data)}catch{O.error("Failed to fetch clusters")}};return t.jsxs("div",{className:"container mx-auto p-4",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clusters"})}),t.jsxs(ke,{children:[t.jsxs(Te,{children:[t.jsx(Ae,{children:"Cluster Management"}),t.jsx(Oe,{children:"Manage member assignments and package assignments across all clusters"})]}),t.jsx(Le,{children:t.jsxs(Qt,{value:o,onValueChange:a,className:"w-full",children:[t.jsxs(Zt,{className:"grid w-full grid-cols-2",children:[t.jsxs(_e,{value:"members",className:"flex items-center gap-2",children:[t.jsx(yn,{className:"h-4 w-4"}),"Members"]}),t.jsxs(_e,{value:"packages",className:"flex items-center gap-2",children:[t.jsx(Ye,{className:"h-4 w-4"}),"Packages"]})]}),t.jsx(Se,{value:"members",className:"mt-6",children:t.jsx(Br,{clusters:r,chapterSlug:e})}),t.jsx(Se,{value:"packages",className:"mt-6",children:t.jsx(Vr,{clusters:r,chapterSlug:e})})]})})]})]})},ho=()=>{const{chapterSlug:e}=Fe();return t.jsxs(t.Fragment,{children:[t.jsx(Wt,{items:[{name:"Dashboard",link:"/admin"},{name:"Chapter",link:"/admin/chapters"},{name:"Chapter Clusters",link:`/admin/chapters/${e}/clusters`},{name:"Manage Clusters",link:`/admin/chapters/${e}/clusters/manage`}]}),t.jsx(Hr,{})]})};export{ho as default};
