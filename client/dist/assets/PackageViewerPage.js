import{r as m,j as t,n as Z,k as ye,c as V,Q as W,B as ee,C as va,i as ya,_ as ba,q as wa,v as ht,R as z,d as ke}from"./index.js";import{B as Sa}from"./Breadcrumb.js";import{f as fe,C as Ca}from"./ChooseMemberPopoverCommand.js";import{T as ja,a as Ia,b as ot,c as lt}from"./tabs.js";import{B as Na}from"./badge.js";import{C as Pe}from"./circle-alert.js";import{B as Ae}from"./banknote.js";import{C as Re}from"./credit-card.js";import{C as pt}from"./chevron-right.js";import{U as Pa}from"./user.js";import{S as Aa}from"./skeleton.js";import{S as it}from"./switch.js";import{L as ct}from"./label.js";import{C as Ra}from"./chevron-up.js";import{C as ft}from"./chevron-down.js";import{U as _a}from"./upload.js";import{C as gt}from"./chevron-left.js";import{A as Ta,a as Ea,b as ka,c as Ma,f as Da,d as $a,g as Ba,h as Fa}from"./alert-dialog.js";import{D as Oa,f as La,a as Wa}from"./dialog.js";import{C as Ha,D as Ua,F as Va,G as za,a as be,H as qa,T as Ya,I as Qa,g as Me,u as De,s as re,h as xt,e as $e}from"./TransitionGroupContext.js";import{u as Ka,a as Xa,b as oe}from"./useSlot.js";import{d as vt,o as yt,u as bt,b as ge,a as Ga,B as Za}from"./Button.js";import{S as Ja,a as es,b as ts,c as as,d as ss}from"./select.js";import{I as rs}from"./input.js";import{c as wt,u as Be,b as St,P as de,a as Ct,e as ns}from"./index4.js";import{c as os}from"./index11.js";import{P as ls}from"./index6.js";import{u as is}from"./index9.js";import{B as jt,m as Fe,c as It,u as cs,a as _e}from"./CircularProgress.js";import"./popover.js";import"./index5.js";import"./index7.js";import"./index8.js";import"./command.js";import"./index3.js";import"./search.js";import"./chevrons-up-down.js";import"./check.js";import"./index13.js";import"./index12.js";import"./index10.js";const ds=r=>{var s;const e={systemProps:{},otherProps:{}},a=((s=r==null?void 0:r.theme)==null?void 0:s.unstable_sxConfig)??Ua;return Object.keys(r).forEach(n=>{a[n]?e.systemProps[n]=r[n]:e.otherProps[n]=r[n]}),e};function ms(r){const{sx:e,...a}=r,{systemProps:s,otherProps:n}=ds(a);let o;return Array.isArray(e)?o=[s,...e]:typeof e=="function"?o=(...l)=>{const c=e(...l);return Ha(c)?{...s,...c}:s}:o={...s,...e},{...n,sx:o}}function us(r={}){const{themeId:e,defaultTheme:a,defaultClassName:s="MuiBox-root",generateClassName:n}=r,o=Va("div",{shouldForwardProp:c=>c!=="theme"&&c!=="sx"&&c!=="as"})(za);return m.forwardRef(function(i,y){const u=Ka(a),{className:f,component:d="div",...w}=ms(i);return t.jsx(o,{as:d,ref:y,className:Z(f,n?n(s):s),theme:e&&u[e]||u,...w})})}const hs=be("MuiBox",["root"]),ps=Qa(),xe=us({themeId:Ya,defaultTheme:ps,defaultClassName:hs.root,generateClassName:qa.generate});function fs(r){return Me("MuiTab",r)}const Q=be("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),gs=r=>{const{classes:e,textColor:a,fullWidth:s,wrapped:n,icon:o,label:l,selected:c,disabled:i}=r,y={root:["root",o&&l&&"labelIcon",`textColor${xt(a)}`,s&&"fullWidth",n&&"wrapped",c&&"selected",i&&"disabled"],icon:["iconWrapper","icon"]};return $e(y,fs,e)},xs=re(jt,{name:"MuiTab",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:a}=r;return[e.root,a.label&&a.icon&&e.labelIcon,e[`textColor${xt(a.textColor)}`],a.fullWidth&&e.fullWidth,a.wrapped&&e.wrapped,{[`& .${Q.iconWrapper}`]:e.iconWrapper},{[`& .${Q.icon}`]:e.icon}]}})(Fe(({theme:r})=>({...r.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:a})=>e.icon&&e.label&&a==="top",style:{[`& > .${Q.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:a})=>e.icon&&e.label&&a==="bottom",style:{[`& > .${Q.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:a})=>e.icon&&e.label&&a==="start",style:{[`& > .${Q.icon}`]:{marginRight:r.spacing(1)}}},{props:({ownerState:e,iconPosition:a})=>e.icon&&e.label&&a==="end",style:{[`& > .${Q.icon}`]:{marginLeft:r.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Q.selected}`]:{opacity:1},[`&.${Q.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${Q.selected}`]:{color:(r.vars||r).palette.primary.main},[`&.${Q.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${Q.selected}`]:{color:(r.vars||r).palette.secondary.main},[`&.${Q.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:r.typography.pxToRem(12)}}]}))),vs=m.forwardRef(function(e,a){const s=De({props:e,name:"MuiTab"}),{className:n,disabled:o=!1,disableFocusRipple:l=!1,fullWidth:c,icon:i,iconPosition:y="top",indicator:u,label:f,onChange:d,onClick:w,onFocus:S,selected:g,selectionFollowsFocus:j,textColor:b="inherit",value:h,wrapped:x=!1,...p}=s,P={...s,disabled:o,disableFocusRipple:l,selected:g,icon:!!i,iconPosition:y,label:!!f,fullWidth:c,textColor:b,wrapped:x},R=gs(P),E=i&&f&&m.isValidElement(i)?m.cloneElement(i,{className:Z(R.icon,i.props.className)}):i,A=_=>{!g&&d&&d(_,h),w&&w(_)},k=_=>{j&&!g&&d&&d(_,h),S&&S(_)};return t.jsxs(xs,{focusRipple:!l,className:Z(R.root,n),ref:a,role:"tab","aria-selected":g,disabled:o,onClick:A,onFocus:k,ownerState:P,tabIndex:g?0:-1,...p,children:[y==="top"||y==="start"?t.jsxs(m.Fragment,{children:[E,f]}):t.jsxs(m.Fragment,{children:[f,E]}),u]})}),ys=It(t.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),bs=It(t.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function ws(r){return(1+Math.sin(Math.PI*r-Math.PI/2))/2}function Ss(r,e,a,s={},n=()=>{}){const{ease:o=ws,duration:l=300}=s;let c=null;const i=e[r];let y=!1;const u=()=>{y=!0},f=d=>{if(y){n(new Error("Animation cancelled"));return}c===null&&(c=d);const w=Math.min(1,(d-c)/l);if(e[r]=o(w)*(a-i)+i,w>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(f)};return i===a?(n(new Error("Element already at target position")),u):(requestAnimationFrame(f),u)}const Cs={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function js(r){const{onChange:e,...a}=r,s=m.useRef(),n=m.useRef(null),o=()=>{s.current=n.current.offsetHeight-n.current.clientHeight};return cs(()=>{const l=vt(()=>{const i=s.current;o(),i!==s.current&&e(s.current)}),c=yt(n.current);return c.addEventListener("resize",l),()=>{l.clear(),c.removeEventListener("resize",l)}},[e]),m.useEffect(()=>{o(),e(s.current)},[e]),t.jsx("div",{style:Cs,...a,ref:n})}function Is(r){return Me("MuiTabScrollButton",r)}const Ns=be("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Ps=r=>{const{classes:e,orientation:a,disabled:s}=r;return $e({root:["root",a,s&&"disabled"]},Is,e)},As=re(jt,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:a}=r;return[e.root,a.orientation&&e[a.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Ns.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),Rs=m.forwardRef(function(e,a){const s=De({props:e,name:"MuiTabScrollButton"}),{className:n,slots:o={},slotProps:l={},direction:c,orientation:i,disabled:y,...u}=s,f=bt(),d={isRtl:f,...s},w=Ps(d),S=o.StartScrollButtonIcon??ys,g=o.EndScrollButtonIcon??bs,j=ge({elementType:S,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d}),b=ge({elementType:g,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d});return t.jsx(As,{component:"div",className:Z(w.root,n),ref:a,role:null,ownerState:d,tabIndex:null,...u,style:{...u.style,...i==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${f?-90:90}deg)`}},children:c==="left"?t.jsx(S,{...j}):t.jsx(g,{...b})})});function _s(r){return Me("MuiTabs",r)}const Te=be("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),dt=(r,e)=>r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r.firstChild,mt=(r,e)=>r===e?r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r.lastChild,pe=(r,e,a)=>{let s=!1,n=a(r,e);for(;n;){if(n===r.firstChild){if(s)return;s=!0}const o=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||o)n=a(r,n);else{n.focus();return}}},Ts=r=>{const{vertical:e,fixed:a,hideScrollbar:s,scrollableX:n,scrollableY:o,centered:l,scrollButtonsHideMobile:c,classes:i}=r;return $e({root:["root",e&&"vertical"],scroller:["scroller",a&&"fixed",s&&"hideScrollbar",n&&"scrollableX",o&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",l&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",c&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[s&&"hideScrollbar"]},_s,i)},Es=re("div",{name:"MuiTabs",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:a}=r;return[{[`& .${Te.scrollButtons}`]:e.scrollButtons},{[`& .${Te.scrollButtons}`]:a.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,a.vertical&&e.vertical]}})(Fe(({theme:r})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${Te.scrollButtons}`]:{[r.breakpoints.down("sm")]:{display:"none"}}}}]}))),ks=re("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(r,e)=>{const{ownerState:a}=r;return[e.scroller,a.fixed&&e.fixed,a.hideScrollbar&&e.hideScrollbar,a.scrollableX&&e.scrollableX,a.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:r})=>r.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:r})=>r.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:r})=>r.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:r})=>r.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),Ms=re("div",{name:"MuiTabs",slot:"List",overridesResolver:(r,e)=>{const{ownerState:a}=r;return[e.list,e.flexContainer,a.vertical&&e.flexContainerVertical,a.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:r})=>r.vertical,style:{flexDirection:"column"}},{props:({ownerState:r})=>r.centered,style:{justifyContent:"center"}}]}),Ds=re("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(r,e)=>e.indicator})(Fe(({theme:r})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(r.vars||r).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(r.vars||r).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),$s=re(js)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),ut={},Bs=m.forwardRef(function(e,a){const s=De({props:e,name:"MuiTabs"}),n=Xa(),o=bt(),{"aria-label":l,"aria-labelledby":c,action:i,centered:y=!1,children:u,className:f,component:d="div",allowScrollButtonsMobile:w=!1,indicatorColor:S="primary",onChange:g,orientation:j="horizontal",ScrollButtonComponent:b,scrollButtons:h="auto",selectionFollowsFocus:x,slots:p={},slotProps:P={},TabIndicatorProps:R={},TabScrollButtonProps:E={},textColor:A="primary",value:k,variant:_="standard",visibleScrollbar:B=!1,...q}=s,H=_==="scrollable",F=j==="vertical",Y=F?"scrollTop":"scrollLeft",J=F?"top":"left",I=F?"bottom":"right",$=F?"clientHeight":"clientWidth",U=F?"height":"width",N={...s,component:d,allowScrollButtonsMobile:w,indicatorColor:S,orientation:j,vertical:F,scrollButtons:h,textColor:A,variant:_,visibleScrollbar:B,fixed:!H,hideScrollbar:H&&!B,scrollableX:H&&!F,scrollableY:H&&F,centered:y&&!H,scrollButtonsHideMobile:!w},L=Ts(N),Kt=ge({elementType:p.StartScrollButtonIcon,externalSlotProps:P.startScrollButtonIcon,ownerState:N}),Xt=ge({elementType:p.EndScrollButtonIcon,externalSlotProps:P.endScrollButtonIcon,ownerState:N}),[ze,Gt]=m.useState(!1),[te,qe]=m.useState(ut),[Ye,Zt]=m.useState(!1),[Qe,Jt]=m.useState(!1),[Ke,ea]=m.useState(!1),[Xe,ta]=m.useState({overflow:"hidden",scrollbarWidth:0}),Ge=new Map,G=m.useRef(null),ae=m.useRef(null),ne={slots:p,slotProps:{indicator:R,scrollButton:E,...P}},Ze=()=>{const v=G.current;let C;if(v){const D=v.getBoundingClientRect();C={clientWidth:v.clientWidth,scrollLeft:v.scrollLeft,scrollTop:v.scrollTop,scrollWidth:v.scrollWidth,top:D.top,bottom:D.bottom,left:D.left,right:D.right}}let M;if(v&&k!==!1){const D=ae.current.children;if(D.length>0){const O=D[Ge.get(k)];M=O?O.getBoundingClientRect():null}}return{tabsMeta:C,tabMeta:M}},ie=_e(()=>{const{tabsMeta:v,tabMeta:C}=Ze();let M=0,D;F?(D="top",C&&v&&(M=C.top-v.top+v.scrollTop)):(D=o?"right":"left",C&&v&&(M=(o?-1:1)*(C[D]-v[D]+v.scrollLeft)));const O={[D]:M,[U]:C?C[U]:0};if(typeof te[D]!="number"||typeof te[U]!="number")qe(O);else{const X=Math.abs(te[D]-O[D]),se=Math.abs(te[U]-O[U]);(X>=1||se>=1)&&qe(O)}}),je=(v,{animation:C=!0}={})=>{C?Ss(Y,G.current,v,{duration:n.transitions.duration.standard}):G.current[Y]=v},Je=v=>{let C=G.current[Y];F?C+=v:C+=v*(o?-1:1),je(C)},et=()=>{const v=G.current[$];let C=0;const M=Array.from(ae.current.children);for(let D=0;D<M.length;D+=1){const O=M[D];if(C+O[$]>v){D===0&&(C=v);break}C+=O[$]}return C},aa=()=>{Je(-1*et())},sa=()=>{Je(et())},[ra,{onChange:me,...na}]=oe("scrollbar",{className:Z(L.scrollableX,L.hideScrollbar),elementType:$s,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:N}),oa=m.useCallback(v=>{me==null||me(v),ta({overflow:null,scrollbarWidth:v})},[me]),[tt,at]=oe("scrollButtons",{className:Z(L.scrollButtons,E.className),elementType:Rs,externalForwardedProps:ne,ownerState:N,additionalProps:{orientation:j,slots:{StartScrollButtonIcon:p.startScrollButtonIcon||p.StartScrollButtonIcon,EndScrollButtonIcon:p.endScrollButtonIcon||p.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Kt,endScrollButtonIcon:Xt}}}),la=()=>{const v={};v.scrollbarSizeListener=H?t.jsx(ra,{...na,onChange:oa}):null;const M=H&&(h==="auto"&&(Ye||Qe)||h===!0);return v.scrollButtonStart=M?t.jsx(tt,{direction:o?"right":"left",onClick:aa,disabled:!Ye,...at}):null,v.scrollButtonEnd=M?t.jsx(tt,{direction:o?"left":"right",onClick:sa,disabled:!Qe,...at}):null,v},st=_e(v=>{const{tabsMeta:C,tabMeta:M}=Ze();if(!(!M||!C)){if(M[J]<C[J]){const D=C[Y]+(M[J]-C[J]);je(D,{animation:v})}else if(M[I]>C[I]){const D=C[Y]+(M[I]-C[I]);je(D,{animation:v})}}}),ue=_e(()=>{H&&h!==!1&&ea(!Ke)});m.useEffect(()=>{const v=vt(()=>{G.current&&ie()});let C;const M=X=>{X.forEach(se=>{se.removedNodes.forEach(ce=>{C==null||C.unobserve(ce)}),se.addedNodes.forEach(ce=>{C==null||C.observe(ce)})}),v(),ue()},D=yt(G.current);D.addEventListener("resize",v);let O;return typeof ResizeObserver<"u"&&(C=new ResizeObserver(v),Array.from(ae.current.children).forEach(X=>{C.observe(X)})),typeof MutationObserver<"u"&&(O=new MutationObserver(M),O.observe(ae.current,{childList:!0})),()=>{v.clear(),D.removeEventListener("resize",v),O==null||O.disconnect(),C==null||C.disconnect()}},[ie,ue]),m.useEffect(()=>{const v=Array.from(ae.current.children),C=v.length;if(typeof IntersectionObserver<"u"&&C>0&&H&&h!==!1){const M=v[0],D=v[C-1],O={root:G.current,threshold:.99},X=Ne=>{Zt(!Ne[0].isIntersecting)},se=new IntersectionObserver(X,O);se.observe(M);const ce=Ne=>{Jt(!Ne[0].isIntersecting)},nt=new IntersectionObserver(ce,O);return nt.observe(D),()=>{se.disconnect(),nt.disconnect()}}},[H,h,Ke,u==null?void 0:u.length]),m.useEffect(()=>{Gt(!0)},[]),m.useEffect(()=>{ie()}),m.useEffect(()=>{st(ut!==te)},[st,te]),m.useImperativeHandle(i,()=>({updateIndicator:ie,updateScrollButtons:ue}),[ie,ue]);const[ia,ca]=oe("indicator",{className:Z(L.indicator,R.className),elementType:Ds,externalForwardedProps:ne,ownerState:N,additionalProps:{style:te}}),rt=t.jsx(ia,{...ca});let he=0;const da=m.Children.map(u,v=>{if(!m.isValidElement(v))return null;const C=v.props.value===void 0?he:v.props.value;Ge.set(C,he);const M=C===k;return he+=1,m.cloneElement(v,{fullWidth:_==="fullWidth",indicator:M&&!ze&&rt,selected:M,selectionFollowsFocus:x,onChange:g,textColor:A,value:C,...he===1&&k===!1&&!v.props.tabIndex?{tabIndex:0}:{}})}),ma=v=>{if(v.altKey||v.shiftKey||v.ctrlKey||v.metaKey)return;const C=ae.current,M=Ga(C).activeElement;if(M.getAttribute("role")!=="tab")return;let O=j==="horizontal"?"ArrowLeft":"ArrowUp",X=j==="horizontal"?"ArrowRight":"ArrowDown";switch(j==="horizontal"&&o&&(O="ArrowRight",X="ArrowLeft"),v.key){case O:v.preventDefault(),pe(C,M,mt);break;case X:v.preventDefault(),pe(C,M,dt);break;case"Home":v.preventDefault(),pe(C,null,dt);break;case"End":v.preventDefault(),pe(C,null,mt);break}},Ie=la(),[ua,ha]=oe("root",{ref:a,className:Z(L.root,f),elementType:Es,externalForwardedProps:{...ne,...q,component:d},ownerState:N}),[pa,fa]=oe("scroller",{ref:G,className:L.scroller,elementType:ks,externalForwardedProps:ne,ownerState:N,additionalProps:{style:{overflow:Xe.overflow,[F?`margin${o?"Left":"Right"}`:"marginBottom"]:B?void 0:-Xe.scrollbarWidth}}}),[ga,xa]=oe("list",{ref:ae,className:Z(L.list,L.flexContainer),elementType:Ms,externalForwardedProps:ne,ownerState:N,getSlotProps:v=>({...v,onKeyDown:C=>{var M;ma(C),(M=v.onKeyDown)==null||M.call(v,C)}})});return t.jsxs(ua,{...ha,children:[Ie.scrollButtonStart,Ie.scrollbarSizeListener,t.jsxs(pa,{...fa,children:[t.jsx(ga,{"aria-label":l,"aria-labelledby":c,"aria-orientation":j==="vertical"?"vertical":null,role:"tablist",...xa,children:da}),ze&&rt]}),Ie.scrollButtonEnd]})}),Nt=(r,e,a,s)=>{const n=new Date(e.packagePayableEndDate);if(typeof e.meetingIds=="string"&&(e.meetingIds=JSON.parse(e.meetingIds)),e.status==="pending")return{message:"You have applied for this package. Please wait for approval",totalAmount:null,penaltyAmount:null,discountAmount:null,isDisabled:!0};if(e.status==="rejected")return{message:"Your package application has been rejected",totalAmount:null,penaltyAmount:null,discountAmount:null,isDisabled:!0};if(e.status==="approved")return{message:"Your package application has been approved",totalAmount:null,penaltyAmount:null,discountAmount:null,isDisabled:!0};if(e.packagePayableStartDate&&r<new Date(e.packagePayableStartDate))return{message:"Package is not open to payable yet",totalAmount:null,penaltyAmount:null,discountAmount:null,isDisabled:!0};if(!e.allowAfterEndDate&&r>n)return{message:"Package is not open to payable anymore",totalAmount:null,penaltyAmount:null,discountAmount:null,isDisabled:!0};if(e.allowPackagePurchaseIfFeesPaid&&Fs(e,a))return{message:"Package has overlapping payments",totalAmount:null,penaltyAmount:null,discountAmount:null,isDisabled:!0};let o=e.packageFeeAmount,l=0,c=0;const i=(d,w)=>{switch(d){case"Daily":return w;case"Weekly":return Math.ceil(w/7);case"Monthly":return Math.ceil(w/30);case"Quarterly":return Math.ceil(w/90);case"lumpsum":case"Meetingly":return 1;default:return 0}};if(r<=new Date(e.discountEndDate)){const d=Math.ceil((new Date(e.discountEndDate)-r)/864e5);c=i(e.discountType,d)*e.discountAmount}if(r>n&&e.allowPenaltyPayableAfterEndDate){const d=Math.ceil((r-n)/864e5);l=i(e.penaltyType,d)*e.penaltyAmount}let y=o+l-c,u=0;return u=Array.isArray(e.meetingIds)?e.meetingIds.reduce((d,w)=>{const S=a.find(g=>g.meetingId===w);return d+(S&&S.isPaid?S.meetingFeeMembers:0)},0):0,{totalAmount:y-s,penaltyAmount:l,discountAmount:c,paidFees:u,previousBalance:s,isDisabled:!e.allowAfterEndDate&&r>n}},Fs=(r,e)=>{var a;return(a=r.meetingIds)==null?void 0:a.some(s=>{const n=e.find(o=>o.meetingId===s);return n&&n.isPaid})},Pt=m.createContext(),Os=({children:r})=>{const{chapterData:e}=ye(),[a,s]=m.useState(new Date),n=m.useRef(!0),o=m.useRef(!1),[l,c]=m.useState({selectedReceiver:null,saveReceiverSelection:!1,selectedReceiverObject:null,receivers:[],selectedPackage:null,pendingPayments:[],packageData:null,parentType:null,packageParents:[],chapterMeetings:void 0,balance:void 0,lastUpdated:null,lastSelectedPackageTime:null,selectedMemberId:null,terms:[],selectedTermId:null}),i=()=>{c(x=>({...x,selectedPackage:null,selectedReceiver:null,selectedReceiverObject:null,saveReceiverSelection:!1,lastSelectedPackageTime:null}))},y=x=>{c(p=>({...p,selectedPackage:x,lastSelectedPackageTime:new Date}))},u=m.useCallback(async()=>{if(e!=null&&e.chapterId)try{const x=await V.get(`/api/feeReceiver/current/${e.chapterId}`,{params:{date:fe(a)}});c(p=>({...p,receivers:x.data}))}catch(x){console.error("Error fetching current receivers:",x),W.error("Failed to fetch fee receivers")}},[e==null?void 0:e.chapterId,a]),f=async()=>{if(!(e!=null&&e.chapterId)){console.warn("Chapter ID is not available. Skipping terms fetch.");return}try{const x=await V.get(`/api/term/chapter/${e.chapterId}`),p=x.data.filter(R=>R.status==="active");let P=l.selectedTermId;if(!P||!p.find(R=>R.termId===P)){const R=new Date,E=p.find(A=>{const k=new Date(A.startDate),_=new Date(A.endDate);return R>=k&&R<=_});if(E)P=E.termId;else if(p.length>0){const A=p.filter(k=>new Date(k.startDate)>R);A.length>0?P=A.reduce((_,B)=>new Date(_.startDate)<new Date(B.startDate)?_:B).termId:P=p[0].termId}}c(R=>({...R,terms:x.data,selectedTermId:P}))}catch(x){console.error("Error fetching terms:",x),W.error("Failed to fetch terms")}},d=m.useCallback(async(x,p=null)=>{if(!(p||l.selectedTermId)||!(e!=null&&e.chapterId)){console.warn("No term selected or chapter ID missing. Skipping meetings fetch.");return}try{const R=await V.get(`/api/meetings/meetings/${e.chapterId}`,{params:{memberId:x||""}});c(E=>({...E,chapterMeetings:R.data}))}catch(R){console.error("Error fetching chapter meetings:",R),W.error("Failed to fetch meetings")}},[e==null?void 0:e.chapterId,l.selectedTermId]),w=m.useCallback(async x=>{if(e!=null&&e.chapterId)try{const p=await V.get(`/api/payment/balance/${e.chapterId}`,{params:{memberId:x||""}});c(P=>({...P,balance:p.data.balance}))}catch(p){console.error("Error fetching balance amounts:",p),W.error("Failed to fetch balance")}},[e==null?void 0:e.chapterId]),S=m.useCallback(async(x,p=null,P=null,R=null)=>{var _;const E=p||l.selectedTermId,A=P||l.chapterMeetings,k=R!==null?R:l.balance;if(!E||!(e!=null&&e.chapterId)){console.warn("No term selected or chapter ID missing. Skipping packages fetch.");return}try{const B=await V.get(`/api/packages/all/${e.chapterId}/term/${E}`,{params:{memberId:x||"",date:fe(a)}}),q=[...new Set(B.data.map(F=>F.packageParent))].sort((F,Y)=>F.localeCompare(Y));console.log("Processing packages with:",{packages:((_=B.data)==null?void 0:_.length)||0,meetings:(A==null?void 0:A.length)||0,balance:k});const H=g(B.data,k,A);c(F=>({...F,packageParents:q,packageData:H,lastUpdated:new Date}))}catch(B){console.error("Error fetching packages:",B),W.error("Failed to fetch packages")}},[e==null?void 0:e.chapterId,l.selectedTermId,l.chapterMeetings,l.balance,a]),g=(x,p,P)=>(console.log("processPackageData called with:",{packagesCount:(x==null?void 0:x.length)||0,packagesValid:Array.isArray(x),meetingsCount:(P==null?void 0:P.length)||0,meetingsValid:!!P,balance:p}),!P||!Array.isArray(x)?(console.warn("Missing required data for package processing",{meetings:!!P,packages:Array.isArray(x)}),[]):x.map(R=>{const E=Nt(a,R,P,p||0);return{...R,...E}})),j=m.useCallback(async x=>{try{const p=await V.get("/api/payment/pendingPayments",{params:{memberId:x||""}});c(P=>({...P,pendingPayments:p.data}))}catch(p){console.error("Error fetching pending payments:",p),W.error("Failed to fetch pending payments")}},[]),b=async x=>{try{await V.delete(`/api/payment/deleteRequest/${x}`),await h(l.selectedMemberId),W.success("Request deleted successfully")}catch(p){console.error("Error deleting request:",p),W.error("Failed to delete request")}},h=m.useCallback(async(x=l.selectedMemberId)=>{var p;if(!(e!=null&&e.chapterId)||o.current){console.warn("Chapter ID not available or already loading");return}o.current=!0,console.log("Starting fetchAllData for member:",x);try{c(A=>({...A,selectedMemberId:x})),await Promise.all([u(),j(x)]);const P=await V.get(`/api/term/chapter/${e.chapterId}`),R=P.data.filter(A=>A.status==="active");let E=l.selectedTermId;if(!E||!R.find(A=>A.termId===E)){const A=new Date,k=R.find(_=>{const B=new Date(_.startDate),q=new Date(_.endDate);return A>=B&&A<=q});if(k)E=k.termId;else if(R.length>0){const _=R.filter(B=>new Date(B.startDate)>A);_.length>0?E=_.reduce((q,H)=>new Date(q.startDate)<new Date(H.startDate)?q:H).termId:E=R[0].termId}}if(console.log("Selected term ID:",E),c(A=>({...A,terms:P.data,selectedTermId:E})),E){console.log("Fetching meetings and balance...");const[A,k]=await Promise.all([V.get(`/api/meetings/meetings/${e.chapterId}`,{params:{memberId:x||""}}),V.get(`/api/payment/balance/${e.chapterId}`,{params:{memberId:x||""}})]);console.log("Meetings fetched:",((p=A.data)==null?void 0:p.length)||0),console.log("Balance fetched:",k.data.balance),c(_=>({..._,chapterMeetings:A.data,balance:k.data.balance})),console.log("Fetching packages with fresh data..."),await S(x,E,A.data,k.data.balance),console.log("All data fetched successfully")}else console.warn("No term ID available to fetch dependent data")}catch(P){console.error("Error in fetchAllData:",P),W.error("Failed to fetch payment data")}finally{o.current=!1,n.current=!1}},[e==null?void 0:e.chapterId,l.selectedTermId,u,j,S]);return m.useEffect(()=>{e!=null&&e.chapterId&&n.current&&(console.log("Initial load triggered for chapter:",e.chapterId),h(l.selectedMemberId))},[e==null?void 0:e.chapterId,h]),m.useEffect(()=>{!n.current&&(e!=null&&e.chapterId)&&(console.log("Calculation date changed, refetching data"),h(l.selectedMemberId))},[a]),m.useEffect(()=>{l.selectedTermId&&l.selectedMemberId&&(d(l.selectedMemberId,l.selectedTermId),w(l.selectedMemberId))},[l.selectedTermId]),m.useEffect(()=>{if(l.selectedReceiver){const x=l.receivers.find(p=>p.receiverId===l.selectedReceiver);c(p=>({...p,selectedReceiverObject:x}))}},[l.selectedReceiver]),m.useEffect(()=>{const P=setInterval(()=>{const R=new Date,E=l.lastUpdated,A=l.lastSelectedPackageTime;E&&R-E>3e5&&(l.selectedPackage&&A?R-A>6e5?(W.warn("Payment window will timeout in 10 seconds..."),setTimeout(()=>{W.warn("Payment window has timed out. Refreshing data now..."),i(),h(l.selectedMemberId)},1e4)):W.info("Data will be refreshed soon due to inactivity"):(W.info("Data is stale. Refreshing now..."),h(l.selectedMemberId)))},6e4);return()=>clearInterval(P)},[l.lastUpdated,l.lastSelectedPackageTime,l.selectedPackage,l.selectedMemberId]),console.log({mainData:l.packageData}),t.jsx(Pt.Provider,{value:{calculationDate:a,setCalculationDate:s,paymentData:l,setPaymentData:c,resetPaymentData:i,selectPackage:y,fetchAllData:h,handleDeletePendingRequest:b,setSelectedTermId:x=>c(p=>({...p,selectedTermId:x})),fetchCurrentReceivers:u,fetchTerms:f,fetchMeetings:d,fetchDueAmount:w,fetchPackages:S,fetchPendingPayments:j},children:r})},le=()=>{const r=m.useContext(Pt);if(!r)throw new Error("usePaymentData must be used within a PaymentDataProvider");return r},Ls=({setStep:r,handlePackagePayModalClose:e})=>{const{paymentData:a,setPaymentData:s}=le(),[n,o]=m.useState(!1),[l,c]=m.useState(""),i=()=>{a.paymentMethod?a.selectedReceiver?a.receivers.filter(u=>u.receiverId===a.selectedReceiver&&u.paymentType===a.paymentMethod).length===0?c("Invalid Receiver for the selected payment method"):(c(""),r(2)):c("Please select a receiver"):c("Please select a payment method")},y=u=>{const f=a.receivers.filter(d=>d.paymentType===u);return f.length===0?t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Pe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",u==="cash"?"Cash":"Online"," Receivers Available"]}),t.jsxs("p",{className:"text-gray-500 mb-4",children:["There are currently no ",u==="cash"?"cash collection":"online payment"," receivers set up for this chapter."]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Please contact your chapter admin to set up ",u==="cash"?"cash":"online"," receivers."]})]})})}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u==="cash"?t.jsx(Ae,{className:"h-5 w-5 text-green-600"}):t.jsx(Re,{className:"h-5 w-5 text-blue-600"}),t.jsxs("h3",{className:"text-lg font-medium",children:["Select a ",u==="cash"?"Cash":"Online"," Receiver"]})]}),t.jsx("div",{className:"grid gap-3 max-h-60 overflow-y-auto pr-2",children:f.map(d=>t.jsx(va,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${a.selectedReceiver===d.receiverId?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{s(w=>({...w,selectedReceiver:d.receiverId})),c("")},children:t.jsx(ya,{className:"p-3 sm:p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center ${a.selectedReceiver===d.receiverId?"bg-blue-100":"bg-gray-100"}`,children:t.jsx(Pa,{className:`h-4 w-4 sm:h-5 sm:w-5 ${a.selectedReceiver===d.receiverId?"text-blue-600":"text-gray-600"}`})})}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsx("h4",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:d.receiverName})})]}),a.selectedReceiver===d.receiverId&&t.jsx("div",{className:"flex-shrink-0 ml-2",children:t.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})})},d.receiverId))}),l&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[t.jsx(Pe,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-red-700 text-sm",children:l})]})]})};return m.useEffect(()=>{const u=a.receivers.filter(d=>d.paymentType==="cash"),f=a.receivers.filter(d=>d.paymentType==="online");u.length>0&&f.length>0?(s(d=>({...d,paymentMethod:d.paymentMethod||"cash"})),o(!0)):u.length>0?(s(d=>({...d,paymentMethod:"cash"})),o(!1)):(f.length>0&&s(d=>({...d,paymentMethod:"online"})),o(!1))},[a.receivers]),t.jsxs("div",{className:"flex flex-col h-full max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"flex-shrink-0 pb-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:n?"Select Payment Method":"Payment Method"}),a.receivers.length===0&&t.jsx("p",{className:"text-gray-600 text-sm",children:"Choose how you'd like to make your payment"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto py-4 space-y-6 min-h-0",children:a.receivers.length===0?t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"flex items-center justify-center p-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",children:t.jsxs("div",{className:"text-center max-w-md",children:[t.jsx(Pe,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),t.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-3",children:"No Payment Receivers Available"}),t.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:"There are currently no payment receivers set up for this chapter. Payment receivers are required to process your fee payment."}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[t.jsx("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"What you can do:"}),t.jsxs("ul",{className:"text-blue-700 text-sm space-y-1 text-left",children:[t.jsx("li",{children:"• Contact your chapter administrator"}),t.jsx("li",{children:"• Ask them to set up cash or online receivers"}),t.jsx("li",{children:"• Try again once receivers are configured"})]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Chapter admins can set up receivers in the Fee Receiver management section"})]})})}):t.jsxs(ja,{value:a.paymentMethod,className:"w-full",onValueChange:u=>{s(f=>({...f,paymentMethod:u,selectedReceiver:""})),c("")},children:[n?t.jsxs(Ia,{className:"grid w-full grid-cols-2 mb-6",children:[t.jsxs(ot,{value:"cash",className:"flex items-center gap-2",children:[t.jsx(Ae,{className:"h-4 w-4"}),"Cash"]}),t.jsxs(ot,{value:"online",className:"flex items-center gap-2",children:[t.jsx(Re,{className:"h-4 w-4"}),"Online"]})]}):t.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 border-blue-200",children:t.jsxs("div",{className:"flex items-center gap-2",children:[a.paymentMethod==="cash"?t.jsx(Ae,{className:"h-5 w-5 text-blue-600"}):t.jsx(Re,{className:"h-5 w-5 text-blue-600"}),t.jsx("span",{className:"font-medium text-blue-900",children:a.paymentMethod==="cash"?"Cash Payment":"Online Payment"}),t.jsx(Na,{variant:"secondary",className:"ml-auto",children:"Only Available Method"})]})}),t.jsx(lt,{value:"cash",className:"mt-0",children:y("cash")}),t.jsx(lt,{value:"online",className:"mt-0",children:y("online")})]})}),t.jsx("div",{className:"flex-shrink-0 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx(ee,{variant:"outline",onClick:()=>e(),children:"Cancel"}),a.receivers.length>0&&t.jsxs(ee,{onClick:i,disabled:!a.selectedReceiver,children:["Next",t.jsx(pt,{className:"h-4 w-4 ml-1"})]})]})})]})};class T{constructor(e,a,s,n,o){this._legacyCanvasSize=T.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),s&&typeof s=="object"?this._onDecode=a:(console.warn(s||n||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=a),a=typeof s=="object"?s:{},this._onDecodeError=a.onDecodeError||(typeof s=="function"?s:this._onDecodeError),this._calculateScanRegion=a.calculateScanRegion||(typeof n=="function"?n:this._calculateScanRegion),this._preferredCamera=a.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof s=="number"?s:typeof n=="number"?n:this._legacyCanvasSize,this._maxScansPerSecond=a.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let l=!1;if(e.hidden&&(e.hidden=!1,l=!0),document.body.contains(e)||(document.body.appendChild(e),l=!0),s=e.parentElement,a.highlightScanRegion||a.highlightCodeOutline){if(n=!!a.overlay,this.$overlay=a.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!n&&a.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}s.insertBefore(this.$overlay,this.$video.nextSibling)}a.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let c=window.getComputedStyle(e);c.display==="none"&&(e.style.setProperty("display","block","important"),l=!0),c.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),l=!0),l&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=T.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await T.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let a=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="videoinput"),s;try{e&&(await a()).every(n=>!n.label)&&(s=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await a()).map((n,o)=>({id:n.deviceId,label:n.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{s&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),T._stopVideoStream(s))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),T._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),T._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:a}=await this._getCameraStream();!this._active||this._paused?T._stopVideoStream(e):(this._setVideoMirror(a),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let a=()=>{this.$video.srcObject instanceof MediaStream&&(T._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(a(),!0):(await new Promise(s=>setTimeout(s,300)),this._paused?(a(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,a,s,n,o=!1,l=!1){let c,i=!1;a&&("scanRegion"in a||"qrEngine"in a||"canvas"in a||"disallowCanvasResizing"in a||"alsoTryWithoutScanRegion"in a||"returnDetailedScanResult"in a)?(c=a.scanRegion,s=a.qrEngine,n=a.canvas,o=a.disallowCanvasResizing||!1,l=a.alsoTryWithoutScanRegion||!1,i=!0):console.warn(a||s||n||o||l?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),a=!!s;try{let y,u;[s,y]=await Promise.all([s||T.createQrEngine(),T._loadImage(e)]),[n,u]=T._drawToCanvas(y,c,n,o);let f;if(s instanceof Worker){let d=s;a||T._postWorkerMessageSync(d,"inversionMode","both"),f=await new Promise((w,S)=>{let g,j,b,h=-1;j=p=>{p.data.id===h&&(d.removeEventListener("message",j),d.removeEventListener("error",b),clearTimeout(g),p.data.data!==null?w({data:p.data.data,cornerPoints:T._convertPoints(p.data.cornerPoints,c)}):S(T.NO_QR_CODE_FOUND))},b=p=>{d.removeEventListener("message",j),d.removeEventListener("error",b),clearTimeout(g),S("Scanner error: "+(p?p.message||p:"Unknown Error"))},d.addEventListener("message",j),d.addEventListener("error",b),g=setTimeout(()=>b("timeout"),1e4);let x=u.getImageData(0,0,n.width,n.height);h=T._postWorkerMessageSync(d,"decode",x,[x.data.buffer])})}else f=await Promise.race([new Promise((d,w)=>window.setTimeout(()=>w("Scanner error: timeout"),1e4)),(async()=>{try{var[d]=await s.detect(n);if(!d)throw T.NO_QR_CODE_FOUND;return{data:d.rawValue,cornerPoints:T._convertPoints(d.cornerPoints,c)}}catch(w){if(d=w.message||w,/not implemented|service unavailable/.test(d))return T._disableBarcodeDetector=!0,T.scanImage(e,{scanRegion:c,canvas:n,disallowCanvasResizing:o,alsoTryWithoutScanRegion:l});throw`Scanner error: ${d}`}})()]);return i?f:f.data}catch(y){if(!c||!l)throw y;let u=await T.scanImage(e,{qrEngine:s,canvas:n,disallowCanvasResizing:o});return i?u:u.data}finally{a||T._postWorkerMessage(s,"close")}}setGrayscaleWeights(e,a,s,n=!0){T._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:a,blue:s,useIntegerApproximation:n})}setInversionMode(e){T._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>ba(()=>import("./qr-scanner-worker.min.js"),[]).then(s=>s.createWorker()),!(!T._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let a=navigator.userAgentData;return a&&a.brands.some(({brand:s})=>/Chromium/i.test(s))&&/mac ?OS/i.test(a.platform)&&await a.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:s,platformVersion:n})=>/arm/i.test(s||"arm")&&13<=parseInt(n||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let a=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-a)/2),y:Math.round((e.videoHeight-a)/2),width:a,height:a,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,a=e.videoWidth,s=e.videoHeight,n=e.offsetWidth,o=e.offsetHeight,l=e.offsetLeft,c=e.offsetTop,i=window.getComputedStyle(e),y=i.objectFit,u=a/s,f=n/o;switch(y){case"none":var d=a,w=s;break;case"fill":d=n,w=o;break;default:(y==="cover"?u>f:u<f)?(w=o,d=w*u):(d=n,w=d/u),y==="scale-down"&&(d=Math.min(d,a),w=Math.min(w,s))}var[S,g]=i.objectPosition.split(" ").map((b,h)=>{const x=parseFloat(b);return b.endsWith("%")?(h?o-w:n-d)*x/100:x});i=this._scanRegion.width||a,f=this._scanRegion.height||s,y=this._scanRegion.x||0;var j=this._scanRegion.y||0;u=this.$overlay.style,u.width=`${i/a*d}px`,u.height=`${f/s*w}px`,u.top=`${c+g+j/s*w}px`,s=/scaleX\(-1\)/.test(e.style.transform),u.left=`${l+(s?n-S-d:S)+(s?a-y-i:y)/a*d}px`,u.transform=e.style.transform}})}static _convertPoints(e,a){if(!a)return e;let s=a.x||0,n=a.y||0,o=a.width&&a.downScaledWidth?a.width/a.downScaledWidth:1;a=a.height&&a.downScaledHeight?a.height/a.downScaledHeight:1;for(let l of e)l.x=l.x*o+s,l.y=l.y*a+n;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,a=1e3/this._maxScansPerSecond;e<a&&await new Promise(n=>setTimeout(n,a-e)),this._lastScanTimestamp=Date.now();try{var s=await T.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(n){if(!this._active)return;this._onDecodeError(n)}!T._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=T.createQrEngine()),s?(this._onDecode?this._onDecode(s):this._legacyOnDecode&&this._legacyOnDecode(s.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",s.cornerPoints.map(({x:n,y:o})=>`${n},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==T.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",a=[{width:{min:1024}},{width:{min:768}},{}],s=a.map(n=>Object.assign({},n,{[e]:{exact:this._preferredCamera}}));for(let n of[...s,...a])try{let o=await navigator.mediaDevices.getUserMedia({video:n,audio:!1}),l=this._getFacingMode(o)||(n.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:l}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let a of e.getTracks())a.stop(),e.removeTrack(a)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,a,s,n=!1){s=s||document.createElement("canvas");let o=a&&a.x?a.x:0,l=a&&a.y?a.y:0,c=a&&a.width?a.width:e.videoWidth||e.width,i=a&&a.height?a.height:e.videoHeight||e.height;return n||(n=a&&a.downScaledWidth?a.downScaledWidth:c,a=a&&a.downScaledHeight?a.downScaledHeight:i,s.width!==n&&(s.width=n),s.height!==a&&(s.height=a)),a=s.getContext("2d",{alpha:!1}),a.imageSmoothingEnabled=!1,a.drawImage(e,o,l,c,i,0,0,s.width,s.height),[s,a]}static async _loadImage(e){if(e instanceof Image)return await T._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let a=new Image;a.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await T._awaitImageLoad(a),a}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(a.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((a,s)=>{let n=o=>{e.removeEventListener("load",n),e.removeEventListener("error",n),o instanceof ErrorEvent?s("Image load error"):a()};e.addEventListener("load",n),e.addEventListener("error",n)})}static async _postWorkerMessage(e,a,s,n){return T._postWorkerMessageSync(await e,a,s,n)}static _postWorkerMessageSync(e,a,s,n){if(!(e instanceof Worker))return-1;let o=T._workerMessageId++;return e.postMessage({id:o,type:a,data:s},n),o}}T.DEFAULT_CANVAS_SIZE=400;T.NO_QR_CODE_FOUND="No QR code found";T._disableBarcodeDetector=!1;T._workerMessageId=0;const Ws=({onClose:r,onPaymentSuccess:e,setStep:a,handlePackagePayModalClose:s})=>{const{paymentData:{selectedPackage:n,chapterMeetings:o,receivers:l,selectedReceiver:c,selectedReceiverObject:i,receiverFeeAmount:y,paymentProof:u,platformFee:f,platformFeeAmount:d,platformFeeType:w},setPaymentData:S}=le(),{memberData:g,chapterData:j}=ye(),[b]=m.useState(new Date().toLocaleDateString()),[h,x]=m.useState(!1),[p,P]=m.useState([]),[R,E]=m.useState(!1),[A,k]=m.useState(!0),[_,B]=m.useState(n.totalAmount),[q,H]=m.useState(0),[F,Y]=m.useState(()=>(i==null?void 0:i.memberId)===(g==null?void 0:g.memberId));m.useEffect(()=>{if(n.meetingIds&&o){const I=o.filter($=>n.meetingIds.includes($.meetingId));P(I)}},[n.meetingIds,o]),m.useEffect(()=>{if(i)if(i.receiverAmountType==="lumpsum"&&A)S(I=>({...I,receiverFeeAmount:i.receiverAmount}));else if(i.receiverAmountType==="percentage"&&A){const I=n.totalAmount*i.receiverAmount/100;S($=>({...$,receiverFeeAmount:I}))}else S(I=>({...I,receiverFeeAmount:0}))},[i,n,A]),m.useEffect(()=>{const I=(i==null?void 0:i.memberId)===(g==null?void 0:g.memberId);Y(I),S($=>({...$,autoApprove:I}))},[i,g,S]),m.useEffect(()=>{if(j)if(j.platformFeeCase!=="per-payment")S(I=>({...I,platformFeeAmount:0}));else if(j.platformFeeType==="Lumpsum")S(I=>({...I,platformFeeAmount:j.platformFee}));else if(j.platformFeeType==="Percentage"){const I=n.totalAmount*j.platformFee;S($=>({...$,platformFeeAmount:I}))}else S(I=>({...I,platformFeeAmount:0}))},[j,n]);const J=I=>{const $=I.target.files[0];$&&S(U=>({...U,paymentProof:$}))};return t.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-[1000]",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg shadow-xl relative max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800 text-center mb-4",children:"Payment Overview"}),t.jsxs("div",{className:"border p-4 rounded-lg mb-4 bg-gray-50",children:[t.jsx("p",{className:"text-gray-700 font-semibold text-lg",children:"Total Payable Amount:"}),t.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["₹",parseInt(n.totalAmount)+(parseInt(y)||0)+(parseInt(d)||0)]}),t.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[t.jsxs("p",{children:["₹",n.packageFeeAmount," (Original Amount)"]}),n.penaltyAmount>0&&t.jsxs("p",{className:"text-red-500",children:["+ ₹",n.penaltyAmount," (Penalty)"]}),n.discountAmount>0&&t.jsxs("p",{className:"text-green-500",children:["- ₹",n.discountAmount," (Discount)"]}),n.previousBalance!==0&&t.jsxs("p",{className:"text-orange-500",children:[" ",n.previousBalance>0?"-":"+"," ₹",Math.abs(n.previousBalance)," (",n.previousBalance>0?"Advance":"Previous Due",")"]}),n.paidFees>0&&t.jsxs("p",{className:"text-blue-500",children:["- ₹",n.paidFees," (Paid Previously)"]}),y>0&&t.jsxs("p",{className:"text-blue-500",children:["+ ₹",y," (Receiver Fee)"]}),d>0&&t.jsxs("p",{className:"text-blue-500",children:["+ ₹",d," (Platform Fee)"]})]})]}),i.receiverFeeOptional!==0&&(i==null?void 0:i.receiverFeeOptional)&&t.jsxs("div",{className:"flex items-center space-x-4 my-4",children:[t.jsx(it,{checked:A,onCheckedChange:I=>k(I),className:"h-5"}),t.jsx(ct,{className:"text-lg",children:(i==null?void 0:i.receiverFeeOptionalMessage)||"Would you like to pay the receiver fee? (charges applicable)"})," "]}),(i==null?void 0:i.memberId)===(g==null?void 0:g.memberId)&&t.jsxs("div",{className:"flex items-center space-x-4 my-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsx(it,{checked:F,onCheckedChange:I=>{Y(I),S($=>({...$,autoApprove:I}))},className:"h-5"}),t.jsxs("div",{children:[t.jsx(ct,{className:"text-lg font-medium text-blue-800",children:"Auto Approve Payment"}),t.jsx("p",{className:"text-sm text-blue-600",children:"(Payment will be automatically approved since you are the receiver)"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-gray-700 font-semibold",children:"Meetings Included:"}),t.jsxs("button",{onClick:()=>x(!h),className:"flex items-center text-lg font-medium text-blue-500 hover:underline focus:outline-none",children:[p.length," Meetings",h?t.jsx(Ra,{className:"ml-2",size:18}):t.jsx(ft,{className:"ml-2",size:18})]}),h&&t.jsx("div",{className:"mt-2 max-h-[200px] overflow-y-auto",children:p.length>0?p==null?void 0:p.map(I=>t.jsxs("div",{className:`border p-2 rounded mb-2 ${I.isPaid?"bg-green-100":""}`,children:[t.jsx("p",{children:t.jsx("strong",{children:I.meetingName})}),t.jsxs("p",{children:[fe(I.meetingDate)," at"," ",I.meetingTime]}),I.isPaid&&t.jsx("p",{className:"text-green-500 font-semibold",children:"Paid"})]},I.meetingId)):t.jsx("p",{children:"No meetings found"})})]}),t.jsxs("div",{children:["You are paying to ",i==null?void 0:i.receiverName,".",t.jsx("p",{className:"text-blue-500 cursor-pointer",onClick:()=>a(1),children:"Click here to change receiver."})]}),i&&i.qrImageLink&&t.jsxs("div",{className:"mt-4",children:[t.jsx(Hs,{imageUrl:i.qrImageLink}),t.jsxs("div",{className:"flex justify-between mb-4",children:[t.jsx(ee,{variant:"outline",onClick:()=>{W.warn("This feature may not work on all browsers. If it doesn't work, please download the QR Code and scan it using a QR Code scanner app."),fetch(i.qrImageLink).then(I=>I.blob()).then(I=>{const $=URL.createObjectURL(I),U=new Image;U.crossOrigin="Anonymous",U.src=$,U.onload=async()=>{try{const N=await T.scanImage(U);URL.revokeObjectURL($),N.indexOf("://")||N.startsWith("http://")||N.startsWith("https://")?window.open(N,"_blank"):W.error("QR Code does not contain a valid link.")}catch(N){console.error("QR decoding failed:",N),W.error("Failed to decode QR Code.")}}}).catch(I=>{W.error("Error fetching QR Code image"),console.error(I)})},children:"Open QR Link"}),t.jsx(ee,{variant:"outline",onClick:()=>{fetch(i.qrImageLink).then(I=>I.blob()).then(I=>{const $=document.createElement("a");$.href=URL.createObjectURL(I);const U=`QR_Code_${i.receiverName}.png`;$.download=U,$.click(),URL.revokeObjectURL($.href)}).catch(I=>{W.error("Error downloading QR Code"),console.error(I)})},children:"Download QR Code"})]}),t.jsx("p",{className:"text-gray-700 font-semibold",children:"Upload Payment Proof:"}),t.jsxs("label",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition",children:[t.jsx(_a,{className:"text-gray-500",size:24}),t.jsx("span",{className:"text-gray-600 mt-2 text-sm",children:"Click to select or drag and drop an image here"}),t.jsx("input",{type:"file",name:"file",accept:"image/*",onChange:J,className:"hidden"})]}),u&&t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Uploaded: ",u.name]})]}),t.jsxs("div",{className:"flex justify-between mt-2",children:[t.jsxs(ee,{variant:"outline",onClick:()=>a(1),children:[t.jsx(gt,{}),"Back"]}),t.jsxs(ee,{onClick:()=>{S(I=>({...I,totalPayableAmount:(parseInt(n.totalAmount)||0)+(parseInt(y)||0)+(parseInt(d)||0),autoApprove:F})),a(3)},children:["Next",t.jsx(pt,{})]})]})]})})},Hs=({imageUrl:r})=>{const[e,a]=m.useState(!0);return t.jsxs("div",{className:"relative",children:[e&&t.jsx(Aa,{className:"w-full h-32 rounded-lg"})," ",t.jsx("img",{src:r,alt:"QR Code",className:`mb-2 rounded-lg ${e?"hidden":"block"}`,onLoad:()=>a(!1)})]})},Us=({setStep:r,handlePackagePayModalClose:e})=>{const{paymentData:{selectedPackage:a,chapterMeetings:s,receivers:n,selectedReceiver:o,paymentProof:l,paymentDate:c,selectedReceiverObject:i,receiverFeeAmount:y,platformFeeAmount:u,totalPayableAmount:f,selectedMemberId:d,autoApprove:w},fetchAllData:S}=le(),{chapterData:g}=ye(),[j,b]=m.useState(f),h=j-f,[x,p]=m.useState(!1),[P,R]=m.useState(!1),E=async()=>{R(!0);let A="";if(l){const _=new FormData;_.append("image",l),_.append("folderName","memberPaymentProofs"),A=await V.post("/api/image-upload",_,{headers:{"Content-Type":"multipart/form-data"}}).then(B=>B.data.imageUrl)}const k={memberId:d,packageId:a.packageId,meetingIds:a.meetingIds,chapterId:g.chapterId,transactionType:"Package Payment",paidAmount:j,payableAmount:f,originalPayableAmount:parseFloat(a.packageFeeAmount),discountAmount:a.discountAmount,penaltyAmount:a.penaltyAmount,receiverFee:y,amountPaidToChapter:(parseFloat(j)||0)-(parseFloat(u)||0)-(parseFloat(y)||0),amountExpectedToChapter:a.totalAmount,platformFee:u,balanceAmount:h,paymentType:i==null?void 0:i.paymentType,paymentDate:c,paymentImageLink:A,paymentReceivedById:(i==null?void 0:i.memberId)||"",paymentReceivedByName:(i==null?void 0:i.receiverName)||"",autoApprove:w||!1};await V.post("/api/payment/addPayment",k).then(_=>{S(),e(),W.success("Payment submitted successfully")}).catch(_=>{console.error("Error submitting payment:",_),R(!1)}).finally(()=>{R(!1)})};return t.jsxs("div",{className:"p-6 max-w-md mx-auto bg-white rounded-xl shadow-md space-y-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Total Payable Amount: ₹",f]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Enter Amount to Pay:"}),t.jsx("input",{type:"number",value:j,onChange:A=>{let k=Number(A.target.value);k<0&&(k=0),b(k)},className:"w-full p-2 border border-gray-300 rounded text-center"})]}),j===f?t.jsx("h3",{className:"text-xl font-semibold text-green-700",children:"You have paid the exact amount"}):j<f?t.jsxs("h3",{className:"text-xl font-semibold text-red-700",children:["You will be due by ₹",Math.abs(h)]}):t.jsxs("h3",{className:"text-xl font-semibold text-green-700",children:["You will pay advance of ₹",Math.abs(h)]}),t.jsxs("h5",{className:"text-sm font-semibold text-gray-700",children:["Amount will be received by: ",i==null?void 0:i.receiverName]}),t.jsxs(Ta,{open:x,onOpenChange:p,children:[t.jsxs("div",{className:"flex justify-between mt-2",children:[t.jsxs(ee,{variant:"outline",onClick:()=>r(2),children:[t.jsx(gt,{}),"Back"]}),t.jsx(ee,{onClick:()=>p(!0),children:"Confirm"})]}),t.jsxs(Ea,{children:[t.jsxs(ka,{children:[t.jsx(Ma,{children:"Confirm Payment"}),t.jsxs(Da,{children:["Are you sure you want to confirm payment of ₹",j,"?",j>f&&t.jsxs("div",{className:"mt-2 text-green-700 font-semibold",children:["(You are paying ₹",Math.abs(h)," advance)"]}),j<f&&t.jsxs("div",{className:"mt-2 text-red-700 font-semibold",children:["(You will be due by ₹",Math.abs(h),")"]})]})]}),t.jsxs($a,{children:[t.jsx(Ba,{disabled:P,children:"Cancel"}),t.jsxs(Fa,{onClick:E,disabled:P,className:"flex items-center justify-center",children:[P&&t.jsx(wa,{className:"mr-2 h-4 w-4 animate-spin"}),P?"Processing...":"Confirm"]})]})]})]})]})},Vs=({selectedPackage:r,pendingPayments:e,packageData:a,paymentSuccessHandler:s,parentType:n,chapterMeetings:o,handlePackagePayModalClose:l})=>{const{receivers:c}=le(),[i,y]=m.useState(1),[u,f]=m.useState(null),d=()=>{l()};return t.jsxs("div",{children:[i===1&&t.jsx(Ls,{selectedReceiver:u,setSelectedReceiver:f,packageData:a,setStep:y,handlePackagePayModalClose:l}),i===2&&t.jsx(Ws,{selectedPackage:r,pendingPayments:e,packageData:a,paymentSuccessHandler:s,parentType:n,chapterMeetings:o,receivers:c,setStep:y,handlePackagePayModalClose:d}),i===3&&t.jsx(Us,{setStep:y,handlePackagePayModalClose:d})]})},zs=({pendingPayments:r,parentType:e,paymentSuccessHandler:a})=>{const{paymentData:{receivers:s,chapterMeetings:n,packageParents:o,selectedPackage:l,packageData:c},resetPaymentData:i,setPaymentData:y}=le(),[u,f]=m.useState(!1),[d,w]=m.useState(!0),S=()=>{i(),w(!1)};m.useEffect(()=>{w(!!l)},[l]);const g=b=>{w(!0),y(h=>({...h,selectedPackage:b,lastSelectedPackageTime:new Date}))},j=c.filter(b=>b.packageParent===e).filter(b=>!u||!b.isPaid).sort((b,h)=>b.isDisabled!==h.isDisabled?b.isDisabled-h.isDisabled:0);return t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-between items-center p-4 hidden",children:t.jsx("div",{className:"flex justify-end",children:t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:u,onChange:()=>f(!u),className:"form-checkbox"}),t.jsx("span",{children:"Show Unpaid Only"})]})})}),t.jsx(xe,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-4",children:j.map(b=>t.jsxs("div",{className:`bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-lg ${b.isDisabled?"opacity-50 cursor-not-allowed":""}`,children:[t.jsx("h2",{className:"text-xl font-bold mb-2",children:b.packageName}),!b.isDisabled&&b.totalAmount!==null&&b.status!=="approved"?t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"text-gray-700 mb-1",children:[`₹${b.packageFeeAmount}`,b.penaltyAmount>0&&t.jsxs("span",{className:"text-red-500",children:[" ","+ ₹",b.penaltyAmount]}),b.discountAmount>0&&t.jsxs("span",{className:"text-green-500",children:[" ","- ₹",b.discountAmount]}),b.previousBalance!==0&&t.jsxs("span",{className:"text-orange-500",children:[" ",b.previousBalance>0?"-":"+"," ₹",Math.abs(b.previousBalance)," (",b.previousBalance>0?"Advance":"Previous Due",")"]}),"= ₹",b.totalAmount]}),t.jsxs("p",{className:"text-gray-700 mb-1",children:["Payable End Date:"," ",fe(b.packagePayableEndDate)]}),t.jsx(Za,{className:"mt-4 bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",variant:"contained",onClick:()=>g(b),disabled:b.isDisabled||(r==null?void 0:r.length)>0,children:"Pay Now"})]}):b.status==="approved"?t.jsx(t.Fragment,{children:t.jsxs("div",{children:["You have paid ₹",b.paidAmount," for this package on"," ",new Date(b.paymentDate).toLocaleDateString()," to"," ",t.jsx("b",{children:b.paymentReceivedByName})," by"," ",t.jsx("b",{children:b.paymentType})]})}):t.jsx("p",{className:"text-gray-700 mb-1",children:b.message||"Payment Not Allowed"})]},b.packageId))}),l&&s&&t.jsxs(Oa,{open:d,onOpenChange:S,children:[t.jsx(La,{}),t.jsx(Wa,{className:"sm:max-w-[425px] p-4 max-w-[90%] rounded-lg",children:t.jsx(Vs,{selectedPackage:l,pendingPayments:r,packageData:c,paymentSuccessHandler:a,parentType:e,chapterMeetings:n,receivers:s,handlePackagePayModalClose:S})})]})]})};var we="Collapsible",[qs,At]=wt(we),[Ys,Oe]=qs(we),Rt=m.forwardRef((r,e)=>{const{__scopeCollapsible:a,open:s,defaultOpen:n,disabled:o,onOpenChange:l,...c}=r,[i,y]=Be({prop:s,defaultProp:n??!1,onChange:l,caller:we});return t.jsx(Ys,{scope:a,disabled:o,contentId:St(),open:i,onOpenToggle:m.useCallback(()=>y(u=>!u),[y]),children:t.jsx(de.div,{"data-state":We(i),"data-disabled":o?"":void 0,...c,ref:e})})});Rt.displayName=we;var _t="CollapsibleTrigger",Tt=m.forwardRef((r,e)=>{const{__scopeCollapsible:a,...s}=r,n=Oe(_t,a);return t.jsx(de.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":We(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...s,ref:e,onClick:Ct(r.onClick,n.onOpenToggle)})});Tt.displayName=_t;var Le="CollapsibleContent",Et=m.forwardRef((r,e)=>{const{forceMount:a,...s}=r,n=Oe(Le,r.__scopeCollapsible);return t.jsx(ls,{present:a||n.open,children:({present:o})=>t.jsx(Qs,{...s,ref:e,present:o})})});Et.displayName=Le;var Qs=m.forwardRef((r,e)=>{const{__scopeCollapsible:a,present:s,children:n,...o}=r,l=Oe(Le,a),[c,i]=m.useState(s),y=m.useRef(null),u=ht(e,y),f=m.useRef(0),d=f.current,w=m.useRef(0),S=w.current,g=l.open||c,j=m.useRef(g),b=m.useRef(void 0);return m.useEffect(()=>{const h=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(h)},[]),ns(()=>{const h=y.current;if(h){b.current=b.current||{transitionDuration:h.style.transitionDuration,animationName:h.style.animationName},h.style.transitionDuration="0s",h.style.animationName="none";const x=h.getBoundingClientRect();f.current=x.height,w.current=x.width,j.current||(h.style.transitionDuration=b.current.transitionDuration,h.style.animationName=b.current.animationName),i(s)}},[l.open,s]),t.jsx(de.div,{"data-state":We(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!g,...o,ref:u,style:{"--radix-collapsible-content-height":d?`${d}px`:void 0,"--radix-collapsible-content-width":S?`${S}px`:void 0,...r.style},children:g&&n})});function We(r){return r?"open":"closed"}var Ks=Rt,Xs=Tt,Gs=Et,K="Accordion",Zs=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[He,Js,er]=os(K),[Se]=wt(K,[er,At]),Ue=At(),kt=z.forwardRef((r,e)=>{const{type:a,...s}=r,n=s,o=s;return t.jsx(He.Provider,{scope:r.__scopeAccordion,children:a==="multiple"?t.jsx(rr,{...o,ref:e}):t.jsx(sr,{...n,ref:e})})});kt.displayName=K;var[Mt,tr]=Se(K),[Dt,ar]=Se(K,{collapsible:!1}),sr=z.forwardRef((r,e)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},collapsible:o=!1,...l}=r,[c,i]=Be({prop:a,defaultProp:s??"",onChange:n,caller:K});return t.jsx(Mt,{scope:r.__scopeAccordion,value:z.useMemo(()=>c?[c]:[],[c]),onItemOpen:i,onItemClose:z.useCallback(()=>o&&i(""),[o,i]),children:t.jsx(Dt,{scope:r.__scopeAccordion,collapsible:o,children:t.jsx($t,{...l,ref:e})})})}),rr=z.forwardRef((r,e)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=r,[l,c]=Be({prop:a,defaultProp:s??[],onChange:n,caller:K}),i=z.useCallback(u=>c((f=[])=>[...f,u]),[c]),y=z.useCallback(u=>c((f=[])=>f.filter(d=>d!==u)),[c]);return t.jsx(Mt,{scope:r.__scopeAccordion,value:l,onItemOpen:i,onItemClose:y,children:t.jsx(Dt,{scope:r.__scopeAccordion,collapsible:!0,children:t.jsx($t,{...o,ref:e})})})}),[nr,Ce]=Se(K),$t=z.forwardRef((r,e)=>{const{__scopeAccordion:a,disabled:s,dir:n,orientation:o="vertical",...l}=r,c=z.useRef(null),i=ht(c,e),y=Js(a),f=is(n)==="ltr",d=Ct(r.onKeyDown,w=>{var A;if(!Zs.includes(w.key))return;const S=w.target,g=y().filter(k=>{var _;return!((_=k.ref.current)!=null&&_.disabled)}),j=g.findIndex(k=>k.ref.current===S),b=g.length;if(j===-1)return;w.preventDefault();let h=j;const x=0,p=b-1,P=()=>{h=j+1,h>p&&(h=x)},R=()=>{h=j-1,h<x&&(h=p)};switch(w.key){case"Home":h=x;break;case"End":h=p;break;case"ArrowRight":o==="horizontal"&&(f?P():R());break;case"ArrowDown":o==="vertical"&&P();break;case"ArrowLeft":o==="horizontal"&&(f?R():P());break;case"ArrowUp":o==="vertical"&&R();break}const E=h%b;(A=g[E].ref.current)==null||A.focus()});return t.jsx(nr,{scope:a,disabled:s,direction:n,orientation:o,children:t.jsx(He.Slot,{scope:a,children:t.jsx(de.div,{...l,"data-orientation":o,ref:i,onKeyDown:s?void 0:d})})})}),ve="AccordionItem",[or,Ve]=Se(ve),Bt=z.forwardRef((r,e)=>{const{__scopeAccordion:a,value:s,...n}=r,o=Ce(ve,a),l=tr(ve,a),c=Ue(a),i=St(),y=s&&l.value.includes(s)||!1,u=o.disabled||r.disabled;return t.jsx(or,{scope:a,open:y,disabled:u,triggerId:i,children:t.jsx(Ks,{"data-orientation":o.orientation,"data-state":Ut(y),...c,...n,ref:e,disabled:u,open:y,onOpenChange:f=>{f?l.onItemOpen(s):l.onItemClose(s)}})})});Bt.displayName=ve;var Ft="AccordionHeader",Ot=z.forwardRef((r,e)=>{const{__scopeAccordion:a,...s}=r,n=Ce(K,a),o=Ve(Ft,a);return t.jsx(de.h3,{"data-orientation":n.orientation,"data-state":Ut(o.open),"data-disabled":o.disabled?"":void 0,...s,ref:e})});Ot.displayName=Ft;var Ee="AccordionTrigger",Lt=z.forwardRef((r,e)=>{const{__scopeAccordion:a,...s}=r,n=Ce(K,a),o=Ve(Ee,a),l=ar(Ee,a),c=Ue(a);return t.jsx(He.ItemSlot,{scope:a,children:t.jsx(Xs,{"aria-disabled":o.open&&!l.collapsible||void 0,"data-orientation":n.orientation,id:o.triggerId,...c,...s,ref:e})})});Lt.displayName=Ee;var Wt="AccordionContent",Ht=z.forwardRef((r,e)=>{const{__scopeAccordion:a,...s}=r,n=Ce(K,a),o=Ve(Wt,a),l=Ue(a);return t.jsx(Gs,{role:"region","aria-labelledby":o.triggerId,"data-orientation":n.orientation,...l,...s,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}})});Ht.displayName=Wt;function Ut(r){return r?"open":"closed"}var lr=kt,ir=Bt,cr=Ot,Vt=Lt,zt=Ht;const dr=lr,qt=m.forwardRef(({className:r,...e},a)=>t.jsx(ir,{ref:a,className:ke("border-b",r),...e}));qt.displayName="AccordionItem";const Yt=m.forwardRef(({className:r,children:e,...a},s)=>t.jsx(cr,{className:"flex",children:t.jsxs(Vt,{ref:s,className:ke("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",r),...a,children:[e,t.jsx(ft,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));Yt.displayName=Vt.displayName;const Qt=m.forwardRef(({className:r,children:e,...a},s)=>t.jsx(zt,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:t.jsx("div",{className:ke("pb-4 pt-0",r),children:e})}));Qt.displayName=zt.displayName;const mr=({pendingPayments:r,handleDeletePendingRequest:e,fetchAllData:a})=>r.length===0?null:t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-yellow-100 rounded-md",children:[t.jsxs("p",{className:"text-base font-medium text-yellow-800 dark:text-yellow-200",children:["You have ",t.jsx("strong",{children:"pending payments"}),". Please contact admin to approve requests to continue."]}),t.jsx("button",{className:"px-4 py-2 text-sm font-semibold text-yellow-800 bg-yellow-300 rounded-md hover:bg-yellow-400 dark:text-yellow-200 dark:bg-yellow-400 transition-colors",onClick:a,children:"Refresh"})]}),t.jsx("div",{className:"mt-4 space-y-4",children:r.map(s=>{var n,o,l,c;return t.jsxs("div",{className:"p-4 sm:p-6 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-2",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-xl sm:text-2xl font-semibold text-yellow-900 dark:text-yellow-100 mb-1",children:s.packageName}),t.jsxs("p",{className:"text-base text-yellow-700 dark:text-yellow-300",children:[s.packageFeeType," • ",new Date(s.paymentDate).toLocaleDateString()]})]}),t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 self-start sm:self-center",children:s.status.toUpperCase()})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[s.paidAmount===s.payableAmount?t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-base text-yellow-700 dark:text-yellow-300 mb-1",children:"Amount:"}),t.jsxs("span",{className:"text-lg font-semibold text-blue-700 dark:text-blue-400",children:["₹",(n=s.paidAmount)==null?void 0:n.toLocaleString()]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-base text-yellow-700 dark:text-yellow-300 mb-1",children:"Paid:"}),t.jsxs("span",{className:"text-lg font-semibold text-green-700 dark:text-green-400",children:["₹",(o=s.paidAmount)==null?void 0:o.toLocaleString()]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-base text-yellow-700 dark:text-yellow-300 mb-1",children:"Original Amount:"}),t.jsxs("span",{className:"text-lg font-semibold text-blue-700 dark:text-blue-400",children:["₹",(l=s.payableAmount)==null?void 0:l.toLocaleString()]})]})]}),s.balanceAmount!==0&&t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-base text-yellow-700 dark:text-yellow-300 mb-1",children:"Balance:"}),t.jsxs("span",{className:`text-lg font-semibold ${s.balanceAmount<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["₹",(c=Math.abs(s.balanceAmount))==null?void 0:c.toLocaleString(),s.balanceAmount<0?" Due":" Advance"]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center pt-4 border-t border-yellow-200 gap-3",children:[t.jsxs("div",{className:"text-base text-yellow-700 dark:text-yellow-300",children:[t.jsx("span",{className:"capitalize font-medium",children:s.paymentType}),t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{children:s.paymentReceivedByName||"Unknown"})]}),t.jsx("button",{className:"px-4 py-2 text-base font-medium text-red-700 bg-red-100 border border-red-300 rounded-md hover:bg-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-600 transition-colors self-start sm:self-center",onClick:()=>e(s.transactionId),children:"Delete Request"})]})]},s.transactionId)})})]}),ur=()=>{const{paymentData:{receivers:r,chapterMeetings:e,balance:a,packageParents:s,packageData:n,pendingPayments:o,terms:l,selectedTermId:c},calculationDate:i,setCalculationDate:y,setPaymentData:u,fetchAllData:f,handleDeletePendingRequest:d,setSelectedTermId:w}=le(),{chapterData:S,memberData:g}=ye(),[j,b]=z.useState(0),[h,x]=m.useState({value:g==null?void 0:g.memberId,label:`${g==null?void 0:g.firstName} ${g==null?void 0:g.lastName}`}),[p,P]=m.useState([]),[R,E]=m.useState([]),[A,k]=m.useState(!1),[_,B]=m.useState(!1),[q,H]=m.useState(!1),[F,Y]=m.useState(()=>{try{return localStorage.getItem("packageViewer-additionalSettings-accordion")||""}catch(N){return console.warn("localStorage not available:",N),""}});m.useEffect(()=>{g!=null&&g.memberId&&!h.value&&x({value:g==null?void 0:g.memberId,label:`${g==null?void 0:g.firstName} ${g==null?void 0:g.lastName}`})},[g]);const J=()=>{f(h.value)},I=(N,L)=>{b(L)},$=async()=>{try{const N=await V.get("/api/member/all",{params:{chapterId:S==null?void 0:S.chapterId}});E(N.data),P(N.data)}catch{toast.error("Error fetching members")}};m.useEffect(()=>{S!=null&&S.chapterId&&_&&$()},[S,_]),m.useEffect(()=>{h&&(f(h.value),u(N=>({...N,selectedMemberId:h.value,selectedMemberName:h.label})))},[h]),m.useEffect(()=>{S!=null&&S.chapterId&&(V.get(`/api/rights/anyMemberMaketransaction/${S.chapterId}`).then(N=>{B(N.data.allowed)}).catch(N=>{console.error("Error fetching member transaction rights:",N)}),V.get(`/api/rights/changeDate/${S.chapterId}`).then(N=>{H(N.data.allowed)}).catch(N=>{console.error("Error fetching change date rights:",N)}))},[S]);const U=N=>{Y(N);try{localStorage.setItem("packageViewer-additionalSettings-accordion",N)}catch(L){console.warn("localStorage write failed:",L)}};return t.jsxs("div",{className:"rounded-sm border border-stroke bg-white p-3 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[t.jsx(mr,{pendingPayments:o,handleDeletePendingRequest:d,fetchAllData:()=>f(h.value)}),t.jsxs("div",{className:"flex justify-between items-start flex-wrap",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 text-nowrap",children:"Current Date:"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 text-nowrap",children:t.jsx(pr,{})})]}),(q||_)&&t.jsx(dr,{type:"single",collapsible:!0,value:F,onValueChange:U,children:t.jsxs(qt,{value:"item-1",children:[t.jsx(Yt,{children:"Additional Settings"}),t.jsxs(Qt,{children:[q&&t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx(rs,{type:"date",value:i.toISOString().split("T")[0],onChange:N=>{const L=new Date(N.target.value);y(L),Nt(L,n,e,u)},placeholder:"Calculation Date"})}),_&&t.jsx("div",{className:"flex items-center space-x-4 mt-4",children:t.jsx(Ca,{members:R,selectedMember:h,setSelectedMember:x})})]})]})}),l&&l.filter(N=>N.status==="active").length>1&&t.jsxs("div",{className:"flex items-center space-x-4 mt-4",children:[t.jsx("label",{className:"text-md font-semibold",children:"Select Active Term:"}),t.jsxs(Ja,{value:c||"",onValueChange:N=>{w(N),f(h==null?void 0:h.value)},children:[t.jsx(es,{className:"w-[200px]",children:t.jsx(ts,{placeholder:"Select term"})}),t.jsx(as,{children:l.filter(N=>N.status==="active").map(N=>t.jsx(ss,{value:N.termId,children:N.termName},N.termId))})]})]})]}),!!a&&t.jsx("div",{className:"flex items-center justify-end",children:t.jsxs("div",{className:"flex items-center space-x-2 text-nowrap",children:[t.jsxs("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:[a>0?"Advance Amount":"Due Amount",":"]}),t.jsxs("p",{className:`text-lg font-semibold ${a>0?"text-green-500":"text-red-500"}`,children:["₹",Math.abs(a)]})]})})]}),t.jsxs(xe,{sx:{width:"100%"},children:[t.jsx(xe,{sx:{borderBottom:1,borderColor:"divider"},children:t.jsx(Bs,{value:j,onChange:I,"aria-label":"fee tabs",children:s==null?void 0:s.map((N,L)=>t.jsx(vs,{label:N},L))})}),r&&(s==null?void 0:s.map((N,L)=>t.jsx(hr,{value:j,index:L,children:t.jsx(zs,{pendingPayments:o,packageData:n,paymentSuccessHandler:J,parentType:N,receivers:r})},L)))]})]})};function hr(r){const{children:e,value:a,index:s,...n}=r;return t.jsx("div",{role:"tabpanel",hidden:a!==s,id:`simple-tabpanel-${s}`,"aria-labelledby":`simple-tab-${s}`,...n,children:a===s&&t.jsx(xe,{sx:{p:3},children:e})})}const pr=()=>{const[r,e]=m.useState(new Date);return m.useEffect(()=>{const a=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(a)},[]),t.jsxs("span",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:[r.getDate(),"-",r.getMonth()+1,"-",r.getFullYear()," ",r.getHours(),":",r.getMinutes().toString().padStart(2,"0"),":",r.getSeconds().toString().padStart(2,"0")]})},an=()=>t.jsxs(t.Fragment,{children:[t.jsx(Sa,{items:[{name:"Packages",link:"/member/packages"}]}),t.jsx(Os,{children:t.jsx(ur,{})})]});export{an as default};
